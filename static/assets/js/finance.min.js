(function(e,t,n){function r(){var e=D;return e.loader={load:i,i:0},e}function i(e,t,n){var r=t=="c"?N:T;return m=0,t=t||"j",L(e)?s(r,e,t,this.i++,c,n):(v.splice(this.i++,0,e),v.length==1&&o()),this}function s(e,n,r,i,s,u){function a(){!d&&l(c.readyState)&&(g.r=d=1,!m&&f(),c.onload=c.onreadystatechange=null,h(function(){w.removeChild(c)},0))}var c=t.createElement(e),d=0,g={t:r,s:n,e:u};c.src=c.data=n,!y&&(c.style.display="none"),c.width=c.height="0",e!="object"&&(c.type=r),c.onload=c.onreadystatechange=a,e=="img"?c.onerror=a:e=="script"&&(c.onerror=function(){g.e=g.r=1,o()}),v.splice(i,0,g),w.insertBefore(c,y?null:p),h(function(){d||(w.removeChild(c),g.r=g.e=d=1,f())},D.errorTimeout)}function o(){var e=v.shift();m=1,e?e.t?h(function(){e.t=="c"?u(e):a(e)},0):(e(),f()):m=0}function u(e){var n=t.createElement("link"),r;n.href=e.s,n.rel="stylesheet",n.type="text/css";if(!e.e&&(S||g)){var i=function(e){h(function(){if(!r)try{e.sheet.cssRules.length?(r=1,f()):i(e)}catch(t){t.code==1e3||t.message=="security"||t.message=="denied"?(r=1,h(function(){f()},0)):i(e)}},0)};i(n)}else n.onload=function(){r||(r=1,h(function(){f()},0))},e.e&&n.onload();h(function(){r||(r=1,f())},D.errorTimeout),!e.e&&p.parentNode.insertBefore(n,p)}function a(e){var n=t.createElement("script"),r;n.src=e.s,n.onreadystatechange=n.onload=function(){!r&&l(n.readyState)&&(r=1,f(),n.onload=n.onreadystatechange=null)},h(function(){r||(r=1,f())},D.errorTimeout),e.e?n.onload():p.parentNode.insertBefore(n,p)}function f(){var e=1,t=-1;while(v.length- ++t)if(v[t].s&&!(e=v[t].r))break;e&&o()}function l(e){return!e||e=="loaded"||e=="complete"}var c=t.documentElement,h=e.setTimeout,p=t.getElementsByTagName("script")[0],d={}.toString,v=[],m=0,g="MozAppearance"in c.style,y=g&&!!t.createRange().compareNode,b=g&&!y,w=y?c:p.parentNode,E=e.opera&&d.call(e.opera)=="[object Opera]",S="webkitAppearance"in c.style,x=S&&"async"in t.createElement("script"),T=g?"object":E||x?"img":"script",N=S?"img":T,C=Array.isArray||function(e){return d.call(e)=="[object Array]"},k=function(e){return Object(e)===e},L=function(e){return typeof e=="string"},A=function(e){return d.call(e)=="[object Function]"},O=[],M={},_,D;D=function(e){function t(e,t){function n(e){if(L(e))i(e,u,t,0,r);else if(k(e))for(a in e)e.hasOwnProperty(a)&&i(e[a],u,t,a,r)}var r=!!e.test,s=r?e.yep:e.nope,o=e.load||e.both,u=e.callback,a;n(s),n(o),e.complete&&t.load(e.complete)}function i(e,t,i,o,u){var a=s(e),f=a.autoCallback;if(!a.bypass){t&&(t=A(t)?t:t[e]||t[o]||t[e.split("/").pop().split("?")[0]]);if(a.instead)return a.instead(e,t,i,o,u);i.load(a.url,a.forceCSS||!a.forceJS&&/css$/.test(a.url)?"c":n,a.noexec),(A(t)||A(f))&&i.load(function(){r(),t&&t(a.origUrl,u,o),f&&f(a.origUrl,u,o)})}}function s(e){var t=e.split("!"),n=O.length,r=t.pop(),i=t.length,s={url:r,origUrl:r,prefixes:t},o,u;for(u=0;u<i;u++)o=M[t[u]],o&&(s=o(s));for(u=0;u<n;u++)s=O[u](s);return s}var o,u,a=this.yepnope.loader;if(L(e))i(e,0,a,0);else if(C(e))for(o=0;o<e.length;o++)u=e[o],L(u)?i(u,0,a,0):C(u)?D(u):k(u)&&t(u,a);else k(e)&&t(e,a)},D.addPrefix=function(e,t){M[e]=t},D.addFilter=function(e){O.push(e)},D.errorTimeout=1e4,t.readyState==null&&t.addEventListener&&(t.readyState="loading",t.addEventListener("DOMContentLoaded",_=function(){t.removeEventListener("DOMContentLoaded",_,0),t.readyState="complete"},0)),e.yepnope=r()})(this,this.document);!function(e,t,n){typeof module!="undefined"?module.exports=n(e,t):typeof define=="function"&&typeof define.amd=="object"?define(n):t[e]=n(e,t)}("bean",this,function(e,t){var n=window,r=t[e],i=/over|out/,s=/[^\.]*(?=\..*)\.|.*/,o=/\..*/,u="addEventListener",a="attachEvent",f="removeEventListener",l="detachEvent",c=document||{},h=c.documentElement||{},p=h[u],d=p?u:a,v=Array.prototype.slice,m=/click|mouse|menu|drag|drop/i,g=/^touch|^gesture/i,y={one:1},b=function(e,t,n){for(n=0;n<t.length;n++)e[t[n]]=1;return e}({},("click dblclick mouseup mousedown contextmenu mousewheel DOMMouseScroll mouseover mouseout mousemove selectstart selectend keydown keypress keyup orientationchange focus blur change reset select submit load unload beforeunload resize move DOMContentLoaded readystatechange error abort scroll "+(p?"show input invalid touchstart touchmove touchend touchcancel gesturestart gesturechange gestureend message readystatechange pageshow pagehide popstate hashchange offline online afterprint beforeprint dragstart dragenter dragover dragleave drag drop dragend loadstart progress suspend emptied stalled loadmetadata loadeddata canplay canplaythrough playing waiting seeking seeked ended durationchange timeupdate play pause ratechange volumechange cuechange checking noupdate downloading cached updateready obsolete ":"")).split(" ")),w=function(){function e(e,t){while((t=t.parentNode)!==null)if(t===e)return!0;return!1}function t(t){var n=t.relatedTarget;return n?n!==this&&n.prefix!=="xul"&&!/document/.test(this.toString())&&!e(this,n):n===null}return{mouseenter:{base:"mouseover",condition:t},mouseleave:{base:"mouseout",condition:t},mousewheel:{base:/Firefox/.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel"}}}(),E=function(){var e="altKey attrChange attrName bubbles cancelable ctrlKey currentTarget detail eventPhase getModifierState isTrusted metaKey relatedNode relatedTarget shiftKey srcElement target timeStamp type view which".split(" "),t=e.concat("button buttons clientX clientY dataTransfer fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" ")),n=e.concat("char charCode key keyCode".split(" ")),r=e.concat("touches targetTouches changedTouches scale rotation".split(" ")),s="preventDefault",o=function(e){return function(){e[s]?e[s]():e.returnValue=!1}},u="stopPropagation",a=function(e){return function(){e[u]?e[u]():e.cancelBubble=!0}},f=function(e){return function(){e[s](),e[u](),e.stopped=!0}},l=function(e,t,n){var r,i;for(r=n.length;r--;)i=n[r],!(i in t)&&i in e&&(t[i]=e[i])};return function(p,d){var v={originalEvent:p,isNative:d};if(!p)return v;var y,b=p.type,w=p.target||p.srcElement;v[s]=o(p),v[u]=a(p),v.stop=f(v),v.target=w&&w.nodeType===3?w.parentNode:w;if(d){if(b.indexOf("key")!==-1)y=n,v.keyCode=p.which||p.keyCode;else if(m.test(b)){y=t,v.rightClick=p.which===3||p.button===2,v.pos={x:0,y:0};if(p.pageX||p.pageY)v.clientX=p.pageX,v.clientY=p.pageY;else if(p.clientX||p.clientY)v.clientX=p.clientX+c.body.scrollLeft+h.scrollLeft,v.clientY=p.clientY+c.body.scrollTop+h.scrollTop;i.test(b)&&(v.relatedTarget=p.relatedTarget||p[(b==="mouseover"?"from":"to")+"Element"])}else g.test(b)&&(y=r);l(p,v,y||e)}return v}}(),S=function(e,t){return!p&&!t&&(e===c||e===n)?h:e},x=function(){function e(e,t,n,r,i){this.element=e,this.type=t,this.handler=n,this.original=r,this.namespaces=i,this.custom=w[t],this.isNative=b[t]&&e[d],this.eventType=p||this.isNative?t:"propertychange",this.customType=!p&&!this.isNative&&t,this.target=S(e,this.isNative),this.eventSupport=this.target[d]}return e.prototype={inNamespaces:function(e){var t,n;if(!e)return!0;if(!this.namespaces)return!1;for(t=e.length;t--;)for(n=this.namespaces.length;n--;)if(e[t]===this.namespaces[n])return!0;return!1},matches:function(e,t,n){return this.element===e&&(!t||this.original===t)&&(!n||this.handler===n)}},e}(),T=function(){var e={},t=function(n,r,i,s,o){if(!r||r==="*")for(var u in e)u.charAt(0)==="$"&&t(n,u.substr(1),i,s,o);else{var a=0,f,l=e["$"+r],c=n==="*";if(!l)return;for(f=l.length;a<f;a++)if(c||l[a].matches(n,i,s))if(!o(l[a],l,a,r))return}},n=function(t,n,r){var i,s=e["$"+n];if(s)for(i=s.length;i--;)if(s[i].matches(t,r,null))return!0;return!1},r=function(e,n,r){var i=[];return t(e,n,r,null,function(e){return i.push(e)}),i},i=function(t){return(e["$"+t.type]||(e["$"+t.type]=[])).push(t),t},s=function(n){t(n.element,n.type,null,n.handler,function(t,n,r){return n.splice(r,1),n.length===0&&delete e["$"+t.type],!1})},o=function(){var t,n=[];for(t in e)t.charAt(0)==="$"&&(n=n.concat(e[t]));return n};return{has:n,get:r,put:i,del:s,entries:o}}(),N=p?function(e,t,n,r){e[r?u:f](t,n,!1)}:function(e,t,n,r,i){i&&r&&e["_on"+i]===null&&(e["_on"+i]=0),e[r?a:l]("on"+t,n)},C=function(e,t,r){return function(i){return i=E(i||((this.ownerDocument||this.document||this).parentWindow||n).event,!0),t.apply(e,[i].concat(r))}},k=function(e,t,r,i,s,o){return function(u){if(i?i.apply(this,arguments):p?!0:u&&u.propertyName==="_on"+r||!u)u&&(u=E(u||((this.ownerDocument||this.document||this).parentWindow||n).event,o)),t.apply(e,u&&(!s||s.length===0)?arguments:v.call(arguments,u?0:1).concat(s))}},L=function(e,t,n,r,i){return function(){e(t,n,i),r.apply(this,arguments)}},A=function(e,t,n,r){var i,s,u,a=t&&t.replace(o,""),f=T.get(e,a,n);for(i=0,s=f.length;i<s;i++)f[i].inNamespaces(r)&&((u=f[i]).eventSupport&&N(u.target,u.eventType,u.handler,!1,u.type),T.del(u))},O=function(e,t,n,r,i){var u,a=t.replace(o,""),f=t.replace(s,"").split(".");if(T.has(e,a,n))return e;a==="unload"&&(n=L(A,e,a,n,r)),w[a]&&(w[a].condition&&(n=k(e,n,a,w[a].condition,!0)),a=w[a].base||a),u=T.put(new x(e,a,n,r,f[0]&&f)),u.handler=u.isNative?C(e,u.handler,i):k(e,u.handler,a,!1,i,!1),u.eventSupport&&N(u.target,u.eventType,u.handler,!0,u.customType)},M=function(e,t,n){return function(r){var i,s,o=typeof e=="string"?n(e,this):e;for(i=r.target;i&&i!==this;i=i.parentNode)for(s=o.length;s--;)if(o[s]===i)return t.apply(i,arguments)}},_=function(e,t,n){var r,i,u,a,f,l=A,c=t&&typeof t=="string";if(c&&t.indexOf(" ")>0){t=t.split(" ");for(f=t.length;f--;)_(e,t[f],n);return e}u=c&&t.replace(o,""),u&&w[u]&&(u=w[u].type);if(!t||c){if(a=c&&t.replace(s,""))a=a.split(".");l(e,u,n,a)}else if(typeof t=="function")l(e,null,t);else for(r in t)t.hasOwnProperty(r)&&_(e,r,t[r]);return e},D=function(e,t,n,r,i){var s,o,u,a,f=n,l=n&&typeof n=="string";if(t&&!n&&typeof t=="object")for(s in t)t.hasOwnProperty(s)&&D.apply(this,[e,s,t[s]]);else{a=arguments.length>3?v.call(arguments,3):[],o=(l?n:t).split(" "),l&&(n=M(t,f=r,i))&&(a=v.call(a,1)),this===y&&(n=L(_,e,t,n,f));for(u=o.length;u--;)O(e,o[u],n,f,a)}return e},P=function(){return D.apply(y,arguments)},H=p?function(e,t,r){var i=c.createEvent(e?"HTMLEvents":"UIEvents");i[e?"initEvent":"initUIEvent"](t,!0,!0,n,1),r.dispatchEvent(i)}:function(e,t,n){n=S(n,e),e?n.fireEvent("on"+t,c.createEventObject()):n["_on"+t]++},B=function(e,t,n){var r,i,u,a,f,l=t.split(" ");for(r=l.length;r--;){t=l[r].replace(o,"");if(a=l[r].replace(s,""))a=a.split(".");if(!a&&!n&&e[d])H(b[t],t,e);else{f=T.get(e,t),n=[!1].concat(n);for(i=0,u=f.length;i<u;i++)f[i].inNamespaces(a)&&f[i].handler.apply(e,n)}}return e},j=function(e,t,n){var r=0,i=T.get(t,n),s=i.length;for(;r<s;r++)i[r].original&&D(e,i[r].type,i[r].original);return e},F={add:D,one:P,remove:_,clone:j,fire:B,noConflict:function(){return t[e]=r,this}};if(n[a]){var I=function(){var e,t=T.entries();for(e in t)t[e].type&&t[e].type!=="unload"&&_(t[e].element,t[e].type);n[l]("onunload",I),n.CollectGarbage&&n.CollectGarbage()};n[a]("onunload",I)}return F}),function(){var e=this,t=e._,n={},r=Array.prototype,i=Object.prototype,s=Function.prototype,o=r.slice,u=r.unshift,a=i.toString,f=i.hasOwnProperty,l=r.forEach,c=r.map,h=r.reduce,p=r.reduceRight,d=r.filter,v=r.every,m=r.some,g=r.indexOf,y=r.lastIndexOf,b=Array.isArray,w=Object.keys,E=s.bind,S=function(e){return new k(e)};typeof module!="undefined"&&module.exports?(module.exports=S,S._=S):e._=S,S.VERSION="1.1.7";var x=S.each=S.forEach=function(e,t,r){if(e==null)return;if(l&&e.forEach===l)e.forEach(t,r);else if(e.length===+e.length){for(var i=0,s=e.length;i<s;i++)if(i in e&&t.call(r,e[i],i,e)===n)return}else for(var o in e)if(f.call(e,o)&&t.call(r,e[o],o,e)===n)return};S.map=function(e,t,n){var r=[];return e==null?r:c&&e.map===c?e.map(t,n):(x(e,function(e,i,s){r[r.length]=t.call(n,e,i,s)}),r)},S.reduce=S.foldl=S.inject=function(e,t,n,r){var i=n!==void 0;e==null&&(e=[]);if(h&&e.reduce===h)return r&&(t=S.bind(t,r)),i?e.reduce(t,n):e.reduce(t);x(e,function(e,s,o){i?n=t.call(r,n,e,s,o):(n=e,i=!0)});if(!i)throw new TypeError("Reduce of empty array with no initial value");return n},S.reduceRight=S.foldr=function(e,t,n,r){e==null&&(e=[]);if(p&&e.reduceRight===p)return r&&(t=S.bind(t,r)),n!==void 0?e.reduceRight(t,n):e.reduceRight(t);var i=(S.isArray(e)?e.slice():S.toArray(e)).reverse();return S.reduce(i,t,n,r)},S.find=S.detect=function(e,t,n){var r;return T(e,function(e,i,s){if(t.call(n,e,i,s))return r=e,!0}),r},S.filter=S.select=function(e,t,n){var r=[];return e==null?r:d&&e.filter===d?e.filter(t,n):(x(e,function(e,i,s){t.call(n,e,i,s)&&(r[r.length]=e)}),r)},S.reject=function(e,t,n){var r=[];return e==null?r:(x(e,function(e,i,s){t.call(n,e,i,s)||(r[r.length]=e)}),r)},S.every=S.all=function(e,t,r){var i=!0;return e==null?i:v&&e.every===v?e.every(t,r):(x(e,function(e,s,o){if(!(i=i&&t.call(r,e,s,o)))return n}),i)};var T=S.some=S.any=function(e,t,r){t=t||S.identity;var i=!1;return e==null?i:m&&e.some===m?e.some(t,r):(x(e,function(e,s,o){if(i|=t.call(r,e,s,o))return n}),!!i)};S.include=S.contains=function(e,t){var n=!1;return e==null?n:g&&e.indexOf===g?e.indexOf(t)!=-1:(T(e,function(e){if(n=e===t)return!0}),n)},S.invoke=function(e,t){var n=o.call(arguments,2);return S.map(e,function(e){return(t.call?t||e:e[t]).apply(e,n)})},S.pluck=function(e,t){return S.map(e,function(e){return e[t]})},S.max=function(e,t,n){if(!t&&S.isArray(e))return Math.max.apply(Math,e);var r={computed:-Infinity};return x(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o>=r.computed&&(r={value:e,computed:o})}),r.value},S.min=function(e,t,n){if(!t&&S.isArray(e))return Math.min.apply(Math,e);var r={computed:Infinity};return x(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o<r.computed&&(r={value:e,computed:o})}),r.value},S.sortBy=function(e,t,n){return S.pluck(S.map(e,function(e,r,i){return{value:e,criteria:t.call(n,e,r,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;return n<r?-1:n>r?1:0}),"value")},S.groupBy=function(e,t){var n={};return x(e,function(e,r){var i=t(e,r);(n[i]||(n[i]=[])).push(e)}),n},S.sortedIndex=function(e,t,n){n||(n=S.identity);var r=0,i=e.length;while(r<i){var s=r+i>>1;n(e[s])<n(t)?r=s+1:i=s}return r},S.toArray=function(e){return e?e.toArray?e.toArray():S.isArray(e)?o.call(e):S.isArguments(e)?o.call(e):S.values(e):[]},S.size=function(e){return S.toArray(e).length},S.first=S.head=function(e,t,n){return t!=null&&!n?o.call(e,0,t):e[0]},S.rest=S.tail=function(e,t,n){return o.call(e,t==null||n?1:t)},S.last=function(e){return e[e.length-1]},S.compact=function(e){return S.filter(e,function(e){return!!e})},S.flatten=function(e){return S.reduce(e,function(e,t){return S.isArray(t)?e.concat(S.flatten(t)):(e[e.length]=t,e)},[])},S.without=function(e){return S.difference(e,o.call(arguments,1))},S.uniq=S.unique=function(e,t){return S.reduce(e,function(e,n,r){if(0==r||(t===!0?S.last(e)!=n:!S.include(e,n)))e[e.length]=n;return e},[])},S.union=function(){return S.uniq(S.flatten(arguments))},S.intersection=S.intersect=function(e){var t=o.call(arguments,1);return S.filter(S.uniq(e),function(e){return S.every(t,function(t){return S.indexOf(t,e)>=0})})},S.difference=function(e,t){return S.filter(e,function(e){return!S.include(t,e)})},S.zip=function(){var e=o.call(arguments),t=S.max(S.pluck(e,"length")),n=new Array(t);for(var r=0;r<t;r++)n[r]=S.pluck(e,""+r);return n},S.indexOf=function(e,t,n){if(e==null)return-1;var r,i;if(n)return r=S.sortedIndex(e,t),e[r]===t?r:-1;if(g&&e.indexOf===g)return e.indexOf(t);for(r=0,i=e.length;r<i;r++)if(e[r]===t)return r;return-1},S.lastIndexOf=function(e,t){if(e==null)return-1;if(y&&e.lastIndexOf===y)return e.lastIndexOf(t);var n=e.length;while(n--)if(e[n]===t)return n;return-1},S.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;var r=Math.max(Math.ceil((t-e)/n),0),i=0,s=new Array(r);while(i<r)s[i++]=e,e+=n;return s},S.bind=function(e,t){if(e.bind===E&&E)return E.apply(e,o.call(arguments,1));var n=o.call(arguments,2);return function(){return e.apply(t,n.concat(o.call(arguments)))}},S.bindAll=function(e){var t=o.call(arguments,1);return t.length==0&&(t=S.functions(e)),x(t,function(t){e[t]=S.bind(e[t],e)}),e},S.memoize=function(e,t){var n={};return t||(t=S.identity),function(){var r=t.apply(this,arguments);return f.call(n,r)?n[r]:n[r]=e.apply(this,arguments)}},S.delay=function(e,t){var n=o.call(arguments,2);return setTimeout(function(){return e.apply(e,n)},t)},S.defer=function(e){return S.delay.apply(S,[e,1].concat(o.call(arguments,1)))};var N=function(e,t,n){var r;return function(){var i=this,s=arguments,o=function(){r=null,e.apply(i,s)};n&&clearTimeout(r);if(n||!r)r=setTimeout(o,t)}};S.throttle=function(e,t){return N(e,t,!1)},S.debounce=function(e,t){return N(e,t,!0)},S.once=function(e){var t=!1,n;return function(){return t?n:(t=!0,n=e.apply(this,arguments))}},S.wrap=function(e,t){return function(){var n=[e].concat(o.call(arguments));return t.apply(this,n)}},S.compose=function(){var e=o.call(arguments);return function(){var t=o.call(arguments);for(var n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},S.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},S.keys=w||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)f.call(e,n)&&(t[t.length]=n);return t},S.values=function(e){return S.map(e,S.identity)},S.functions=S.methods=function(e){var t=[];for(var n in e)S.isFunction(e[n])&&t.push(n);return t.sort()},S.extend=function(e){return x(o.call(arguments,1),function(t){for(var n in t)t[n]!==void 0&&(e[n]=t[n])}),e},S.defaults=function(e){return x(o.call(arguments,1),function(t){for(var n in t)e[n]==null&&(e[n]=t[n])}),e},S.clone=function(e){return S.isArray(e)?e.slice():S.extend({},e)},S.tap=function(e,t){return t(e),e},S.isEqual=function(e,t){if(e===t)return!0;var n=typeof e,r=typeof t;if(n!=r)return!1;if(e==t)return!0;if(!e&&t||e&&!t)return!1;e._chain&&(e=e._wrapped),t._chain&&(t=t._wrapped);if(e.isEqual)return e.isEqual(t);if(t.isEqual)return t.isEqual(e);if(S.isDate(e)&&S.isDate(t))return e.getTime()===t.getTime();if(S.isNaN(e)&&S.isNaN(t))return!1;if(S.isRegExp(e)&&S.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.ignoreCase===t.ignoreCase&&e.multiline===t.multiline;if(n!=="object")return!1;if(e.length&&e.length!==t.length)return!1;var i=S.keys(e),s=S.keys(t);if(i.length!=s.length)return!1;for(var o in e)if(!(o in t)||!S.isEqual(e[o],t[o]))return!1;return!0},S.isEmpty=function(e){if(S.isArray(e)||S.isString(e))return e.length===0;for(var t in e)if(f.call(e,t))return!1;return!0},S.isElement=function(e){return!!e&&e.nodeType==1},S.isArray=b||function(e){return a.call(e)==="[object Array]"},S.isObject=function(e){return e===Object(e)},S.isArguments=function(e){return!!e&&!!f.call(e,"callee")},S.isFunction=function(e){return!!(e&&e.constructor&&e.call&&e.apply)},S.isString=function(e){return!!(e===""||e&&e.charCodeAt&&e.substr)},S.isNumber=function(e){return!!(e===0||e&&e.toExponential&&e.toFixed)},S.isNaN=function(e){return e!==e},S.isBoolean=function(e){return e===!0||e===!1},S.isDate=function(e){return!!(e&&e.getTimezoneOffset&&e.setUTCFullYear)},S.isRegExp=function(e){return!(!(e&&e.test&&e.exec)||!e.ignoreCase&&e.ignoreCase!==!1)},S.isNull=function(e){return e===null},S.isUndefined=function(e){return e===void 0},S.noConflict=function(){return e._=t,this},S.identity=function(e){return e},S.times=function(e,t,n){for(var r=0;r<e;r++)t.call(n,r)},S.mixin=function(e){x(S.functions(e),function(t){A(t,S[t]=e[t])})};var C=0;S.uniqueId=function(e){var t=C++;return e?e+t:t},S.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g},S.template=function(e,t){var n=S.templateSettings,r="var __p=[],print=function(){__p.push.apply(__p,arguments);};with(obj||{}){__p.push('"+e.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(n.interpolate,function(e,t){return"',"+t.replace(/\\'/g,"'")+",'"}).replace(n.evaluate||null,function(e,t){return"');"+t.replace(/\\'/g,"'").replace(/[\r\n\t]/g," ")+"__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');}return __p.join('');",i=new Function("obj",r);return t?i(t):i};var k=function(e){this._wrapped=e};S.prototype=k.prototype;var L=function(e,t){return t?S(e).chain():e},A=function(e,t){k.prototype[e]=function(){var e=o.call(arguments);return u.call(e,this._wrapped),L(t.apply(S,e),this._chain)}};S.mixin(S),x(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=r[e];k.prototype[e]=function(){return t.apply(this._wrapped,arguments),L(this._wrapped,this._chain)}}),x(["concat","join","slice"],function(e){var t=r[e];k.prototype[e]=function(){return L(t.apply(this._wrapped,arguments),this._chain)}}),k.prototype.chain=function(){return this._chain=!0,this},k.prototype.value=function(){return this._wrapped}}(),function(){var e=this,t=this.Flotr,n;n={_:_,bean:bean,isIphone:/iphone/i.test(navigator.userAgent),isIE:navigator.appVersion.indexOf("MSIE")!=-1?parseFloat(navigator.appVersion.split("MSIE")[1]):!1,graphTypes:{},plugins:{},addType:function(e,t){n.graphTypes[e]=t,n.defaultOptions[e]=t.options||{},n.defaultOptions.defaultType=n.defaultOptions.defaultType||e},addPlugin:function(e,t){n.plugins[e]=t,n.defaultOptions[e]=t.options||{}},draw:function(e,t,r,i){return i=i||n.Graph,new i(e,t,r)},merge:function(e,t){var r,i,s=t||{};for(r in e)i=e[r],i&&typeof i=="object"?i.constructor===Array?s[r]=this._.clone(i):i.constructor!==RegExp&&!this._.isElement(i)&&!i.jquery?s[r]=n.merge(i,t?t[r]:undefined):s[r]=i:s[r]=i;return s},clone:function(e){return n.merge(e,{})},getTickSize:function(e,t,r,i){var s=(r-t)/e,o=n.getMagnitude(s),u=10,a=s/o;return a<1.5?u=1:a<2.25?u=2:a<3?u=i===0?2:2.5:a<7.5&&(u=5),u*o},defaultTickFormatter:function(e,t){return e+""},defaultTrackFormatter:function(e){return"("+e.x+", "+e.y+")"},engineeringNotation:function(e,t,n){var r=["Y","Z","E","P","T","G","M","k",""],i=["y","z","a","f","p","n","Âµ","m",""],s=r.length;n=n||1e3,t=Math.pow(10,t||2);if(e===0)return 0;if(e>1)while(s--&&e>=n)e/=n;else{r=i,s=r.length;while(s--&&e<1)e*=n}return Math.round(e*t)/t+r[s]},getMagnitude:function(e){return Math.pow(10,Math.floor(Math.log(e)/Math.LN10))},toPixel:function(e){return Math.floor(e)+.5},toRad:function(e){return-e*(Math.PI/180)},floorInBase:function(e,t){return t*Math.floor(e/t)},drawText:function(e,t,r,i,s){if(!e.fillText){e.drawText(t,r,i,s);return}s=this._.extend({size:n.defaultOptions.fontSize,color:"#000000",textAlign:"left",textBaseline:"bottom",weight:1,angle:0},s),e.save(),e.translate(r,i),e.rotate(s.angle),e.fillStyle=s.color,e.font=(s.weight>1?"bold ":"")+s.size*1.3+"px sans-serif",e.textAlign=s.textAlign,e.textBaseline=s.textBaseline,e.fillText(t,0,0),e.restore()},getBestTextAlign:function(e,t){return t=t||{textAlign:"center",textBaseline:"middle"},e+=n.getTextAngleFromAlign(t),Math.abs(Math.cos(e))>.01&&(t.textAlign=Math.cos(e)>0?"right":"left"),Math.abs(Math.sin(e))>.01&&(t.textBaseline=Math.sin(e)>0?"top":"bottom"),t},alignTable:{"right middle":0,"right top":Math.PI/4,"center top":Math.PI/2,"left top":3*(Math.PI/4),"left middle":Math.PI,"left bottom":-3*(Math.PI/4),"center bottom":-Math.PI/2,"right bottom":-Math.PI/4,"center middle":0},getTextAngleFromAlign:function(e){return n.alignTable[e.textAlign+" "+e.textBaseline]||0},noConflict:function(){return e.Flotr=t,this}},e.Flotr=n}(),Flotr.defaultOptions={colors:["#00A8F0","#C0D800","#CB4B4B","#4DA74D","#9440ED"],ieBackgroundColor:"#FFFFFF",title:null,subtitle:null,shadowSize:4,defaultType:null,HtmlText:!0,fontColor:"#545454",fontSize:7.5,resolution:1,parseFloat:!0,preventDefault:!0,xaxis:{ticks:null,minorTicks:null,showLabels:!0,showMinorLabels:!1,labelsAngle:0,title:null,titleAngle:0,noTicks:5,minorTickFreq:null,tickFormatter:Flotr.defaultTickFormatter,tickDecimals:null,min:null,max:null,autoscale:!1,autoscaleMargin:0,color:null,mode:"normal",timeFormat:null,timeMode:"UTC",timeUnit:"millisecond",scaling:"linear",base:Math.E,titleAlign:"center",margin:!0},x2axis:{},yaxis:{ticks:null,minorTicks:null,showLabels:!0,showMinorLabels:!1,labelsAngle:0,title:null,titleAngle:90,noTicks:5,minorTickFreq:null,tickFormatter:Flotr.defaultTickFormatter,tickDecimals:null,min:null,max:null,autoscale:!1,autoscaleMargin:0,color:null,scaling:"linear",base:Math.E,titleAlign:"center",margin:!0},y2axis:{titleAngle:270},grid:{color:"#545454",backgroundColor:null,backgroundImage:null,watermarkAlpha:.4,tickColor:"#DDDDDD",labelMargin:3,verticalLines:!0,minorVerticalLines:null,horizontalLines:!0,minorHorizontalLines:null,outlineWidth:1,outline:"nsew",circular:!1},mouse:{track:!1,trackAll:!1,position:"se",relative:!1,trackFormatter:Flotr.defaultTrackFormatter,margin:5,lineColor:"#FF3F19",trackDecimals:1,sensibility:2,trackY:!0,radius:3,fillColor:null,fillOpacity:.4}},function(){function e(e,t,n,r){this.rgba=["r","g","b","a"];var i=4;while(-1<--i)this[this.rgba[i]]=arguments[i]||(i==3?1:0);this.normalize()}var t=Flotr._,n={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]};e.prototype={scale:function(e,n,r,i){var s=4;while(-1<--s)t.isUndefined(arguments[s])||(this[this.rgba[s]]*=arguments[s]);return this.normalize()},alpha:function(e){return!t.isUndefined(e)&&!t.isNull(e)&&(this.a=e),this.normalize()},clone:function(){return new e(this.r,this.b,this.g,this.a)},limit:function(e,t,n){return Math.max(Math.min(e,n),t)},normalize:function(){var e=this.limit;return this.r=e(parseInt(this.r,10),0,255),this.g=e(parseInt(this.g,10),0,255),this.b=e(parseInt(this.b,10),0,255),this.a=e(this.a,0,1),this},distance:function(t){if(!t)return;t=new e.parse(t);var n=0,r=3;while(-1<--r)n+=Math.abs(this[this.rgba[r]]-t[this.rgba[r]]);return n},toString:function(){return this.a>=1?"rgb("+[this.r,this.g,this.b].join(",")+")":"rgba("+[this.r,this.g,this.b,this.a].join(",")+")"},contrast:function(){var e=1-(.299*this.r+.587*this.g+.114*this.b)/255;return e<.5?"#000000":"#ffffff"}},t.extend(e,{parse:function(t){if(t instanceof e)return t;var r;if(r=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(t))return new e(parseInt(r[1],16),parseInt(r[2],16),parseInt(r[3],16));if(r=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(t))return new e(parseInt(r[1],10),parseInt(r[2],10),parseInt(r[3],10));if(r=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(t))return new e(parseInt(r[1]+r[1],16),parseInt(r[2]+r[2],16),parseInt(r[3]+r[3],16));if(r=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(t))return new e(parseInt(r[1],10),parseInt(r[2],10),parseInt(r[3],10),parseFloat(r[4]));if(r=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(t))return new e(parseFloat(r[1])*2.55,parseFloat(r[2])*2.55,parseFloat(r[3])*2.55);if(r=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(t))return new e(parseFloat(r[1])*2.55,parseFloat(r[2])*2.55,parseFloat(r[3])*2.55,parseFloat(r[4]));var i=(t+"").replace(/^\s*([\S\s]*?)\s*$/,"$1").toLowerCase();return i=="transparent"?new e(255,255,255,0):(r=n[i])?new e(r[0],r[1],r[2]):new e(0,0,0,0)},processColor:function(n,r){var i=r.opacity;if(!n)return"rgba(0, 0, 0, 0)";if(n instanceof e)return n.alpha(i).toString();if(t.isString(n))return e.parse(n).alpha(i).toString();var s=n.colors?n:{colors:n};if(!r.ctx)return t.isArray(s.colors)?e.parse(t.isArray(s.colors[0])?s.colors[0][1]:s.colors[0]).alpha(i).toString():"rgba(0, 0, 0, 0)";s=t.extend({start:"top",end:"bottom"},s),/top/i.test(s.start)&&(r.x1=0),/left/i.test(s.start)&&(r.y1=0),/bottom/i.test(s.end)&&(r.x2=0),/right/i.test(s.end)&&(r.y2=0);var o,u,f,l=r.ctx.createLinearGradient(r.x1,r.y1,r.x2,r.y2);for(o=0;o<s.colors.length;o++)u=s.colors[o],t.isArray(u)?(f=u[0],u=u[1]):f=o/(s.colors.length-1),l.addColorStop(f,e.parse(u).alpha(i));return l}}),Flotr.Color=e}(),Flotr.Date={set:function(e,t,n,r){n=n||"UTC",t="set"+(n==="UTC"?"UTC":"")+t,e[t](r)},get:function(e,t,n){return n=n||"UTC",t="get"+(n==="UTC"?"UTC":"")+t,e[t]()},format:function(e,t,n){function r(e){return e+="",e.length==1?"0"+e:e}if(!e)return;var i=this.get,s={h:i(e,"Hours",n).toString(),H:r(i(e,"Hours",n)),M:r(i(e,"Minutes",n)),S:r(i(e,"Seconds",n)),s:i(e,"Milliseconds",n),d:i(e,"Date",n).toString(),m:(i(e,"Month",n)+1).toString(),y:i(e,"FullYear",n).toString(),b:Flotr.Date.monthNames[i(e,"Month",n)]},o=[],u,a=!1;for(var f=0;f<t.length;++f)u=t.charAt(f),a?(o.push(s[u]||u),a=!1):u=="%"?a=!0:o.push(u);return o.join("")},getFormat:function(e,t){var n=Flotr.Date.timeUnits;return e<n.second?"%h:%M:%S.%s":e<n.minute?"%h:%M:%S":e<n.day?t<2*n.day?"%h:%M":"%b %d %h:%M":e<n.month?"%b %d":e<n.year?t<n.year?"%b":"%b %y":"%y"},formatter:function(e,t){var n=t.options,r=Flotr.Date.timeUnits[n.timeUnit],i=new Date(e*r);if(t.options.timeFormat)return Flotr.Date.format(i,n.timeFormat,n.timeMode);var s=(t.max-t.min)*r,o=t.tickSize*Flotr.Date.timeUnits[t.tickUnit];return Flotr.Date.format(i,Flotr.Date.getFormat(o,s),n.timeMode)},generator:function(e){function t(e){n(g,e,u,Flotr.floorInBase(r(g,e,u),p))}var n=this.set,r=this.get,i=this.timeUnits,s=this.spec,o=e.options,u=o.timeMode,a=i[o.timeUnit],f=e.min*a,l=e.max*a,c=(l-f)/o.noTicks,h=[],p=e.tickSize,d,v,m;v=o.tickFormatter===Flotr.defaultTickFormatter?this.formatter:o.tickFormatter;for(m=0;m<s.length-1;++m){var g=s[m][0]*i[s[m][1]];if(c<(g+s[m+1][0]*i[s[m+1][1]])/2&&g>=p)break}p=s[m][0],d=s[m][1],d=="year"&&(p=Flotr.getTickSize(o.noTicks*i.year,f,l,0),p==.5&&(d="month",p=6)),e.tickUnit=d,e.tickSize=p;var y=p*i[d];g=new Date(f);switch(d){case"millisecond":t("Milliseconds");break;case"second":t("Seconds");break;case"minute":t("Minutes");break;case"hour":t("Hours");break;case"month":t("Month");break;case"year":t("FullYear")}y>=i.second&&n(g,"Milliseconds",u,0),y>=i.minute&&n(g,"Seconds",u,0),y>=i.hour&&n(g,"Minutes",u,0),y>=i.day&&n(g,"Hours",u,0),y>=i.day*4&&n(g,"Date",u,1),y>=i.year&&n(g,"Month",u,0);var b=0,w=NaN,E;do{E=w,w=g.getTime(),h.push({v:w/a,label:v(w/a,e)});if(d=="month")if(p<1){n(g,"Date",u,1);var S=g.getTime();n(g,"Month",u,r(g,"Month",u)+1);var x=g.getTime();g.setTime(w+b*i.hour+(x-S)*p),b=r(g,"Hours",u),n(g,"Hours",u,0)}else n(g,"Month",u,r(g,"Month",u)+p);else d=="year"?n(g,"FullYear",u,r(g,"FullYear",u)+p):g.setTime(w+y)}while(w<l&&w!=E);return h},timeUnits:{millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,month:2592e6,year:31556952e3},spec:[[1,"millisecond"],[20,"millisecond"],[50,"millisecond"],[100,"millisecond"],[200,"millisecond"],[500,"millisecond"],[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[.25,"month"],[.5,"month"],[1,"month"],[2,"month"],[3,"month"],[6,"month"],[1,"year"]],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},function(){function e(e){return e&&e.jquery?e[0]:e}var t=Flotr._;Flotr.DOM={addClass:function(n,r){n=e(n);var i=n.className?n.className:"";if(t.include(i.split(/\s+/g),r))return;n.className=(i?i+" ":"")+r},create:function(e){return document.createElement(e)},node:function(e){var t=Flotr.DOM.create("div"),n;return t.innerHTML=e,n=t.children[0],t.innerHTML="",n},empty:function(t){t=e(t),t.innerHTML=""},remove:function(t){t=e(t),t.parentNode.removeChild(t)},hide:function(t){t=e(t),Flotr.DOM.setStyles(t,{display:"none"})},insert:function(n,r){n=e(n),t.isString(r)?n.innerHTML+=r:t.isElement(r)&&n.appendChild(r)},opacity:function(t,n){t=e(t),t.style.opacity=n},position:function(t,n){return t=e(t),t.offsetParent?(n=this.position(t.offsetParent),n.left+=t.offsetLeft,n.top+=t.offsetTop,n):{left:t.offsetLeft||0,top:t.offsetTop||0}},removeClass:function(n,r){var i=n.className?n.className:"";n=e(n),n.className=t.filter(i.split(/\s+/g),function(e){if(e!=r)return!0}).join(" ")},setStyles:function(n,r){n=e(n),t.each(r,function(e,t){n.style[t]=e})},show:function(t){t=e(t),Flotr.DOM.setStyles(t,{display:""})},size:function(t){return t=e(t),{height:t.offsetHeight,width:t.offsetWidth}}}}(),function(){var e=Flotr,t=e.bean;e.EventAdapter={observe:function(e,n,r){return t.add(e,n,r),this},fire:function(e,n,r){return t.fire(e,n,r),typeof Prototype!="undefined"&&Event.fire(e,n,r),this},stopObserving:function(e,n,r){return t.remove(e,n,r),this},eventPointer:function(t){if(!e._.isUndefined(t.touches)&&t.touches.length>0)return{x:t.touches[0].pageX,y:t.touches[0].pageY};if(!e._.isUndefined(t.changedTouches)&&t.changedTouches.length>0)return{x:t.changedTouches[0].pageX,y:t.changedTouches[0].pageY};if(t.pageX||t.pageY)return{x:t.pageX,y:t.pageY};if(t.clientX||t.clientY){var n=document,r=n.body,i=n.documentElement;return{x:t.clientX+r.scrollLeft+i.scrollLeft,y:t.clientY+r.scrollTop+i.scrollTop}}}}}(),function(){var e=Flotr,t=e.DOM,n=e._,r=function(e){this.o=e};r.prototype={dimensions:function(e,t,n,r){return e?this.o.html?this.html(e,this.o.element,n,r):this.canvas(e,t):{width:0,height:0}},canvas:function(t,n){if(!this.o.textEnabled)return;n=n||{};var r=this.measureText(t,n),i=r.width,s=n.size||e.defaultOptions.fontSize,o=n.angle||0,u=Math.cos(o),f=Math.sin(o),l=2,c=6,h;return h={width:Math.abs(u*i)+Math.abs(f*s)+l,height:Math.abs(f*i)+Math.abs(u*s)+c},h},html:function(e,n,r,i){var s=t.create("div");return t.setStyles(s,{position:"absolute",top:"-10000px"}),t.insert(s,'<div style="'+r+'" class="'+i+' flotr-dummy-div">'+e+"</div>"),t.insert(this.o.element,s),t.size(s)},measureText:function(t,r){var i=this.o.ctx,s;return!i.fillText||e.isIphone&&i.measure?{width:i.measure(t,r)}:(r=n.extend({size:e.defaultOptions.fontSize,weight:1,angle:0},r),i.save(),i.font=(r.weight>1?"bold ":"")+r.size*1.3+"px sans-serif",s=i.measureText(t),i.restore(),s)}},Flotr.Text=r}(),function(){function e(e,t,r){return n.observe.apply(this,arguments),this._handles.push(arguments),this}var t=Flotr.DOM,n=Flotr.EventAdapter,r=Flotr._,i=Flotr;Graph=function(e,t,s){this._setEl(e),this._initMembers(),this._initPlugins(),n.fire(this.el,"flotr:beforeinit",[this]),this.data=t,this.series=i.Series.getSeries(t),this._initOptions(s),this._initGraphTypes(),this._initCanvas(),this._text=new i.Text({element:this.el,ctx:this.ctx,html:this.options.HtmlText,textEnabled:this.textEnabled}),n.fire(this.el,"flotr:afterconstruct",[this]),this._initEvents(),this.findDataRanges(),this.calculateSpacing(),this.draw(r.bind(function(){n.fire(this.el,"flotr:afterinit",[this])},this))},Graph.prototype={destroy:function(){n.fire(this.el,"flotr:destroy"),r.each(this._handles,function(e){n.stopObserving.apply(this,e)}),this._handles=[],this.el.graph=null},observe:e,_observe:e,processColor:function(e,t){var n={x1:0,y1:0,x2:this.plotWidth,y2:this.plotHeight,opacity:1,ctx:this.ctx};return r.extend(n,t),i.Color.processColor(e,n)},findDataRanges:function(){var e=this.axes,t,n,s;r.each(this.series,function(e){s=e.getRange(),s&&(t=e.xaxis,n=e.yaxis,t.datamin=Math.min(s.xmin,t.datamin),t.datamax=Math.max(s.xmax,t.datamax),n.datamin=Math.min(s.ymin,n.datamin),n.datamax=Math.max(s.ymax,n.datamax),t.used=t.used||s.xused,n.used=n.used||s.yused)},this),!e.x.used&&!e.x2.used&&(e.x.used=!0),!e.y.used&&!e.y2.used&&(e.y.used=!0),r.each(e,function(e){e.calculateRange()});var o=r.keys(i.graphTypes),u=!1;r.each(this.series,function(e){if(e.hide)return;r.each(o,function(t){e[t]&&e[t].show&&(this.extendRange(t,e),u=!0)}
,this),u||this.extendRange(this.options.defaultType,e)},this)},extendRange:function(e,t){this[e].extendRange&&this[e].extendRange(t,t.data,t[e],this[e]),this[e].extendYRange&&this[e].extendYRange(t.yaxis,t.data,t[e],this[e]),this[e].extendXRange&&this[e].extendXRange(t.xaxis,t.data,t[e],this[e])},calculateSpacing:function(){var e=this.axes,t=this.options,n=this.series,i=t.grid.labelMargin,s=this._text,o=e.x,u=e.x2,a=e.y,f=e.y2,l=t.grid.outlineWidth,h,p,d,v;r.each(e,function(e){e.calculateTicks(),e.calculateTextDimensions(s,t)}),v=s.dimensions(t.title,{size:t.fontSize*1.5},"font-size:1em;font-weight:bold;","flotr-title"),this.titleHeight=v.height,v=s.dimensions(t.subtitle,{size:t.fontSize},"font-size:smaller;","flotr-subtitle"),this.subtitleHeight=v.height;for(p=0;p<t.length;++p)n[p].points.show&&(l=Math.max(l,n[p].points.radius+n[p].points.lineWidth/2));var m=this.plotOffset;o.options.margin===!1?(m.bottom=0,m.top=0):o.options.margin===!0?(m.bottom+=(t.grid.circular?0:o.used&&o.options.showLabels?o.maxLabel.height+i:0)+(o.used&&o.options.title?o.titleSize.height+i:0)+l,m.top+=(t.grid.circular?0:u.used&&u.options.showLabels?u.maxLabel.height+i:0)+(u.used&&u.options.title?u.titleSize.height+i:0)+this.subtitleHeight+this.titleHeight+l):(m.bottom=o.options.margin,m.top=o.options.margin),a.options.margin===!1?(m.left=0,m.right=0):a.options.margin===!0?(m.left+=(t.grid.circular?0:a.used&&a.options.showLabels?a.maxLabel.width+i:0)+(a.used&&a.options.title?a.titleSize.width+i:0)+l,m.right+=(t.grid.circular?0:f.used&&f.options.showLabels?f.maxLabel.width+i:0)+(f.used&&f.options.title?f.titleSize.width+i:0)+l):(m.left=a.options.margin,m.right=a.options.margin),m.top=Math.floor(m.top),this.plotWidth=this.canvasWidth-m.left-m.right,this.plotHeight=this.canvasHeight-m.bottom-m.top,o.length=u.length=this.plotWidth,a.length=f.length=this.plotHeight,a.offset=f.offset=this.plotHeight,o.setScale(),u.setScale(),a.setScale(),f.setScale()},draw:function(e){var t=this.ctx,r;n.fire(this.el,"flotr:beforedraw",[this.series,this]);if(this.series.length){t.save(),t.translate(this.plotOffset.left,this.plotOffset.top);for(r=0;r<this.series.length;r++)this.series[r].hide||this.drawSeries(this.series[r]);t.restore(),this.clip()}n.fire(this.el,"flotr:afterdraw",[this.series,this]),e&&e()},drawSeries:function(e){function t(e,t){var n=this.getOptions(e,t);this[t].draw(n)}var n=!1;e=e||this.series,r.each(i.graphTypes,function(r,i){e[i]&&e[i].show&&this[i]&&(n=!0,t.call(this,e,i))},this),n||t.call(this,e,this.options.defaultType)},getOptions:function(e,t){var n=e[t],r=this[t],s=e.xaxis,o=e.yaxis,u={context:this.ctx,width:this.plotWidth,height:this.plotHeight,fontSize:this.options.fontSize,fontColor:this.options.fontColor,textEnabled:this.textEnabled,htmlText:this.options.HtmlText,text:this._text,element:this.el,data:e.data,color:e.color,shadowSize:e.shadowSize,xScale:s.d2p,yScale:o.d2p,xInverse:s.p2d,yInverse:o.p2d};return u=i.merge(n,u),u.fillStyle=this.processColor(n.fillColor||e.color,{opacity:n.fillOpacity}),u},getEventPosition:function(e){var r=document,i=r.body,s=r.documentElement,o=this.axes,u=this.plotOffset,f=this.lastMousePos,l=n.eventPointer(e),c=l.x-f.pageX,h=l.y-f.pageY,p,d,v;return"ontouchstart"in this.el?(p=t.position(this.overlay),d=l.x-p.left-u.left,v=l.y-p.top-u.top):(p=this.overlay.getBoundingClientRect(),d=e.clientX-p.left-u.left-i.scrollLeft-s.scrollLeft,v=e.clientY-p.top-u.top-i.scrollTop-s.scrollTop),{x:o.x.p2d(d),x2:o.x2.p2d(d),y:o.y.p2d(v),y2:o.y2.p2d(v),relX:d,relY:v,dX:c,dY:h,absX:l.x,absY:l.y,pageX:l.x,pageY:l.y}},clickHandler:function(e){if(this.ignoreClick)return this.ignoreClick=!1,this.ignoreClick;n.fire(this.el,"flotr:click",[this.getEventPosition(e),this])},mouseMoveHandler:function(e){if(this.mouseDownMoveHandler)return;var t=this.getEventPosition(e);n.fire(this.el,"flotr:mousemove",[e,t,this]),this.lastMousePos=t},mouseDownHandler:function(e){if(this.mouseUpHandler)return;this.mouseUpHandler=r.bind(function(e){n.stopObserving(document,"mouseup",this.mouseUpHandler),n.stopObserving(document,"mousemove",this.mouseDownMoveHandler),this.mouseDownMoveHandler=null,this.mouseUpHandler=null,n.fire(this.el,"flotr:mouseup",[e,this])},this),this.mouseDownMoveHandler=r.bind(function(t){var r=this.getEventPosition(t);n.fire(this.el,"flotr:mousemove",[e,r,this]),this.lastMousePos=r},this),n.observe(document,"mouseup",this.mouseUpHandler),n.observe(document,"mousemove",this.mouseDownMoveHandler),n.fire(this.el,"flotr:mousedown",[e,this]),this.ignoreClick=!1},drawTooltip:function(e,n,r,i){var s=this.getMouseTrack(),o="opacity:0.7;background-color:#000;color:#fff;display:none;position:absolute;padding:2px 8px;-moz-border-radius:4px;border-radius:4px;white-space:nowrap;",u=i.position,f=i.margin,l=this.plotOffset;n!==null&&r!==null?(i.relative?(u.charAt(0)=="n"?o+="bottom:"+(f-l.top-r+this.canvasHeight)+"px;top:auto;":u.charAt(0)=="s"&&(o+="top:"+(f+l.top+r)+"px;bottom:auto;"),u.charAt(1)=="e"?o+="left:"+(f+l.left+n)+"px;right:auto;":u.charAt(1)=="w"&&(o+="right:"+(f-l.left-n+this.canvasWidth)+"px;left:auto;")):(u.charAt(0)=="n"?o+="top:"+(f+l.top)+"px;bottom:auto;":u.charAt(0)=="s"&&(o+="bottom:"+(f+l.bottom)+"px;top:auto;"),u.charAt(1)=="e"?o+="right:"+(f+l.right)+"px;left:auto;":u.charAt(1)=="w"&&(o+="left:"+(f+l.left)+"px;right:auto;")),s.style.cssText=o,t.empty(s),t.insert(s,e),t.show(s)):t.hide(s)},clip:function(e){var t=this.plotOffset,n=this.canvasWidth,r=this.canvasHeight;e=e||this.ctx;if(i.isIE&&i.isIE<9&&!i.isFlashCanvas){if(e===this.octx)return;e.save(),e.fillStyle=this.processColor(this.options.ieBackgroundColor),e.fillRect(0,0,n,t.top),e.fillRect(0,0,t.left,r),e.fillRect(0,r-t.bottom,n,t.bottom),e.fillRect(n-t.right,0,t.right,r),e.restore()}else e.clearRect(0,0,n,t.top),e.clearRect(0,0,t.left,r),e.clearRect(0,r-t.bottom,n,t.bottom),e.clearRect(n-t.right,0,t.right,r)},_initMembers:function(){this._handles=[],this.lastMousePos={pageX:null,pageY:null},this.plotOffset={left:0,right:0,top:0,bottom:0},this.ignoreClick=!0,this.prevHit=null},_initGraphTypes:function(){r.each(i.graphTypes,function(e,t){this[t]=i.clone(e)},this)},_initEvents:function(){var e=this.el,t,i,s;"ontouchstart"in e?(t=r.bind(function(r){s=!0,n.stopObserving(document,"touchend",t),n.fire(e,"flotr:mouseup",[event,this]),this.multitouches=null,i||this.clickHandler(r)},this),this.observe(this.overlay,"touchstart",r.bind(function(r){i=!1,s=!1,this.ignoreClick=!1,r.touches&&r.touches.length>1&&(this.multitouches=r.touches),n.fire(e,"flotr:mousedown",[event,this]),this.observe(document,"touchend",t)},this)),this.observe(this.overlay,"touchmove",r.bind(function(t){var r=this.getEventPosition(t);this.options.preventDefault&&t.preventDefault(),i=!0,this.multitouches||t.touches&&t.touches.length>1?this.multitouches=t.touches:s||n.fire(e,"flotr:mousemove",[event,r,this]),this.lastMousePos=r},this))):this.observe(this.overlay,"mousedown",r.bind(this.mouseDownHandler,this)).observe(e,"mousemove",r.bind(this.mouseMoveHandler,this)).observe(this.overlay,"click",r.bind(this.clickHandler,this)).observe(e,"mouseout",function(t){n.fire(e,"flotr:mouseout",t)})},_initCanvas:function(){function e(e,n){return e||(e=t.create("canvas"),typeof FlashCanvas!="undefined"&&typeof e.getContext=="function"&&(FlashCanvas.initElement(e),this.isFlashCanvas=!0),e.className="flotr-"+n,e.style.cssText="position:absolute;left:0px;top:0px;",t.insert(i,e)),r.each(h,function(r,i){t.show(e);if(n=="canvas"&&e.getAttribute(i)===r)return;e.setAttribute(i,r*s.resolution),e.style[i]=r+"px"}),e.context_=null,e}function n(e){window.G_vmlCanvasManager&&window.G_vmlCanvasManager.initElement(e);var t=e.getContext("2d");return window.G_vmlCanvasManager||t.scale(s.resolution,s.resolution),t}var i=this.el,s=this.options,o=i.children,u=[],f,l,h,p;for(l=o.length;l--;)f=o[l],!this.canvas&&f.className==="flotr-canvas"?this.canvas=f:!this.overlay&&f.className==="flotr-overlay"?this.overlay=f:u.push(f);for(l=u.length;l--;)i.removeChild(u[l]);t.setStyles(i,{position:"relative"}),h={},h.width=i.clientWidth,h.height=i.clientHeight;if(h.width<=0||h.height<=0||s.resolution<=0)throw"Invalid dimensions for plot, width = "+h.width+", height = "+h.height+", resolution = "+s.resolution;this.canvas=e(this.canvas,"canvas"),this.overlay=e(this.overlay,"overlay"),this.ctx=n(this.canvas),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.octx=n(this.overlay),this.octx.clearRect(0,0,this.overlay.width,this.overlay.height),this.canvasHeight=h.height,this.canvasWidth=h.width,this.textEnabled=!!this.ctx.drawText||!!this.ctx.fillText},_initPlugins:function(){r.each(i.plugins,function(e,t){r.each(e.callbacks,function(e,t){this.observe(this.el,t,r.bind(e,this))},this),this[t]=i.clone(e),r.each(this[t],function(e,n){r.isFunction(e)&&(this[t][n]=r.bind(e,this))},this)},this)},_initOptions:function(e){var t=i.clone(i.defaultOptions);t.x2axis=r.extend(r.clone(t.xaxis),t.x2axis),t.y2axis=r.extend(r.clone(t.yaxis),t.y2axis),this.options=i.merge(e||{},t),this.options.grid.minorVerticalLines===null&&this.options.xaxis.scaling==="logarithmic"&&(this.options.grid.minorVerticalLines=!0),this.options.grid.minorHorizontalLines===null&&this.options.yaxis.scaling==="logarithmic"&&(this.options.grid.minorHorizontalLines=!0),n.fire(this.el,"flotr:afterinitoptions",[this]),this.axes=i.Axis.getAxes(this.options);var s=[],o=[],u=this.series.length,a=this.series.length,f=this.options.colors,l=[],h=0,p,v,m,g;for(v=a-1;v>-1;--v)p=this.series[v].color,p&&(--a,r.isNumber(p)?s.push(p):l.push(i.Color.parse(p)));for(v=s.length-1;v>-1;--v)a=Math.max(a,s[v]+1);for(v=0;o.length<a;){p=f.length==v?new i.Color(100,100,100):i.Color.parse(f[v]);var y=h%2==1?-1:1,w=1+y*Math.ceil(h/2)*.2;p.scale(w,w,w),o.push(p),++v>=f.length&&(v=0,++h)}for(v=0,m=0;v<u;++v){g=this.series[v],g.color?r.isNumber(g.color)&&(g.color=o[g.color].toString()):g.color=o[m++].toString(),g.xaxis||(g.xaxis=this.axes.x),g.xaxis==1?g.xaxis=this.axes.x:g.xaxis==2&&(g.xaxis=this.axes.x2),g.yaxis||(g.yaxis=this.axes.y),g.yaxis==1?g.yaxis=this.axes.y:g.yaxis==2&&(g.yaxis=this.axes.y2);for(var E in i.graphTypes)g[E]=r.extend(r.clone(this.options[E]),g[E]);g.mouse=r.extend(r.clone(this.options.mouse),g.mouse),r.isUndefined(g.shadowSize)&&(g.shadowSize=this.options.shadowSize)}},_setEl:function(e){if(!e)throw"The target container doesn't exist";if(e.graph instanceof Graph)e.graph.destroy();else if(!e.clientWidth)throw"The target container must be visible";e.graph=this,this.el=e}},Flotr.Graph=Graph}(),function(){function e(e){this.orientation=1,this.offset=0,this.datamin=Number.MAX_VALUE,this.datamax=-Number.MAX_VALUE,r.extend(this,e)}function t(e,t){return e=Math.log(Math.max(e,Number.MIN_VALUE)),t!==Math.E&&(e/=Math.log(t)),e}function n(e,t){return t===Math.E?Math.exp(e):Math.pow(t,e)}var r=Flotr._,s="logarithmic";e.prototype={setScale:function(){var e=this.length,r=this.max,i=this.min,o=this.offset,u=this.orientation,a=this.options,f=a.scaling===s,l;f?l=e/(t(r,a.base)-t(i,a.base)):l=e/(r-i),this.scale=l,f?(this.d2p=function(e){return o+u*(t(e,a.base)-t(i,a.base))*l},this.p2d=function(e){return n((o+u*e)/l+t(i,a.base),a.base)}):(this.d2p=function(e){return o+u*(e-i)*l},this.p2d=function(e){return(o+u*e)/l+i})},calculateTicks:function(){var e=this.options;this.ticks=[],this.minorTicks=[],e.ticks?(this._cleanUserTicks(e.ticks,this.ticks),this._cleanUserTicks(e.minorTicks||[],this.minorTicks)):e.mode=="time"?this._calculateTimeTicks():e.scaling==="logarithmic"?this._calculateLogTicks():this._calculateTicks(),r.each(this.ticks,function(e){e.label+=""}),r.each(this.minorTicks,function(e){e.label+=""})},calculateRange:function(){if(!this.used)return;var e=this,t=e.options,n=t.min!==null?t.min:e.datamin,r=t.max!==null?t.max:e.datamax,i=t.autoscaleMargin;t.scaling=="logarithmic"&&(n<=0&&(n=e.datamin),r<=0&&(r=n));if(r==n){var s=r?.01:1;t.min===null&&(n-=s),t.max===null&&(r+=s)}if(t.scaling==="logarithmic"){n<0&&(n=r/t.base);var o=Math.log(r);t.base!=Math.E&&(o/=Math.log(t.base)),o=Math.ceil(o);var u=Math.log(n);t.base!=Math.E&&(u/=Math.log(t.base)),u=Math.ceil(u),e.tickSize=Flotr.getTickSize(t.noTicks,u,o,t.tickDecimals===null?0:t.tickDecimals),t.minorTickFreq===null&&(o-u>10?t.minorTickFreq=0:o-u>5?t.minorTickFreq=2:t.minorTickFreq=5)}else e.tickSize=Flotr.getTickSize(t.noTicks,n,r,t.tickDecimals);e.min=n,e.max=r,t.min===null&&t.autoscale&&(e.min-=e.tickSize*i,e.min<0&&e.datamin>=0&&(e.min=0),e.min=e.tickSize*Math.floor(e.min/e.tickSize)),t.max===null&&t.autoscale&&(e.max+=e.tickSize*i,e.max>0&&e.datamax<=0&&e.datamax!=e.datamin&&(e.max=0),e.max=e.tickSize*Math.ceil(e.max/e.tickSize)),e.min==e.max&&(e.max=e.min+1)},calculateTextDimensions:function(e,t){var n="",r,i;if(this.options.showLabels)for(i=0;i<this.ticks.length;++i)r=this.ticks[i].label.length,r>n.length&&(n=this.ticks[i].label);this.maxLabel=e.dimensions(n,{size:t.fontSize,angle:Flotr.toRad(this.options.labelsAngle)},"font-size:smaller;","flotr-grid-label"),this.titleSize=e.dimensions(this.options.title,{size:t.fontSize*1.2,angle:Flotr.toRad(this.options.titleAngle)},"font-weight:bold;","flotr-axis-title")},_cleanUserTicks:function(e,t){var n=this,i=this.options,s,o,u,f;r.isFunction(e)&&(e=e({min:n.min,max:n.max}));for(o=0;o<e.length;++o)f=e[o],typeof f=="object"?(s=f[0],u=f.length>1?f[1]:i.tickFormatter(s,{min:n.min,max:n.max})):(s=f,u=i.tickFormatter(s,{min:this.min,max:this.max})),t[o]={v:s,label:u}},_calculateTimeTicks:function(){this.ticks=Flotr.Date.generator(this)},_calculateLogTicks:function(){var e=this,t=e.options,n,r,s=Math.log(e.max);t.base!=Math.E&&(s/=Math.log(t.base)),s=Math.ceil(s);var o=Math.log(e.min);t.base!=Math.E&&(o/=Math.log(t.base)),o=Math.ceil(o);for(i=o;i<s;i+=e.tickSize){r=t.base==Math.E?Math.exp(i):Math.pow(t.base,i);var u=r*(t.base==Math.E?Math.exp(e.tickSize):Math.pow(t.base,e.tickSize)),a=(u-r)/t.minorTickFreq;e.ticks.push({v:r,label:t.tickFormatter(r,{min:e.min,max:e.max})});for(n=r+a;n<u;n+=a)e.minorTicks.push({v:n,label:t.tickFormatter(n,{min:e.min,max:e.max})})}r=t.base==Math.E?Math.exp(i):Math.pow(t.base,i),e.ticks.push({v:r,label:t.tickFormatter(r,{min:e.min,max:e.max})})},_calculateTicks:function(){var e=this,t=e.options,n=e.tickSize,r=e.min,i=e.max,s=n*Math.ceil(r/n),o,u,a,f,l,c;t.minorTickFreq&&(u=n/t.minorTickFreq);for(l=0;(a=f=s+l*n)<=i;++l){o=t.tickDecimals,o===null&&(o=1-Math.floor(Math.log(n)/Math.LN10)),o<0&&(o=0),a=a.toFixed(o),e.ticks.push({v:a,label:t.tickFormatter(a,{min:e.min,max:e.max})});if(t.minorTickFreq)for(c=0;c<t.minorTickFreq&&l*n+c*u<i;++c)a=f+c*u,e.minorTicks.push({v:a,label:t.tickFormatter(a,{min:e.min,max:e.max})})}}},r.extend(e,{getAxes:function(t){return{x:new e({options:t.xaxis,n:1,length:this.plotWidth}),x2:new e({options:t.x2axis,n:2,length:this.plotWidth}),y:new e({options:t.yaxis,n:1,length:this.plotHeight,offset:this.plotHeight,orientation:-1}),y2:new e({options:t.y2axis,n:2,length:this.plotHeight,offset:this.plotHeight,orientation:-1})}}}),Flotr.Axis=e}(),function(){function e(e){t.extend(this,e)}var t=Flotr._;e.prototype={getRange:function(){var e=this.data,t=e.length,n=Number.MAX_VALUE,r=Number.MAX_VALUE,i=-Number.MAX_VALUE,s=-Number.MAX_VALUE,o=!1,u=!1,a,f,l;if(t<0||this.hide)return!1;for(l=0;l<t;l++)a=e[l][0],f=e[l][1],a!==null&&(a<n&&(n=a,o=!0),a>i&&(i=a,o=!0)),f!==null&&(f<r&&(r=f,u=!0),f>s&&(s=f,u=!0));return{xmin:n,xmax:i,ymin:r,ymax:s,xused:o,yused:u}}},t.extend(e,{getSeries:function(n){return t.map(n,function(n){var r;return n.data?(r=new e,t.extend(r,n)):r=new e({data:n}),r})}}),Flotr.Series=e}(),Flotr.addType("lines",{options:{show:!1,lineWidth:2,fill:!1,fillBorder:!1,fillColor:null,fillOpacity:.4,steps:!1,stacked:!1},stack:{values:[]},draw:function(e){var t=e.context,n=e.lineWidth,r=e.shadowSize,i;t.save(),t.lineJoin="round",r&&(t.lineWidth=r/2,i=n/2+t.lineWidth/2,t.strokeStyle="rgba(0,0,0,0.1)",this.plot(e,i+r/2,!1),t.strokeStyle="rgba(0,0,0,0.2)",this.plot(e,i,!1)),t.lineWidth=n,t.strokeStyle=e.color,this.plot(e,0,!0),t.restore()},plot:function(e,t,n){function r(){!t&&e.fill&&v&&(m=u(v[0]),i.fillStyle=e.fillStyle,i.lineTo(g,d),i.lineTo(m,d),i.lineTo(m,a(v[1])),i.fill(),e.fillBorder&&i.stroke())}var i=e.context,s=e.width,o=e.height,u=e.xScale,a=e.yScale,f=e.data,l=e.stacked?this.stack:!1,c=f.length-1,h=null,p=null,d=a(0),v=null,m,g,y,b,w,E,S;if(c<1)return;i.beginPath();for(S=0;S<c;++S){if(f[S][1]===null||f[S+1][1]===null){e.fill&&S>0&&f[S][1]!==null&&(i.stroke(),r(),v=null,i.closePath(),i.beginPath());continue}m=u(f[S][0]),g=u(f[S+1][0]),v===null&&(v=f[S]),l?(w=l.values[f[S][0]]||0,E=l.values[f[S+1][0]]||l.values[f[S][0]]||0,y=a(f[S][1]+w),b=a(f[S+1][1]+E),n&&(l.values[f[S][0]]=f[S][1]+w,S==c-1&&(l.values[f[S+1][0]]=f[S+1][1]+E))):(y=a(f[S][1]),b=a(f[S+1][1]));if(y>o&&b>o||y<0&&b<0||m<0&&g<0||m>s&&g>s)continue;(h!=m||p!=y+t)&&i.moveTo(m,y+t),h=g,p=b+t,e.steps?(i.lineTo(h+t/2,y+t),i.lineTo(h+t/2,p)):i.lineTo(h,p)}(!e.fill||e.fill&&!e.fillBorder)&&i.stroke(),r(),i.closePath()},extendYRange:function(e,t,n,r){var i=e.options;if(n.stacked&&(!i.max&&i.max!==0||!i.min&&i.min!==0)){var s=e.max,o=e.min,u=r.positiveSums||{},a=r.negativeSums||{},f,l;for(l=0;l<t.length;l++)f=t[l][0]+"",t[l][1]>0?(u[f]=(u[f]||0)+t[l][1],s=Math.max(s,u[f])):(a[f]=(a[f]||0)+t[l][1],o=Math.min(o,a[f]));r.negativeSums=a,r.positiveSums=u,e.max=s,e.min=o}n.steps&&(this.hit=function(e){var t=e.data,n=e.args,r=e.yScale,i=n[0],s=t.length,o=n[1],u=e.xInverse(i.relX),a=i.relY,f;for(f=0;f<s-1;f++)if(u>=t[f][0]&&u<=t[f+1][0]){Math.abs(r(t[f][1])-a)<8&&(o.x=t[f][0],o.y=t[f][1],o.index=f,o.seriesIndex=e.index);break}},this.drawHit=function(e){var t=e.context,n=e.args,r=e.data,i=e.xScale,s=n.index,o=i(n.x),u=e.yScale(n.y),a;r.length-1>s&&(a=e.xScale(r[s+1][0]),t.save(),t.strokeStyle=e.color,t.lineWidth=e.lineWidth,t.beginPath(),t.moveTo(o,u),t.lineTo(a,u),t.stroke(),t.closePath(),t.restore())},this.clearHit=function(e){var t=e.context,n=e.args,r=e.data,i=e.xScale,s=e.lineWidth,o=n.index,u=i(n.x),a=e.yScale(n.y),f;r.length-1>o&&(f=e.xScale(r[o+1][0]),t.clearRect(u-s,a-s,f-u+2*s,2*s))})}}),Flotr.addType("bars",{options:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,fillOpacity:.4,horizontal:!1,stacked:!1,centered:!0,topPadding:.1,grouped:!1},stack:{positive:[],negative:[],_positive:[],_negative:[]},draw:function(e){var t=e.context;this.current+=1,t.save(),t.lineJoin="miter",t.lineWidth=e.lineWidth,t.strokeStyle=e.color,e.fill&&(t.fillStyle=e.fillStyle),this.plot(e),t.restore()},plot:function(e){var t=e.data,n=e.context,r=e.shadowSize,i,s,o,u,a,f;if(t.length<1)return;this.translate(n,e.horizontal);for(i=0;i<t.length;i++){s=this.getBarGeometry(t[i][0],t[i][1],e);if(s===null)continue;o=s.left,u=s.top,a=s.width,f=s.height,e.fill&&n.fillRect(o,u,a,f),r&&(n.save(),n.fillStyle="rgba(0,0,0,0.05)",n.fillRect(o+r,u+r,a,f),n.restore()),e.lineWidth&&n.strokeRect(o,u,a,f)}},translate:function(e,t){t&&(e.rotate(-Math.PI/2),e.scale(-1,1))},getBarGeometry:function(e,t,n){var r=n.horizontal,i=n.barWidth,s=n.centered,o=n.stacked?this.stack:!1,u=n.lineWidth,a=s?i/2:0,f=r?n.yScale:n.xScale,l=r?n.xScale:n.yScale,c=r?t:e,h=r?e:t,p=0,d,v,m,g,y;return n.grouped&&(this.current/this.groups,c-=a,i/=this.groups,a=i/2,c=c+i*this.current-a),o&&(d=h>0?o.positive:o.negative,p=d[c]||p,d[c]=p+h),v=f(c-a),m=f(c+i-a),g=l(h+p),y=l(p),y<0&&(y=0),e===null||t===null?null:{x:c,y:h,xScale:f,yScale:l,top:g,left:Math.min(v,m)-u/2,width:Math.abs(m-v)-u,height:y-g}},hit:function(e){var t=e.data,n=e.args,r=n[0],i=n[1],s=e.xInverse(r.relX),o=e.yInverse(r.relY),u=this.getBarGeometry(s,o,e),a=u.width/2,f=u.left,l=u.y,c,h;for(h=t.length;h--;)c=this.getBarGeometry(t[h][0],t[h][1],e),(l>0&&l<c.y||l<0&&l>c.y)&&Math.abs(f-c.left)<a&&(i.x=t[h][0],i.y=t[h][1],i.index=h,i.seriesIndex=e.index)},drawHit:function(e){var t=e.context,n=e.args,r=this.getBarGeometry(n.x,n.y,e),i=r.left,s=r.top,o=r.width,u=r.height;t.save(),t.strokeStyle=e.color,t.lineWidth=e.lineWidth,this.translate(t,e.horizontal),t.beginPath(),t.moveTo(i,s+u),t.lineTo(i,s),t.lineTo(i+o,s),t.lineTo(i+o,s+u),e.fill&&(t.fillStyle=e.fillStyle,t.fill()),t.stroke(),t.closePath(),t.restore()},clearHit:function(e){var t=e.context,n=e.args,r=this.getBarGeometry(n.x,n.y,e),i=r.left,s=r.width,o=r.top,u=r.height,a=2*e.lineWidth;t.save(),this.translate(t,e.horizontal),t.clearRect(i-a,Math.min(o,o+u)-a,s+2*a,Math.abs(u)+2*a),t.restore()},extendXRange:function(e,t,n,r){this._extendRange(e,t,n,r),this.groups=this.groups+1||1,this.current=0},extendYRange:function(e,t,n,r){this._extendRange(e,t,n,r)},_extendRange:function(e,t,n,r){var i=e.options.max;if(_.isNumber(i)||_.isString(i))return;var s=e.min,o=e.max,u=n.horizontal,a=e.orientation,f=this.positiveSums||{},l=this.negativeSums||{},c,h,p,d;(a==1&&!u||a==-1&&u)&&n.centered&&(o=Math.max(e.datamax+n.barWidth,o),s=Math.min(e.datamin-n.barWidth,s));if(n.stacked&&(a==1&&u||a==-1&&!u))for(d=t.length;d--;)c=t[d][a==1?1:0]+"",h=t[d][a==1?0:1],h>0?(f[c]=(f[c]||0)+h,o=Math.max(o,f[c])):(l[c]=(l[c]||0)+h,s=Math.min(s,l[c]));(a==1&&u||a==-1&&!u)&&n.topPadding&&(e.max===e.datamax||n.stacked&&this.stackMax!==o)&&(o+=n.topPadding*(o-s)),this.stackMin=s,this.stackMax=o,this.negativeSums=l,this.positiveSums=f,e.max=o,e.min=s}}),Flotr.addType("bubbles",{options:{show:!1,lineWidth:2,fill:!0,fillOpacity:.4,baseRadius:2},draw:function(e){var t=e.context,n=e.shadowSize;t.save(),t.lineWidth=e.lineWidth,t.fillStyle="rgba(0,0,0,0.05)",t.strokeStyle="rgba(0,0,0,0.05)",this.plot(e,n/2),t.strokeStyle="rgba(0,0,0,0.1)",this.plot(e,n/4),t.strokeStyle=e.color,t.fillStyle=e.fillStyle,this.plot(e),t.restore()},plot:function(e,t){var n=e.data,r=e.context,i,s,o,u,a;t=t||0;for(s=0;s<n.length;++s)i=this.getGeometry(n[s],e),r.beginPath(),r.arc(i.x+t,i.y+t,i.z,0,2*Math.PI,!0),r.stroke(),e.fill&&r.fill(),r.closePath()},getGeometry:function(e,t){return{x:t.xScale(e[0]),y:t.yScale(e[1]),z:e[2]*t.baseRadius}},hit:function(e){var t=e.data,n=e.args,r=n[0],s=n[1],o=r.relX,u=r.relY,a,f,l,c;s.best=s.best||Number.MAX_VALUE;for(i=t.length;i--;)f=this.getGeometry(t[i],e),l=f.x-o,c=f.y-u,a=Math.sqrt(l*l+c*c),a<f.z&&f.z<s.best&&(s.x=t[i][0],s.y=t[i][1],s.index=i,s.seriesIndex=e.index,s.best=f.z)},drawHit:function(e){var t=e.context,n=this.getGeometry(e.data[e.args.index],e);t.save(),t.lineWidth=e.lineWidth,t.fillStyle=e.fillStyle,t.strokeStyle=e.color,t.beginPath(),t.arc(n.x,n.y,n.z,0,2*Math.PI,!0),t.fill(),t.stroke(),t.closePath(),t.restore()},clearHit:function(e){var t=e.context,n=this.getGeometry(e.data[e.args.index],e),r=n.z+e.lineWidth;t.save(),t.clearRect(n.x-r,n.y-r,2*r,2*r),t.restore()}}),Flotr.addType("candles",{options:{show:!1,lineWidth:1,wickLineWidth:1,candleWidth:.6,fill:!0,upFillColor:"#00A8F0",downFillColor:"#CB4B4B",fillOpacity:.5,barcharts:!1},draw:function(e){var t=e.context;t.save(),t.lineJoin="miter",t.lineCap="butt",t.lineWidth=e.wickLineWidth||e.lineWidth,this.plot(e),t.restore()},plot:function(e){var t=e.data,n=e.context,r=e.xScale,i=e.yScale,s=e.candleWidth/2,o=e.shadowSize,u=e.lineWidth,a=e.wickLineWidth,f=a%2/2,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T;if(t.length<1)return;for(T=0;T<t.length;T++){c=t[T],h=c[0],d=c[1],v=c[2],m=c[3],g=c[4],y=r(h-s),b=r(h+s),w=i(m),E=i(v),S=i(Math.min(d,g)),x=i(Math.max(d,g)),l=e[d>g?"downFillColor":"upFillColor"],e.fill&&!e.barcharts&&(n.fillStyle="rgba(0,0,0,0.05)",n.fillRect(y+o,x+o,b-y,S-x),n.save(),n.globalAlpha=e.fillOpacity,n.fillStyle=l,n.fillRect(y,x+u,b-y,S-x),n.restore());if(u||a)h=Math.floor((y+b)/2)+f,n.strokeStyle=l,n.beginPath(),e.barcharts?(n.moveTo(h,Math.floor(E+s)),n.lineTo(h,Math.floor(w+s)),p=Math.floor(d+s)+.5,n.moveTo(Math.floor(y)+f,p),n.lineTo(h,p),p=Math.floor(g+s)+.5,n.moveTo(Math.floor(b)+f,p),n.lineTo(h,p)):(n.strokeRect(y,x+u,b-y,S-x),n.moveTo(h,Math.floor(x+u)),n.lineTo(h,Math.floor(E+u)),n.moveTo(h,Math.floor(S+u)),n.lineTo(h,Math.floor(w+u))),n.closePath(),n.stroke()}},hit:function(e){var t=e.xScale,n=e.yScale,r=e.data,i=e.args,s=i[0],o=e.candleWidth/2,u=i[1],a=s.relX,f=s.relY,l=r.length,c,h,p,d,v,m,g,y;for(c=0;c<l;c++){h=r[c],p=h[2],d=h[3],v=t(h[0]-o),m=t(h[0]+o),y=n(d),g=n(p);if(a>v&&a<m&&f>g&&f<y){u.x=h[0],u.index=c,u.seriesIndex=e.index;return}}},drawHit:function(e){var t=e.context;t.save(),this.plot(_.defaults({fill:!!e.fillColor,upFillColor:e.color,downFillColor:e.color,data:[e.data[e.args.index]]},e)),t.restore()},clearHit:function(e){var t=e.args,n=e.context,r=e.xScale,i=e.yScale,s=e.lineWidth,o=e.candleWidth/2,u=e.data[t.index],a=r(u[0]-o)-s,f=r(u[0]+o)+s,l=i(u[2]),c=i(u[3])+s;n.clearRect(a,l,f-a,c-l)},extendXRange:function(e,t,n){e.options.max===null&&(e.max=Math.max(e.datamax+.5,e.max),e.min=Math.min(e.datamin-.5,e.min))}}),Flotr.addType("gantt",{options:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,fillOpacity:.4,centered:!0},draw:function(e){var t=this.ctx,n=e.gantt.barWidth,r=Math.min(e.gantt.lineWidth,n);t.save(),t.translate(this.plotOffset.left,this.plotOffset.top),t.lineJoin="miter",t.lineWidth=r,t.strokeStyle=e.color,t.save(),this.gantt.plotShadows(e,n,0,e.gantt.fill),t.restore();if(e.gantt.fill){var i=e.gantt.fillColor||e.color;t.fillStyle=this.processColor(i,{opacity:e.gantt.fillOpacity})}this.gantt.plot(e,n,0,e.gantt.fill),t.restore()},plot:function(e,t,n,r){var i=e.data;if(i.length<1)return;var s=e.xaxis,o=e.yaxis,u=this.ctx,a;for(a=0;a<i.length;a++){var f=i[a][0],l=i[a][1],c=i[a][2],h=!0,p=!0,d=!0;if(l===null||c===null)continue;var v=l,m=l+c,g=f-(e.gantt.centered?t/2:0),y=f+t-(e.gantt.centered?t/2:0);if(m<s.min||v>s.max||y<o.min||g>o.max)continue;v<s.min&&(v=s.min,h=!1),m>s.max&&(m=s.max,s.lastSerie!=e&&(p=!1)),g<o.min&&(g=o.min),y>o.max&&(y=o.max,o.lastSerie!=e&&(p=!1)),r&&(u.beginPath(),u.moveTo(s.d2p(v),o.d2p(g)+n),u.lineTo(s.d2p(v),o.d2p(y)+n),u.lineTo(s.d2p(m),o.d2p(y)+n),u.lineTo(s.d2p(m),o.d2p(g)+n),u.fill(),u.closePath()),e.gantt.lineWidth&&(h||d||p)&&(u.beginPath(),u.moveTo(s.d2p(v),o.d2p(g)+n),u[h?"lineTo":"moveTo"](s.d2p(v),o.d2p(y)+n),u[p?"lineTo":"moveTo"](s.d2p(m),o.d2p(y)+n),u[d?"lineTo":"moveTo"](s.d2p(m),o.d2p(g)+n),u.stroke(),u.closePath())}},plotShadows:function(e,t,n){var r=e.data;if(r.length<1)return;var i,s,o,u,a=e.xaxis,f=e.yaxis,l=this.ctx,c=this.options.shadowSize;for(i=0;i<r.length;i++){s=r[i][0],o=r[i][1],u=r[i][2];if(o===null||u===null)continue;var h=o,p=o+u,d=s-(e.gantt.centered?t/2:0),v=s+t-(e.gantt.centered?t/2:0);if(p<a.min||h>a.max||v<f.min||d>f.max)continue;h<a.min&&(h=a.min),p>a.max&&(p=a.max),d<f.min&&(d=f.min),v>f.max&&(v=f.max);var m=a.d2p(p)-a.d2p(h)-(a.d2p(p)+c<=this.plotWidth?0:c),g=f.d2p(d)-f.d2p(v)-(f.d2p(d)+c<=this.plotHeight?0:c);l.fillStyle="rgba(0,0,0,0.05)",l.fillRect(Math.min(a.d2p(h)+c,this.plotWidth),Math.min(f.d2p(v)+c,this.plotHeight),m,g)}},extendXRange:function(e){if(e.options.max===null){var t=e.min,n=e.max,r,i,s,o,u,a={},f={},l=null;for(r=0;r<this.series.length;++r){o=this.series[r],u=o.gantt;if(u.show&&o.xaxis==e){for(i=0;i<o.data.length;i++)u.show&&(y=o.data[i][0]+"",a[y]=Math.max(a[y]||0,o.data[i][1]+o.data[i][2]),l=o);for(i in a)n=Math.max(a[i],n)}}e.lastSerie=l,e.max=n,e.min=t}},extendYRange:function(e){if(e.options.max===null){var t=Number.MIN_VALUE,n=Number.MAX_VALUE,r,i,s,o,u={},a={},f=null;for(r=0;r<this.series.length;++r){s=this.series[r],o=s.gantt;if(o.show&&!s.hide&&s.yaxis==e){var l=Number.MIN_VALUE,c=Number.MAX_VALUE;for(i=0;i<s.data.length;i++)l=Math.max(l,s.data[i][0]),c=Math.min(c,s.data[i][0]);o.centered?(t=Math.max(l+.5,t),n=Math.min(c-.5,n)):(t=Math.max(l+1,t),n=Math.min(c,n)),o.barWidth+l>t&&(t=e.max+o.barWidth)}}e.lastSerie=f,e.max=t,e.min=n,e.tickSize=Flotr.getTickSize(e.options.noTicks,n,t,e.options.tickDecimals)}}}),function(){function e(e){return typeof e=="object"&&e.constructor&&(Image?!0:e.constructor===Image)}Flotr.defaultMarkerFormatter=function(e){return Math.round(e.y*100)/100+""},Flotr.addType("markers",{options:{show:!1,lineWidth:1,color:"#000000",fill:!1,fillColor:"#FFFFFF",fillOpacity:.4,stroke:!1,position:"ct",verticalMargin:0,labelFormatter:Flotr.defaultMarkerFormatter,fontSize:Flotr.defaultOptions.fontSize,stacked:!1,stackingType:"b",horizontal:!1},stack:{positive:[],negative:[],values:[]},draw:function(e){function t(e,t){return u=i.negative[e]||0,o=i.positive[e]||0,t>0?(i.positive[e]=u+t,u+t):(i.negative[e]=o+t,o+t)}var n=e.data,r=e.context,i=e.stacked?e.stack:!1,s=e.stackingType,o,u,a,f,l,c,h;r.save(),r.lineJoin="round",r.lineWidth=e.lineWidth,r.strokeStyle="rgba(0,0,0,0.5)",r.fillStyle=e.fillStyle;for(f=0;f<n.length;++f)l=n[f][0],c=n[f][1],i&&(s=="b"?e.horizontal?c=t(c,l):l=t(l,c):s=="a"&&(a=i.values[l]||0,i.values[l]=a+c,c=a+c)),h=e.labelFormatter({x:l,y:c,index:f,data:n}),this.plot(e.xScale(l),e.yScale(c),h,e);r.restore()},plot:function(t,n,r,i){var s=i.context;if(e(r)&&!r.complete)throw"Marker image not loaded.";this._plot(t,n,r,i)},_plot:function(t,n,r,i){var s=i.context,o=2,u=t,f=n,l;e(r)?l={height:r.height,width:r.width}:l=i.text.canvas(r),l.width=Math.floor(l.width+o*2),l.height=Math.floor(l.height+o*2),i.position.indexOf("c")!=-1?u-=l.width/2+o:i.position.indexOf("l")!=-1&&(u-=l.width),i.position.indexOf("m")!=-1?f-=l.height/2+o:i.position.indexOf("t")!=-1?f-=l.height+i.verticalMargin:f+=i.verticalMargin,u=Math.floor(u)+.5,f=Math.floor(f)+.5,i.fill&&s.fillRect(u,f,l.width,l.height),i.stroke&&s.strokeRect(u,f,l.width,l.height),e(r)?s.drawImage(r,parseInt(u+o,10),parseInt(f+o,10)):Flotr.drawText(s,r,u+o,f+o,{textBaseline:"top",textAlign:"left",size:i.fontSize,color:i.color})}})}(),function(){var e=Flotr._;Flotr.defaultPieLabelFormatter=function(e,t){return(100*t/e).toFixed(2)+"%"},Flotr.addType("pie",{options:{show:!1,lineWidth:1,fill:!0,fillColor:null,fillOpacity:.6,explode:6,sizeRatio:.6,startAngle:Math.PI/4,labelFormatter:Flotr.defaultPieLabelFormatter,pie3D:!1,pie3DviewAngle:Math.PI/2*.8,pie3DspliceThickness:20,epsilon:.1},draw:function(e){var t=e.data,n=e.context,r=e.lineWidth,i=e.shadowSize,s=e.sizeRatio,o=e.height,u=e.width,a=e.explode,f=e.color,l=e.fill,c=e.fillStyle,h=Math.min(u,o)*s/2,p=t[0][1],d=[],v=1,m=Math.PI*2*p/this.total,g=this.startAngle||2*Math.PI*e.startAngle,y=g+m,b=g+m/2,w=e.labelFormatter(this.total,p),E=a+h+4,S=Math.cos(b)*E,x=Math.sin(b)*E,T=S<0?"right":"left",N=x>0?"top":"bottom",C,k,L;n.save(),n.translate(u/2,o/2),n.scale(1,v),k=Math.cos(b)*a,L=Math.sin(b)*a,i>0&&(this.plotSlice(k+i,L+i,h,g,y,n),l&&(n.fillStyle="rgba(0,0,0,0.1)",n.fill())),this.plotSlice(k,L,h,g,y,n),l&&(n.fillStyle=c,n.fill()),n.lineWidth=r,n.strokeStyle=f,n.stroke(),C={size:e.fontSize*1.2,color:e.fontColor,weight:1.5},w&&(e.htmlText||!e.textEnabled?(divStyle="position:absolute;"+N+":"+(o/2+(N==="top"?x:-x))+"px;",divStyle+=T+":"+(u/2+(T==="right"?-S:S))+"px;",d.push('<div style="',divStyle,'" class="flotr-grid-label">',w,"</div>")):(C.textAlign=T,C.textBaseline=N,Flotr.drawText(n,w,S,x,C)));if(e.htmlText||!e.textEnabled){var A=Flotr.DOM.node('<div style="color:'+e.fontColor+'" class="flotr-labels"></div>');Flotr.DOM.insert(A,d.join("")),Flotr.DOM.insert(e.element,A)}n.restore(),this.startAngle=y,this.slices=this.slices||[],this.slices.push({radius:h,x:k,y:L,explode:a,start:g,end:y})},plotSlice:function(e,t,n,r,i,s){s.beginPath(),s.moveTo(e,t),s.arc(e,t,n,r,i,!1),s.lineTo(e,t),s.closePath()},hit:function(e){var t=e.data[0],n=e.args,r=e.index,i=n[0],s=n[1],o=this.slices[r],u=i.relX-e.width/2,a=i.relY-e.height/2,f=Math.sqrt(u*u+a*a),l=Math.atan(a/u),c=Math.PI*2,h=o.explode||e.explode,p=o.start%c,d=o.end%c,v=e.epsilon;u<0?l+=Math.PI:u>0&&a<0&&(l+=c),f<o.radius+h&&f>h&&(l>p&&l<d||p>d&&(l<d||l>p)||p===d&&(o.start===o.end&&Math.abs(l-p)<v||o.start!==o.end&&Math.abs(l-p)>v))&&(s.x=t[0],s.y=t[1],s.sAngle=p,s.eAngle=d,s.index=0,s.seriesIndex=r,s.fraction=t[1]/this.total)},drawHit:function(e){var t=e.context,n=this.slices[e.args.seriesIndex];t.save(),t.translate(e.width/2,e.height/2),this.plotSlice(n.x,n.y,n.radius,n.start,n.end,t),t.stroke(),t.restore()},clearHit:function(e){var t=e.context,n=this.slices[e.args.seriesIndex],r=2*e.lineWidth,i=n.radius+r;t.save(),t.translate(e.width/2,e.height/2),t.clearRect(n.x-i,n.y-i,2*i+r,2*i+r),t.restore()},extendYRange:function(e,t){this.total=(this.total||0)+t[0][1]}})}(),Flotr.addType("points",{options:{show:!1,radius:3,lineWidth:2,fill:!0,fillColor:"#FFFFFF",fillOpacity:1,hitRadius:null},draw:function(e){var t=e.context,n=e.lineWidth,r=e.shadowSize;t.save(),r>0&&(t.lineWidth=r/2,t.strokeStyle="rgba(0,0,0,0.1)",this.plot(e,r/2+t.lineWidth/2),t.strokeStyle="rgba(0,0,0,0.2)",this.plot(e,t.lineWidth/2)),t.lineWidth=e.lineWidth,t.strokeStyle=e.color,e.fill&&(t.fillStyle=e.fillStyle),this.plot(e),t.restore()},plot:function(e,t){var n=e.data,r=e.context,i=e.xScale,s=e.yScale,o,u,a;for(o=n.length-1;o>-1;--o){a=n[o][1];if(a===null)continue;u=i(n[o][0]),a=s(a);if(u<0||u>e.width||a<0||a>e.height)continue;r.beginPath(),t?r.arc(u,a+t,e.radius,0,Math.PI,!1):(r.arc(u,a,e.radius,0,2*Math.PI,!0),e.fill&&r.fill
()),r.stroke(),r.closePath()}}}),Flotr.addType("radar",{options:{show:!1,lineWidth:2,fill:!0,fillOpacity:.4,radiusRatio:.9,sensibility:2},draw:function(e){var t=e.context,n=e.shadowSize;t.save(),t.translate(e.width/2,e.height/2),t.lineWidth=e.lineWidth,t.fillStyle="rgba(0,0,0,0.05)",t.strokeStyle="rgba(0,0,0,0.05)",this.plot(e,n/2),t.strokeStyle="rgba(0,0,0,0.1)",this.plot(e,n/4),t.strokeStyle=e.color,t.fillStyle=e.fillStyle,this.plot(e),t.restore()},plot:function(e,t){var n=e.data,r=e.context,i=Math.min(e.height,e.width)*e.radiusRatio/2,s=2*Math.PI/n.length,o=-Math.PI/2,u,a;t=t||0,r.beginPath();for(u=0;u<n.length;++u)a=n[u][1]/this.max,r[u===0?"moveTo":"lineTo"](Math.cos(u*s+o)*i*a+t,Math.sin(u*s+o)*i*a+t);r.closePath(),e.fill&&r.fill(),r.stroke()},getGeometry:function(e,t){var n=Math.min(t.height,t.width)*t.radiusRatio/2,r=2*Math.PI/t.data.length,i=-Math.PI/2,s=e[1]/this.max;return{x:Math.cos(e[0]*r+i)*n*s+t.width/2,y:Math.sin(e[0]*r+i)*n*s+t.height/2}},hit:function(e){var t=e.args,n=t[0],r=t[1],i=n.relX,s=n.relY,o,u,a,f;for(var l=0;l<r.series.length;l++){var c=r.series[l],h=c.data;for(var p=h.length;p--;){u=this.getGeometry(h[p],e),a=u.x-i,f=u.y-s,o=Math.sqrt(a*a+f*f);if(o<e.sensibility*2)return r.x=h[p][0],r.y=h[p][1],r.index=p,r.seriesIndex=l,r}}},drawHit:function(e){var t=2*Math.PI/e.data.length,n=-Math.PI/2,r=Math.min(e.height,e.width)*e.radiusRatio/2,i=e.args.series,s=i.points.hitRadius||i.points.radius||i.mouse.radius,o=e.context;o.translate(e.width/2,e.height/2);var u=e.args.index,a=e.data[u][1]/this.max,f=Math.cos(u*t+n)*r*a,l=Math.sin(u*t+n)*r*a;o.beginPath(),o.arc(f,l,s,0,2*Math.PI,!0),o.closePath(),o.stroke()},clearHit:function(e){var t=2*Math.PI/e.data.length,n=-Math.PI/2,r=Math.min(e.height,e.width)*e.radiusRatio/2,i=e.context,s=e.args.series,o=s.points?s.points.lineWidth:1;offset=(s.points.hitRadius||s.points.radius||s.mouse.radius)+o,i.translate(e.width/2,e.height/2);var u=e.args.index,a=e.data[u][1]/this.max,f=Math.cos(u*t+n)*r*a,l=Math.sin(u*t+n)*r*a;i.clearRect(f-offset,l-offset,offset*2,offset*2)},extendYRange:function(e,t){this.max=Math.max(e.max,this.max||-Number.MAX_VALUE)}}),Flotr.addType("timeline",{options:{show:!1,lineWidth:1,barWidth:.2,fill:!0,fillColor:null,fillOpacity:.4,centered:!0},draw:function(e){var t=e.context;t.save(),t.lineJoin="miter",t.lineWidth=e.lineWidth,t.strokeStyle=e.color,t.fillStyle=e.fillStyle,this.plot(e),t.restore()},plot:function(e){var t=e.data,n=e.context,r=e.xScale,i=e.yScale,s=e.barWidth,o=e.lineWidth,u;Flotr._.each(t,function(e){var t=e[0],u=e[1],a=e[2],l=s,h=Math.ceil(r(t)),p=Math.ceil(r(t+a))-h,v=Math.round(i(u)),m=Math.round(i(u-l))-v,y=h-o/2,b=Math.round(v-m/2)-o/2;n.strokeRect(y,b,p,m),n.fillRect(y,b,p,m)})},extendRange:function(e){var t=e.data,n=e.xaxis,r=e.yaxis,i=e.timeline.barWidth;n.options.min===null&&(n.min=n.datamin-i/2);if(n.options.max===null){var s=n.max;Flotr._.each(t,function(e){s=Math.max(s,e[0]+e[2])},this),n.max=s+i/2}r.options.min===null&&(r.min=r.datamin-i),r.options.min===null&&(r.max=r.datamax+i)}}),function(){var e=Flotr.DOM;Flotr.addPlugin("crosshair",{options:{mode:null,color:"#FF0000",hideCursor:!0},callbacks:{"flotr:mousemove":function(e,t){this.options.crosshair.mode&&(this.crosshair.clearCrosshair(),this.crosshair.drawCrosshair(t))}},drawCrosshair:function(t){var n=this.octx,r=this.options.crosshair,i=this.plotOffset,s=i.left+Math.round(t.relX)+.5,o=i.top+Math.round(t.relY)+.5;if(t.relX<0||t.relY<0||t.relX>this.plotWidth||t.relY>this.plotHeight){this.el.style.cursor=null,e.removeClass(this.el,"flotr-crosshair");return}r.hideCursor&&(this.el.style.cursor="none",e.addClass(this.el,"flotr-crosshair")),n.save(),n.strokeStyle=r.color,n.lineWidth=1,n.beginPath(),r.mode.indexOf("x")!=-1&&(n.moveTo(s,i.top),n.lineTo(s,i.top+this.plotHeight)),r.mode.indexOf("y")!=-1&&(n.moveTo(i.left,o),n.lineTo(i.left+this.plotWidth,o)),n.stroke(),n.restore()},clearCrosshair:function(){var e=this.plotOffset,t=this.lastMousePos,n=this.octx;t&&(n.clearRect(Math.round(t.relX)+e.left,e.top,1,this.plotHeight+1),n.clearRect(e.left,Math.round(t.relY)+e.top,this.plotWidth+1,1))}})}(),function(){function e(e,t,n,r,i,s){var o="image/"+e,u=n.getImageData(0,0,r,i),a=new Image;return n.save(),n.globalCompositeOperation="destination-over",n.fillStyle=s,n.fillRect(0,0,r,i),a.src=t.toDataURL(o),n.restore(),n.clearRect(0,0,r,i),n.putImageData(u,0,0),a}var t=Flotr.DOM,n=Flotr._;Flotr.addPlugin("download",{saveImage:function(r,i,s,o){var u=this.options.grid,f;if(Flotr.isIE&&Flotr.isIE<9)return f="<html><body>"+this.canvas.firstChild.innerHTML+"</body></html>",window.open().document.write(f);if(r!=="jpeg"&&r!=="png")return;f=e(r,this.canvas,this.ctx,this.canvasWidth,this.canvasHeight,u&&u.backgroundColor||"#ffffff");if(!n.isElement(f)||!o)return window.open(f.src);this.download.restoreCanvas(),t.hide(this.canvas),t.hide(this.overlay),t.setStyles({position:"absolute"}),t.insert(this.el,f),this.saveImageElement=f},restoreCanvas:function(){t.show(this.canvas),t.show(this.overlay),this.saveImageElement&&this.el.removeChild(this.saveImageElement),this.saveImageElement=null}})}(),function(){var e=Flotr.EventAdapter,t=Flotr._;Flotr.addPlugin("graphGrid",{callbacks:{"flotr:beforedraw":function(){this.graphGrid.drawGrid()},"flotr:afterdraw":function(){this.graphGrid.drawOutline()}},drawGrid:function(){function n(e){for(y=0;y<e.length;++y){var t=e[y].v/m.max;for(w=0;w<=S;++w)o[w===0?"moveTo":"lineTo"](Math.cos(w*x+T)*E*t,Math.sin(w*x+T)*E*t)}}function r(e,n){t.each(t.pluck(e,"v"),function(e){if(e<=m.min||e>=m.max||(e==m.min||e==m.max)&&f.outlineWidth)return;n(Math.floor(m.d2p(e))+o.lineWidth/2)})}function i(e){o.moveTo(e,0),o.lineTo(e,d)}function s(e){o.moveTo(0,e),o.lineTo(v,e)}var o=this.ctx,u=this.options,f=u.grid,l=f.verticalLines,c=f.horizontalLines,h=f.minorVerticalLines,p=f.minorHorizontalLines,d=this.plotHeight,v=this.plotWidth,m,g,y,w;(l||h||c||p)&&e.fire(this.el,"flotr:beforegrid",[this.axes.x,this.axes.y,u,this]),o.save(),o.lineWidth=1,o.strokeStyle=f.tickColor;if(f.circular){o.translate(this.plotOffset.left+v/2,this.plotOffset.top+d/2);var E=Math.min(d,v)*u.radar.radiusRatio/2,S=this.axes.x.ticks.length,x=2*(Math.PI/S),T=-Math.PI/2;o.beginPath(),m=this.axes.y,c&&n(m.ticks),p&&n(m.minorTicks),l&&t.times(S,function(e){o.moveTo(0,0),o.lineTo(Math.cos(e*x+T)*E,Math.sin(e*x+T)*E)}),o.stroke()}else o.translate(this.plotOffset.left,this.plotOffset.top),f.backgroundColor&&(o.fillStyle=this.processColor(f.backgroundColor,{x1:0,y1:0,x2:v,y2:d}),o.fillRect(0,0,v,d)),o.beginPath(),m=this.axes.x,l&&r(m.ticks,i),h&&r(m.minorTicks,i),m=this.axes.y,c&&r(m.ticks,s),p&&r(m.minorTicks,s),o.stroke();o.restore(),(l||h||c||p)&&e.fire(this.el,"flotr:aftergrid",[this.axes.x,this.axes.y,u,this])},drawOutline:function(){var e=this,t=e.options,n=t.grid,r=n.outline,s=e.ctx,o=n.backgroundImage,u=e.plotOffset,a=u.left,f=u.top,l=e.plotWidth,c=e.plotHeight,h,p,d,v,m,g;if(!n.outlineWidth)return;s.save();if(n.circular){s.translate(a+l/2,f+c/2);var y=Math.min(c,l)*t.radar.radiusRatio/2,b=this.axes.x.ticks.length,w=2*(Math.PI/b),E=-Math.PI/2;s.beginPath(),s.lineWidth=n.outlineWidth,s.strokeStyle=n.color,s.lineJoin="round";for(i=0;i<=b;++i)s[i===0?"moveTo":"lineTo"](Math.cos(i*w+E)*y,Math.sin(i*w+E)*y);s.stroke()}else{s.translate(a,f);var S=n.outlineWidth,x=.5-S+(S+1)%2/2,T="lineTo",N="moveTo";s.lineWidth=S,s.strokeStyle=n.color,s.lineJoin="miter",s.beginPath(),s.moveTo(x,x),l-=S/2%1,c+=S/2,s[r.indexOf("n")!==-1?T:N](l,x),s[r.indexOf("e")!==-1?T:N](l,c),s[r.indexOf("s")!==-1?T:N](x,c),s[r.indexOf("w")!==-1?T:N](x,x),s.stroke(),s.closePath()}s.restore(),o&&(d=o.src||o,v=(parseInt(o.left,10)||0)+u.left,m=(parseInt(o.top,10)||0)+u.top,p=new Image,p.onload=function(){s.save(),o.alpha&&(s.globalAlpha=o.alpha),s.globalCompositeOperation="destination-over",s.drawImage(p,0,0,p.width,p.height,v,m,l,c),s.restore()},p.src=d)}})}(),function(){var e=Flotr.DOM,t=Flotr._,n=Flotr,r="opacity:0.7;background-color:#000;color:#fff;position:absolute;padding:2px 8px;-moz-border-radius:4px;border-radius:4px;white-space:nowrap;";Flotr.addPlugin("hit",{callbacks:{"flotr:mousemove":function(e,t){this.hit.track(t)},"flotr:click":function(e){var n=this.hit.track(e);n&&!t.isUndefined(n.index)&&(e.hit=n)},"flotr:mouseout":function(e){e.relatedTarget!==this.mouseTrack&&this.hit.clearHit()},"flotr:destroy":function(){this.options.mouse.container&&e.remove(this.mouseTrack),this.mouseTrack=null}},track:function(e){if(this.options.mouse.track||t.any(this.series,function(e){return e.mouse&&e.mouse.track}))return this.hit.hit(e)},executeOnType:function(e,r,i){function s(e,s){t.each(t.keys(n.graphTypes),function(t){e[t]&&e[t].show&&!e.hide&&this[t][r]&&(u=this.getOptions(e,t),u.fill=!!e.mouse.fillColor,u.fillStyle=this.processColor(e.mouse.fillColor||"#ffffff",{opacity:e.mouse.fillOpacity}),u.color=e.mouse.lineColor,u.context=this.octx,u.index=s,i&&(u.args=i),this[t][r].call(this[t],u),o=!0)},this)}var o=!1,u;return t.isArray(e)||(e=[e]),t.each(e,s,this),o},drawHit:function(e){var t=this.octx,n=e.series;if(n.mouse.lineColor){t.save(),t.lineWidth=n.points?n.points.lineWidth:1,t.strokeStyle=n.mouse.lineColor,t.fillStyle=this.processColor(n.mouse.fillColor||"#ffffff",{opacity:n.mouse.fillOpacity}),t.translate(this.plotOffset.left,this.plotOffset.top);if(!this.hit.executeOnType(n,"drawHit",e)){var r=e.xaxis,i=e.yaxis;t.beginPath(),t.arc(r.d2p(e.x),i.d2p(e.y),n.points.hitRadius||n.points.radius||n.mouse.radius,0,2*Math.PI,!0),t.fill(),t.stroke(),t.closePath()}t.restore(),this.clip(t)}this.prevHit=e},clearHit:function(){var t=this.prevHit,n=this.octx,r=this.plotOffset;n.save(),n.translate(r.left,r.top);if(t){if(!this.hit.executeOnType(t.series,"clearHit",this.prevHit)){var i=t.series,s=i.points?i.points.lineWidth:1;offset=(i.points.hitRadius||i.points.radius||i.mouse.radius)+s,n.clearRect(t.xaxis.d2p(t.x)-offset,t.yaxis.d2p(t.y)-offset,offset*2,offset*2)}e.hide(this.mouseTrack),this.prevHit=null}n.restore()},hit:function(e){var n=this.options,r=this.prevHit,i,s,o,u,a,f,l,c,h;if(this.series.length===0)return;h={relX:e.relX,relY:e.relY,absX:e.absX,absY:e.absY,series:this.series};if(n.mouse.trackY&&!n.mouse.trackAll&&this.hit.executeOnType(this.series,"hit",[e,h])&&!t.isUndefined(h.seriesIndex))a=this.series[h.seriesIndex],h.series=a,h.mouse=a.mouse,h.xaxis=a.xaxis,h.yaxis=a.yaxis;else{i=this.hit.closest(e);if(i){i=n.mouse.trackY?i.point:i.x,u=i.seriesIndex,a=this.series[u],l=a.xaxis,c=a.yaxis,s=2*a.mouse.sensibility;if(n.mouse.trackAll||i.distanceX<s/l.scale&&(!n.mouse.trackY||i.distanceY<s/c.scale))h.series=a,h.xaxis=a.xaxis,h.yaxis=a.yaxis,h.mouse=a.mouse,h.x=i.x,h.y=i.y,h.dist=i.distance,h.index=i.dataIndex,h.seriesIndex=u}}if(!r||r.index!==h.index||r.seriesIndex!==h.seriesIndex)this.hit.clearHit(),h.series&&h.mouse&&h.mouse.track&&(this.hit.drawMouseTrack(h),this.hit.drawHit(h),Flotr.EventAdapter.fire(this.el,"flotr:hit",[h,this]));return h},closest:function(e){function t(e){e.distance=p,e.distanceX=d,e.distanceY=v,e.seriesIndex=w,e.dataIndex=E,e.x=y,e.y=b,l=!0}var n=this.series,r=this.options,i=e.relX,s=e.relY,o=Number.MAX_VALUE,u=Number.MAX_VALUE,a={},f={},l=!1,c,h,p,d,v,m,g,y,b,w,E;for(w=0;w<n.length;w++){c=n[w],h=c.data,m=c.xaxis.p2d(i),g=c.yaxis.p2d(s);if(c.hide)continue;for(E=h.length;E--;){y=h[E][0],b=h[E][1];if(y===null||b===null)continue;if(y<c.xaxis.min||y>c.xaxis.max)continue;d=Math.abs(y-m),v=Math.abs(b-g),p=d*d+v*v,p<o&&(o=p,t(a)),d<u&&(u=d,t(f))}}return l?{point:a,x:f}:!1},drawMouseTrack:function(n){var i="",s=n.series,o=n.mouse.position,u=n.mouse.margin,f=n.x,l=n.y,c=r,h=this.mouseTrack,p=this.plotOffset,v=p.left,m=p.right,g=p.bottom,y=p.top,w=n.mouse.trackDecimals,E=this.options,S=E.mouse.container,x=0,T=0,N,C,k;h||(h=e.node('<div class="flotr-mouse-value" style="'+c+'"></div>'),this.mouseTrack=h,e.insert(S||this.el,h));if(!w||w<0)w=0;f&&f.toFixed&&(f=f.toFixed(w)),l&&l.toFixed&&(l=l.toFixed(w)),k=n.mouse.trackFormatter({x:f,y:l,series:n.series,index:n.index,nearest:n,fraction:n.fraction});if(t.isNull(k)||t.isUndefined(k)){e.hide(h);return}h.innerHTML=k,e.show(h);if(!o)return;C=e.size(h),S&&(N=e.position(this.el),x=N.top,T=N.left);if(!n.mouse.relative)i+="top:",o.charAt(0)=="n"?i+=x+u+y:o.charAt(0)=="s"&&(i+=x-u+y+this.plotHeight-C.height),i+="px;bottom:auto;left:",o.charAt(1)=="e"?i+=T-u+v+this.plotWidth-C.width:o.charAt(1)=="w"&&(i+=T+u+v),i+="px;right:auto;";else if(s.pie&&s.pie.show){var L={x:this.plotWidth/2,y:this.plotHeight/2},A=Math.min(this.canvasWidth,this.canvasHeight)*s.pie.sizeRatio/2,O=n.sAngle<n.eAngle?(n.sAngle+n.eAngle)/2:(n.sAngle+n.eAngle+2*Math.PI)/2;i+="bottom:"+(u-y-L.y-Math.sin(O)*A/2+this.canvasHeight)+"px;top:auto;",i+="left:"+(u+v+L.x+Math.cos(O)*A/2)+"px;right:auto;"}else i+="top:",/n/.test(o)?i+=x-u+y+n.yaxis.d2p(n.y)-C.height:i+=x+u+y+n.yaxis.d2p(n.y),i+="px;bottom:auto;left:",/w/.test(o)?i+=T-u+v+n.xaxis.d2p(n.x)-C.width:i+=T+u+v+n.xaxis.d2p(n.x),i+="px;right:auto;";h.style.cssText=c+i,n.mouse.relative&&(/[ew]/.test(o)?/[ns]/.test(o)||(h.style.top=x+y+n.yaxis.d2p(n.y)-e.size(h).height/2+"px"):h.style.left=T+v+n.xaxis.d2p(n.x)-e.size(h).width/2+"px")}})}(),function(){function e(e,t){return e.which?e.which===1:e.button===0||e.button===1}function t(e,t){return Math.min(Math.max(0,e),t.plotWidth-1)}function n(e,t){return Math.min(Math.max(0,e),t.plotHeight)}var r=Flotr.DOM,i=Flotr.EventAdapter,s=Flotr._;Flotr.addPlugin("selection",{options:{pinchOnly:null,mode:null,color:"#B6D9FF",fps:20},callbacks:{"flotr:mouseup":function(e){var t=this.options.selection,n=this.selection,r=this.getEventPosition(e);if(!t||!t.mode)return;n.interval&&clearInterval(n.interval),this.multitouches?n.updateSelection():t.pinchOnly||n.setSelectionPos(n.selection.second,r),n.clearSelection(),n.selecting&&n.selectionIsSane()&&(n.drawSelection(),n.fireSelectEvent(),this.ignoreClick=!0)},"flotr:mousedown":function(t){var n=this.options.selection,r=this.selection,i=this.getEventPosition(t);if(!n||!n.mode)return;if(!n.mode||!e(t)&&s.isUndefined(t.touches))return;n.pinchOnly||r.setSelectionPos(r.selection.first,i),r.interval&&clearInterval(r.interval),this.lastMousePos.pageX=null,r.selecting=!1,r.interval=setInterval(s.bind(r.updateSelection,this),1e3/n.fps)},"flotr:destroy":function(e){clearInterval(this.selection.interval)}},getArea:function(){var e=this.selection.selection,t=this.axes,n=e.first,r=e.second,i,s,o,u;return i=t.x.p2d(e.first.x),s=t.x.p2d(e.second.x),o=t.y.p2d(e.first.y),u=t.y.p2d(e.second.y),{x1:Math.min(i,s),y1:Math.min(o,u),x2:Math.max(i,s),y2:Math.max(o,u),xfirst:i,xsecond:s,yfirst:o,ysecond:u}},selection:{first:{x:-1,y:-1},second:{x:-1,y:-1}},prevSelection:null,interval:null,fireSelectEvent:function(e){var t=this.selection.getArea();e=e||"select",t.selection=this.selection.selection,i.fire(this.el,"flotr:"+e,[t,this])},setSelection:function(e,r){var i=this.options,s=this.axes.x,o=this.axes.y,u=o.scale,a=s.scale,f=i.selection.mode.indexOf("x")!=-1,l=i.selection.mode.indexOf("y")!=-1,h=this.selection.selection;this.selection.clearSelection(),h.first.y=n(f&&!l?0:(o.max-e.y1)*u,this),h.second.y=n(f&&!l?this.plotHeight-1:(o.max-e.y2)*u,this),h.first.x=t(l&&!f?0:(e.x1-s.min)*a,this),h.second.x=t(l&&!f?this.plotWidth:(e.x2-s.min)*a,this),this.selection.drawSelection(),r||this.selection.fireSelectEvent()},setSelectionPos:function(e,r){var i=this.options.selection.mode,s=this.selection.selection;i.indexOf("x")==-1?e.x=e==s.first?0:this.plotWidth:e.x=t(r.relX,this),i.indexOf("y")==-1?e.y=e==s.first?0:this.plotHeight-1:e.y=n(r.relY,this)},drawSelection:function(){this.selection.fireSelectEvent("selecting");var e=this.selection.selection,t=this.octx,n=this.options,r=this.plotOffset,i=this.selection.prevSelection;if(i&&e.first.x==i.first.x&&e.first.y==i.first.y&&e.second.x==i.second.x&&e.second.y==i.second.y)return;t.save(),t.strokeStyle=this.processColor(n.selection.color,{opacity:.8}),t.lineWidth=1,t.lineJoin="miter",t.fillStyle=this.processColor(n.selection.color,{opacity:.4}),this.selection.prevSelection={first:{x:e.first.x,y:e.first.y},second:{x:e.second.x,y:e.second.y}};var s=Math.min(e.first.x,e.second.x),o=Math.min(e.first.y,e.second.y),u=Math.abs(e.second.x-e.first.x),a=Math.abs(e.second.y-e.first.y);t.fillRect(s+r.left+.5,o+r.top+.5,u,a),t.strokeRect(s+r.left+.5,o+r.top+.5,u,a),t.restore()},updateSelection:function(){if(!this.lastMousePos.pageX)return;this.selection.selecting=!0;if(this.multitouches)this.selection.setSelectionPos(this.selection.selection.first,this.getEventPosition(this.multitouches[0])),this.selection.setSelectionPos(this.selection.selection.second,this.getEventPosition(this.multitouches[1]));else{if(this.options.selection.pinchOnly)return;this.selection.setSelectionPos(this.selection.selection.second,this.lastMousePos)}this.selection.clearSelection(),this.selection.selectionIsSane()&&this.selection.drawSelection()},clearSelection:function(){if(!this.selection.prevSelection)return;var e=this.selection.prevSelection,t=1,n=this.plotOffset,r=Math.min(e.first.x,e.second.x),i=Math.min(e.first.y,e.second.y),s=Math.abs(e.second.x-e.first.x),o=Math.abs(e.second.y-e.first.y);this.octx.clearRect(r+n.left-t+.5,i+n.top-t,s+2*t+.5,o+2*t+.5),this.selection.prevSelection=null},selectionIsSane:function(){var e=this.selection.selection;return Math.abs(e.second.x-e.first.x)>=5||Math.abs(e.second.y-e.first.y)>=5}})}(),function(){var e=Flotr.DOM;Flotr.addPlugin("labels",{callbacks:{"flotr:afterdraw":function(){this.labels.draw()}},draw:function(){function t(e,t,n){var r=n?t.minorTicks:t.ticks,i=t.orientation===1,o=t.n===1,u,a;u={color:t.options.color||b.grid.color,angle:Flotr.toRad(t.options.labelsAngle),textBaseline:"middle"};for(v=0;v<r.length&&(n?t.options.showMinorLabels:t.options.showLabels);++v){s=r[v],s.label+="";if(!s.label||!s.label.length)continue;x=Math.cos(v*h+p)*l,y=Math.sin(v*h+p)*l,u.textAlign=i?Math.abs(x)<.1?"center":x<0?"right":"left":"left",Flotr.drawText(w,s.label,i?x:3,i?y:-(t.ticks[v].v/t.max)*(l-b.fontSize),u)}}function n(e,t,n,r){function i(e){return e.options.showLabels&&e.used}function o(e,t,n,r){return e.plotOffset.left+(t?r:n?-b.grid.labelMargin:b.grid.labelMargin+e.plotWidth)}function u(e,t,n,r){return e.plotOffset.top+(t?b.grid.labelMargin:r)+(t&&n?e.plotHeight:0)}var a=t.orientation===1,f=t.n===1,l,c;l={color:t.options.color||b.grid.color,textAlign:n,textBaseline:r,angle:Flotr.toRad(t.options.labelsAngle)},l=Flotr.getBestTextAlign(l.angle,l);for(v=0;v<t.ticks.length&&i(t);++v){s=t.ticks[v];if(!s.label||!s.label.length)continue;c=t.d2p(s.v);if(c<0||c>(a?e.plotWidth:e.plotHeight))continue;Flotr.drawText(w,s.label,o(e,a,f,c),u(e,a,f,c),l),!a&&!f&&(w.save(),w.strokeStyle=l.color,w.beginPath(),w.moveTo(e.plotOffset.left+e.plotWidth-8,e.plotOffset.top+t.d2p(s.v)),w.lineTo(e.plotOffset.left+e.plotWidth,e.plotOffset.top+t.d2p(s.v)),w.stroke(),w.restore())}}function r(e,t){var n=t.orientation===1,r=t.n===1,i="",o,u,a,l=e.plotOffset;!n&&!r&&(w.save(),w.strokeStyle=t.options.color||b.grid.color,w.beginPath());if(t.options.showLabels&&(r?!0:t.used))for(v=0;v<t.ticks.length;++v){s=t.ticks[v];if(!s.label||!s.label.length||(n?l.left:l.top)+t.d2p(s.v)<0||(n?l.left:l.top)+t.d2p(s.v)>(n?e.canvasWidth:e.canvasHeight))continue;a=l.top+(n?(r?1:-1)*(e.plotHeight+b.grid.labelMargin):t.d2p(s.v)-t.maxLabel.height/2),o=n?l.left+t.d2p(s.v)-f/2:0,i="",v===0?i=" first":v===t.ticks.length-1&&(i=" last"),i+=n?" flotr-grid-label-x":" flotr-grid-label-y",m+=['<div style="position:absolute; text-align:'+(n?"center":"right")+"; ","top:"+a+"px; ",(!n&&!r?"right:":"left:")+o+"px; ","width:"+(n?f:(r?l.left:l.right)-b.grid.labelMargin)+"px; ",t.options.color?"color:"+t.options.color+"; ":" ",'" class="flotr-grid-label'+i+'">'+s.label+"</div>"].join(" "),!n&&!r&&(w.moveTo(l.left+e.plotWidth-8,l.top+t.d2p(s.v)),w.lineTo(l.left+e.plotWidth,l.top+t.d2p(s.v)))}}var i,s,o,u,f,l,c,h,p,d,v,m="",g=0,b=this.options,w=this.ctx,E=this.axes,S={size:b.fontSize};for(v=0;v<E.x.ticks.length;++v)E.x.ticks[v].label&&++g;f=this.plotWidth/g,b.grid.circular&&(w.save(),w.translate(this.plotOffset.left+this.plotWidth/2,this.plotOffset.top+this.plotHeight/2),l=this.plotHeight*b.radar.radiusRatio/2+b.fontSize,c=this.axes.x.ticks.length,h=2*(Math.PI/c),p=-Math.PI/2,t(this,E.x,!1),t(this,E.x,!0),t(this,E.y,!1),t(this,E.y,!0),w.restore()),!b.HtmlText&&this.textEnabled?(n(this,E.x,"center","top"),n(this,E.x2,"center","bottom"),n(this,E.y,"right","middle"),n(this,E.y2,"left","middle")):(E.x.options.showLabels||E.x2.options.showLabels||E.y.options.showLabels||E.y2.options.showLabels)&&!b.grid.circular&&(m="",r(this,E.x),r(this,E.x2),r(this,E.y),r(this,E.y2),w.stroke(),w.restore(),d=e.create("div"),e.setStyles(d,{fontSize:"smaller",color:b.grid.color}),d.className="flotr-labels",e.insert(this.el,d),e.insert(d,m))}})}(),function(){var e=Flotr.DOM,t=Flotr._;Flotr.addPlugin("legend",{options:{show:!0,noColumns:1,labelFormatter:function(e){return e},labelBoxBorderColor:"#CCCCCC",labelBoxWidth:14,labelBoxHeight:10,labelBoxMargin:5,container:null,position:"nw",margin:5,backgroundColor:"#F0F0F0",backgroundOpacity:.85},callbacks:{"flotr:afterinit":function(){this.legend.insertLegend()},"flotr:destroy":function(){var t=this.legend.markup;t&&(this.legend.markup=null,e.remove(t))}},insertLegend:function(){if(!this.options.legend.show)return;var n=this.series,r=this.plotOffset,i=this.options,s=i.legend,o=[],u=!1,f=this.ctx,l=t.filter(n,function(e){return e.label&&!e.hide}).length,c=s.position,h=s.margin,p=s.backgroundOpacity,d,v,m;if(l){var g=s.labelBoxWidth,y=s.labelBoxHeight,w=s.labelBoxMargin,E=r.left+h,S=r.top+h,x=0,T={size:i.fontSize*1.1,color:i.grid.color};for(d=n.length-1;d>-1;--d){if(!n[d].label||n[d].hide)continue;v=s.labelFormatter(n[d].label),x=Math.max(x,this._text.measureText(v,T).width)}var N=Math.round(g+w*3+x),C=Math.round(l*(w+y)+w);!p&&p!==0&&(p=.1);if(!i.HtmlText&&this.textEnabled&&!s.container){c.charAt(0)=="s"&&(S=r.top+this.plotHeight-(h+C)),c.charAt(0)=="c"&&(S=r.top+this.plotHeight/2-(h+C/2)),c.charAt(1)=="e"&&(E=r.left+this.plotWidth-(h+N)),m=this.processColor(s.backgroundColor,{opacity:p}),f.fillStyle=m,f.fillRect(E,S,N,C),f.strokeStyle=s.labelBoxBorderColor,f.strokeRect(Flotr.toPixel(E),Flotr.toPixel(S),N,C);var k=E+w,L=S+w;for(d=0;d<n.length;d++){if(!n[d].label||n[d].hide)continue;v=s.labelFormatter(n[d].label),f.fillStyle=n[d].color,f.fillRect(k,L,g-1,y-1),f.strokeStyle=s.labelBoxBorderColor,f.lineWidth=1,f.strokeRect(Math.ceil(k)-1.5,Math.ceil(L)-1.5,g+2,y+2),Flotr.drawText(f,v,k+g+w,L+y,T),L+=y+w}}else{for(d=0;d<n.length;++d){if(!n[d].label||n[d].hide)continue;d%s.noColumns===0&&(o.push(u?"</tr><tr>":"<tr>"),u=!0);var A=n[d],O=s.labelBoxWidth,M=s.labelBoxHeight;v=s.labelFormatter(A.label),m="background-color:"+(A.bars&&A.bars.show&&A.bars.fillColor&&A.bars.fill?A.bars.fillColor:A.color)+";",o.push('<td class="flotr-legend-color-box">','<div style="border:1px solid ',s.labelBoxBorderColor,';padding:1px">','<div style="width:',O-1,"px;height:",M-1,"px;border:1px solid ",n[d].color,'">','<div style="width:',O,"px;height:",M,"px;",m,'"></div>',"</div>","</div>","</td>",'<td class="flotr-legend-label">',v,"</td>")}u&&o.push("</tr>");if(o.length>0){var _='<table style="font-size:smaller;color:'+i.grid.color+'">'+o.join("")+"</table>";if(s.container)_=e.node(_),this.legend.markup=_,e.insert(s.container,_);else{var D={position:"absolute",zIndex:"2",border:"1px solid "+s.labelBoxBorderColor};c.charAt(0)=="n"?(D.top=h+r.top+"px",D.bottom="auto"):c.charAt(0)=="c"?(D.top=h+(this.plotHeight-C)/2+"px",D.bottom="auto"):c.charAt(0)=="s"&&(D.bottom=h+r.bottom+"px",D.top="auto"),c.charAt(1)=="e"?(D.right=h+r.right+"px",D.left="auto"):c.charAt(1)=="w"&&(D.left=h+r.left+"px",D.right="auto");var P=e.create("div"),H;P.className="flotr-legend",e.setStyles(P,D),e.insert(P,_),e.insert(this.el,P);if(!p)return;var B=s.backgroundColor||i.grid.backgroundColor||"#ffffff";t.extend(D,e.size(P),{backgroundColor:B,zIndex:"",border:""}),D.width+="px",D.height+="px",P=e.create("div"),P.className="flotr-legend-bg",e.setStyles(P,D),e.opacity(P,p),e.insert(P," "),e.insert(this.el,P)}}}}}})}(),function(){function e(e){if(this.options.spreadsheet.tickFormatter)return this.options.spreadsheet.tickFormatter(e);var t=n.find(this.axes.x.ticks,function(t){return t.v==e});return t?t.label:e}var t=Flotr.DOM,n=Flotr._;Flotr.addPlugin("spreadsheet",{options:{show:!1,tabGraphLabel:"Graph",tabDataLabel:"Data",toolbarDownload:"Download CSV",toolbarSelectAll:"Select all",csvFileSeparator:",",decimalSeparator:".",tickFormatter:null,initialTab:"graph"},callbacks:{"flotr:afterconstruct":function(){if(!this.options.spreadsheet.show)return;var e=this.spreadsheet,n=t.node('<div class="flotr-tabs-group" style="position:absolute;left:0px;width:'+this.canvasWidth+'px"></div>'),r=t.node('<div style="float:left" class="flotr-tab selected">'+this.options.spreadsheet.tabGraphLabel+"</div>"),i=t.node('<div style="float:left" class="flotr-tab">'+this.options.spreadsheet.tabDataLabel+"</div>"),s;e.tabsContainer=n,e.tabs={graph:r,data:i},t.insert(n,r),t.insert(n,i),t.insert(this.el,n),s=t.size(i).height+2,this.plotOffset.bottom+=s,t.setStyles(n,{top:this.canvasHeight-s+"px"}),this.observe(r,"click",function(){e.showTab("graph")}).observe(i,"click",function(){e.showTab("data")}),this.options.spreadsheet.initialTab!=="graph"&&e.showTab(this.options.spreadsheet.initialTab)}},loadDataGrid:function(){if(this.seriesData)return this.seriesData;var e=this.series,t={};return n.each(e,function(e,r){n.each(e.data,function(e){var n=e[0],i=e[1],s=t[n];if(s)s[r+1]=i;else{var o=[];o[0]=n,o[r+1]=i,t[n]=o}})}),this.seriesData=n.sortBy(t,function(e,t){return parseInt(t,10)}),this.seriesData},constructDataGrid:function(){if(this.spreadsheet.datagrid)return this.spreadsheet.datagrid;var r=this.series,i=this.spreadsheet.loadDataGrid(),s=["<colgroup><col />"],o,u,f,l=['<table class="flotr-datagrid"><tr class="first-row">'];l.push("<th>&nbsp;</th>"),n.each(r,function(e,t){l.push('<th scope="col">'+(e.label||String.fromCharCode(65+t))+"</th>"),s.push("<col />")}),l.push("</tr>"),n.each(i,function(t){l.push("<tr>"),n.times(r.length+1,function(r){var i="td",s=t[r],o=n.isUndefined(s)?"":Math.round(s*1e5)/1e5;if(r===0){i="th";var u=e.call(this,o);u&&(o=u)}l.push("<"+i+(i=="th"?' scope="row"':"")+">"+o+"</"+i+">")},this),l.push("</tr>")},this),s.push("</colgroup>"),f=t.node(l.join("")),o=t.node('<button type="button" class="flotr-datagrid-toolbar-button">'+this.options.spreadsheet.toolbarDownload+"</button>"),u=t.node('<button type="button" class="flotr-datagrid-toolbar-button">'+this.options.spreadsheet.toolbarSelectAll+"</button>"),this.observe(o,"click",n.bind(this.spreadsheet.downloadCSV,this)).observe(u,"click",n.bind(this.spreadsheet.selectAllData,this));var h=t.node('<div class="flotr-datagrid-toolbar"></div>');t.insert(h,o),t.insert(h,u);var p=this.canvasHeight-t.size(this.spreadsheet.tabsContainer).height-2,d=t.node('<div class="flotr-datagrid-container" style="position:absolute;left:0px;top:0px;width:'+this.canvasWidth+"px;height:"+p+'px;overflow:auto;z-index:10"></div>');return t.insert(d,h),t.insert(d,f),t.insert(this.el,d),this.spreadsheet.datagrid=f,this.spreadsheet.container=d,f},showTab:function(e){if(this.spreadsheet.activeTab===e)return;switch(e){case"graph":t.hide(this.spreadsheet.container),t.removeClass(this.spreadsheet.tabs.data,"selected"),t.addClass(this.spreadsheet.tabs.graph,"selected");break;case"data":this.spreadsheet.datagrid||this.spreadsheet.constructDataGrid(),t.show(this.spreadsheet.container),t.addClass(this.spreadsheet.tabs.data,"selected"),t.removeClass(this.spreadsheet.tabs.graph,"selected");break;default:throw"Illegal tab name: "+e}this.spreadsheet.activeTab=e},selectAllData:function(){if(this.spreadsheet.tabs){var e,t,n,r,i=this.spreadsheet.constructDataGrid();return this.spreadsheet.showTab("data"),setTimeout(function(){(n=i.ownerDocument)&&(r=n.defaultView)&&r.getSelection&&n.createRange&&(e=window.getSelection())&&e.removeAllRanges?(t=n.createRange(),t.selectNode(i),e.removeAllRanges(),e.addRange(t)):document.body&&document.body.createTextRange&&(t=document.body.createTextRange())&&(t.moveToElementText(i),t.select())},0),!0}return!1},downloadCSV:function(){var t="",r=this.series,i=this.options,s=this.spreadsheet.loadDataGrid(),o=encodeURIComponent(i.spreadsheet.csvFileSeparator);if(i.spreadsheet.decimalSeparator===i.spreadsheet.csvFileSeparator)throw"The decimal separator is the same as the column separator ("+i.spreadsheet.decimalSeparator+")";n.each(r,function(e,n){t+=o+'"'+(e.label||String.fromCharCode(65+n)).replace(/\"/g,'\\"')+'"'}),t+="%0D%0A",t+=n.reduce(s,function(t,n){var r=e.call(this,n[0])||"";r='"'+(r+"").replace(/\"/g,'\\"')+'"';var s=n.slice(1).join(o);return i.spreadsheet.decimalSeparator!=="."&&(s=s.replace(/\./g,i.spreadsheet.decimalSeparator)),t+r+o+s+"%0D%0A"},"",this),Flotr.isIE&&Flotr.isIE<9?(t=t.replace(new RegExp(o,"g"),decodeURIComponent(o)).replace(/%0A/g,"\n").replace(/%0D/g,"\r"),window.open().document.write(t)):window.open("data:text/csv,"+t)}})}(),function(){var e=Flotr.DOM;Flotr.addPlugin("titles",{callbacks:{"flotr:afterdraw":function(){this.titles.drawTitles()}},drawTitles:function(){var t,n=this.options,r=n.grid.labelMargin,i=this.ctx,s=this.axes;if(!n.HtmlText&&this.textEnabled){var o={size:n.fontSize,color:n.grid.color,textAlign:"center"};n.subtitle&&Flotr.drawText(i,n.subtitle,this.plotOffset.left+this.plotWidth/2,this.titleHeight+this.subtitleHeight-2,o),o.weight=1.5,o.size*=1.5,n.title&&Flotr.drawText(i,n.title,this.plotOffset.left+this.plotWidth/2,this.titleHeight-2,o),o.weight=1.8,o.size*=.8,s.x.options.title&&s.x.used&&(o.textAlign=s.x.options.titleAlign||"center",o.textBaseline="top",o.angle=Flotr.toRad(s.x.options.titleAngle),o=Flotr.getBestTextAlign(o.angle,o),Flotr.drawText(i,s.x.options.title,this.plotOffset.left+this.plotWidth/2,this.plotOffset.top+s.x.maxLabel.height+this.plotHeight+2*r,o)),s.x2.options.title&&s.x2.used&&(o.textAlign=s.x2.options.titleAlign||"center",o.textBaseline="bottom",o.angle=Flotr.toRad(s.x2.options.titleAngle),o=Flotr.getBestTextAlign(o.angle,o),Flotr.drawText(i,s.x2.options.title,this.plotOffset.left+this.plotWidth/2,this.plotOffset.top-s.x2.maxLabel.height-2*r,o)),s.y.options.title&&s.y.used&&(o.textAlign=s.y.options.titleAlign||"right",o.textBaseline="middle",o.angle=Flotr.toRad(s.y.options.titleAngle),o=Flotr.getBestTextAlign(o.angle,o),Flotr.drawText(i,s.y.options.title,this.plotOffset.left-s.y.maxLabel.width-2*r,this.plotOffset.top+this.plotHeight/2,o)),s.y2.options.title&&s.y2.used&&(o.textAlign=s.y2.options.titleAlign||"left",o.textBaseline="middle",o.angle=Flotr.toRad(s.y2.options.titleAngle),o=Flotr.getBestTextAlign(o.angle,o),Flotr.drawText(i,s.y2.options.title,this.plotOffset.left+this.plotWidth+s.y2.maxLabel.width+2*r,this.plotOffset.top+this.plotHeight/2,o))}else{t=[],n.title&&t.push('<div style="position:absolute;top:0;left:',this.plotOffset.left,"px;font-size:1em;font-weight:bold;text-align:center;width:",this.plotWidth,'px;" class="flotr-title">',n.title,"</div>"),n.subtitle&&t.push('<div style="position:absolute;top:',this.titleHeight,"px;left:",this.plotOffset.left,"px;font-size:smaller;text-align:center;width:",this.plotWidth,'px;" class="flotr-subtitle">',n.subtitle,"</div>"),t.push("</div>"),t.push('<div class="flotr-axis-title" style="font-weight:bold;">'),s.x.options.title&&s.x.used&&t.push('<div style="position:absolute;top:',this.plotOffset.top+this.plotHeight+n.grid.labelMargin+s.x.titleSize.height,"px;left:",this.plotOffset.left,"px;width:",this.plotWidth,"px;text-align:",s.x.options.titleAlign,';" class="flotr-axis-title flotr-axis-title-x1">',s.x.options.title,"</div>"),s.x2.options.title&&s.x2.used&&t.push('<div style="position:absolute;top:0;left:',this.plotOffset.left,"px;width:",this.plotWidth,"px;text-align:",s.x2.options.titleAlign,';" class="flotr-axis-title flotr-axis-title-x2">',s.x2.options.title,"</div>"),s.y.options.title&&s.y.used&&t.push('<div style="position:absolute;top:',this.plotOffset.top+this.plotHeight/2-s.y.titleSize.height/2,"px;left:0;text-align:",s.y.options.titleAlign,';" class="flotr-axis-title flotr-axis-title-y1">',s.y.options.title,"</div>"),s.y2.options.title&&s.y2.used&&t.push('<div style="position:absolute;top:',this.plotOffset.top+this.plotHeight/2-s.y.titleSize.height/2,"px;right:0;text-align:",s.y2.options.titleAlign,';" class="flotr-axis-title flotr-axis-title-y2">',s.y2.options.title,"</div>"),t=t.join("");var u=e.create("div");e.setStyles({color:n.grid.color}),u.className="flotr-titles",e.insert(this.el,u),e.insert(u,t)}}})}();(function(){function t(){var t=this.options,n=this.handles,r=this.el,i,s,o,u;if(!t.selection.mode||!t.handles.show||"ontouchstart"in r)return;n.initialized=!0,u=e.node('<div class="flotr-handles"></div>'),t=t.handles,t.drag&&(o=e.node('<div class="flotr-handles-handle flotr-handles-drag flotr-handles-right"></div>'),s=e.node('<div class="flotr-handles-handle flotr-handles-drag flotr-handles-left"></div>'),e.insert(u,o),e.insert(u,s),e.hide(s),e.hide(o),n.left=s,n.right=o,this.observe(s,"mousedown",function(){n.moveHandler=a}),this.observe(o,"mousedown",function(){n.moveHandler=f})),t.scroll&&(i=e.node('<div class="flotr-handles-handle flotr-handles-scroll"></div>'),e.insert(u,i),e.hide(i),n.scroll=i,this.observe(i,"mousedown",function(){n.moveHandler=l})),this.observe(document,"mouseup",function(){n.moveHandler=null}),e.insert(r,u)}function n(e){if(!this.handles.initialized)return;var t=this.handles,n=this.options.handles,s=t.left,o=t.right,u=t.scroll;n&&(n.drag&&(r(this,s,e.x1),r(this,o,e.x2)),n.scroll&&i(this,u,e.x1,e.x2))}function r(t,n,r){e.show(n);var i=e.size(n),s=Math.round(t.axes.x.d2p(r)-i.width/2),o=(t.plotHeight-i.height)/2;e.setStyles(n,{left:s+"px",top:o+"px"})}function i(t,n,r,i){e.show(n);var s=e.size(n),o=Math.round(t.axes.x.d2p(r)),u=t.plotHeight-s.height/2,a=t.axes.x.d2p(i)-t.axes.x.d2p(r);e.setStyles(n,{left:o+"px",top:u+"px",width:a+"px"})}function s(){if(!this.handles.initialized)return;var t=this.handles;t&&(e.hide(t.left),e.hide(t.right),e.hide(t.scroll))}function o(e,t){if(!this.handles.initialized)return;if(!this.handles.moveHandler)return;var n=t.x-this.lastMousePos.x,r=this.selection.selection,i=this.selection.getArea(),s=this.handles;s.moveHandler(i,n),u(i,s),this.selection.setSelection(i)}function u(e,t){var n=t.moveHandler;e.x1>e.x2&&(n==a?n=f:n==f&&(n=a),t.moveHandler=n)}function a(e,t){e.x1+=t}function f(e,t){e.x2+=t}function l(e,t){e.x1+=t,e.x2+=t}var e=Flotr.DOM;Flotr.addPlugin("handles",{options:{show:!1,drag:!0,scroll:!0},callbacks:{"flotr:afterinit":t,"flotr:select":n,"flotr:mousedown":s,"flotr:mousemove":o}})})();!function(e,t){typeof define=="function"?define(t):typeof module!="undefined"?module.exports=t():this[e]=t()}("bonzo",function(){function e(e){return new RegExp("(^|\\s+)"+e+"(\\s+|$)")}function t(e,t,n){for(var r=0,i=e.length;r<i;r++)t.call(n||e[r],e[r],r,e);return e}function n(e){return e.replace(/-(.)/g,function(e,t){return t.toUpperCase()})}function r(e){return e&&e.nodeName&&e.nodeType==1}function i(e,t,n,r){for(r=0,j=e.length;r<j;++r)if(t.call(n,e[r],r,e))return!0;return!1}function s(e,n,r){var i=0,s=n||this,o=[],u=E&&typeof e=="string"&&e.charAt(0)!="<"?function(t){return(t=E(e))&&(t.selected=1)&&t}():e;return t(c(u),function(e){t(s,function(t){var n=!t[w]||t[w]&&!t[w][w]?function(){var e=t.cloneNode(!0);return s.$&&s.cloneEvents&&s.$(e).cloneEvents(t),e}():t;r(e,n),o[i]=n,i++})},this),t(o,function(e,t){s[t]=e}),s.length=i,s}function o(e,t,n){var r=v(e),i=r.css("position"),s=r.offset(),o="relative",u=i==o,a=[parseInt(r.css("left"),10),parseInt(r.css("top"),10)];i=="static"&&(r.css("position",o),i=o),isNaN(a[0])&&(a[0]=u?0:e.offsetLeft),isNaN(a[1])&&(a[1]=u?0:e.offsetTop),t!=null&&(e.style.left=t-s.left+a[0]+M),n!=null&&(e.style.top=n-s.top+a[1]+M)}function u(t,n){return e(n).test(t.className)}function a(e,t){e.className=F(e.className+" "+t)}function f(t,n){t.className=F(t.className.replace(e(n)," "))}function l(e){this.length=0;if(e){e=typeof e!="string"&&!e.nodeType&&typeof e.length!="undefined"?e:[e],this.length=e.length;for(var t=0;t<e.length;t++)this[t]=e[t]}}function c(e){return typeof e=="string"?v.create(e):r(e)?[e]:e}function h(e,t,n){var r=this[0];return e==null&&t==null?(p(r)?d():{x:r.scrollLeft,y:r.scrollTop})[n]:(p(r)?g.scrollTo(e,t):(e!=null&&(r.scrollLeft=e),t!=null&&(r.scrollTop=t)),this)}function p(e){return e===g||/^(?:body|html)$/i.test(e.tagName)}function d(){return{x:g.pageXOffset||b.scrollLeft,y:g.pageYOffset||b.scrollTop}}function v(e,t){return new l(e,t)}var m=this,g=window,y=g.document,b=y.documentElement,w="parentNode",E=null,S=/^checked|value|selected$/,x=/select|fieldset|table|tbody|tfoot|td|tr|colgroup/i,T="table",N={thead:T,tbody:T,tfoot:T,tr:"tbody",th:"tr",td:"tr",fieldset:"form",option:"select"},C=/^checked|selected$/,k=/msie/i.test(navigator.userAgent),L=[],A=0,O=/^-?[\d\.]+$/,M="px",_="setAttribute",D="getAttribute",P=/(^\s*|\s*$)/g,H={lineHeight:1,zoom:1,zIndex:1,opacity:1},B=function(){var e=["webkitTransform","MozTransform","OTransform","msTransform","Transform"],t;for(t=0;t<e.length;t++)if(e[t]in y.createElement("a").style)return e[t]}(),F=String.prototype.trim?function(e){return e.trim()}:function(e){return e.replace(P,"")},I=y.defaultView&&y.defaultView.getComputedStyle?function(e,t){t=t=="transform"?B:t,t=t=="transform-origin"?B+"Origin":t;var r=null;t=="float"&&(t="cssFloat");var i=y.defaultView.getComputedStyle(e,"");return i&&(r=i[n(t)]),e.style[t]||r}:k&&b.currentStyle?function(e,t){t=n(t),t=t=="float"?"styleFloat":t;if(t=="opacity"){var r=100;try{r=e.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch(i){try{r=e.filters("alpha").opacity}catch(s){}}return r/100}var o=e.currentStyle?e.currentStyle[t]:null;return e.style[t]||o}:function(e,t){return e.style[n(t)]};l.prototype={get:function(e){return this[e]},each:function(e,n){return t(this,e,n)},map:function(e,t){var n=[],r,i;for(i=0;i<this.length;i++)r=e.call(this,this[i],i),t?t(r)&&n.push(r):n.push(r);return n},first:function(){return v(this[0])},last:function(){return v(this[this.length-1])},html:function(e,n){function r(n){while(n.firstChild)n.removeChild(n.firstChild);t(c(e),function(e){n.appendChild(e)})}var i=n?b.textContent===null?"innerText":"textContent":"innerHTML",s;return typeof e!="undefined"?this.each(function(t){(s=t.tagName.match(x))?r(t,s[0]):t[i]=e}):this[0]?this[0][i]:""},text:function(e){return this.html(e,1)},addClass:function(e){return this.each(function(t){u(t,e)||a(t,e)})},removeClass:function(e){return this.each(function(t){u(t,e)&&f(t,e)})},hasClass:function(e){return i(this,function(t){return u(t,e)})},toggleClass:function(e,t){return this.each(function(n){typeof t!="undefined"?t?a(n,e):f(n,e):u(n,e)?f(n,e):a(n,e)})},show:function(e){return this.each(function(t){t.style.display=e||""})},hide:function(e){return this.each(function(e){e.style.display="none"})},append:function(e){return this.each(function(n){t(c(e),function(e){n.appendChild(e)})})},prepend:function(e){return this.each(function(n){var r=n.firstChild;t(c(e),function(e){n.insertBefore(e,r)})})},appendTo:function(e,t){return s.call(this,e,t,function(e,t){e.appendChild(t)})},prependTo:function(e,t){return s.call(this,e,t,function(e,t){e.insertBefore(t,e.firstChild)})},next:function(){return this.related("nextSibling")},previous:function(){return this.related("previousSibling")},related:function(e){return this.map(function(t){t=t[e];while(t&&t.nodeType!==1)t=t[e];return t||0},function(e){return e})},before:function(e){return this.each(function(n){t(v.create(e),function(e){n[w].insertBefore(e,n)})})},after:function(e){return this.each(function(n){t(v.create(e),function(e){n[w].insertBefore(e,n.nextSibling)})})},insertBefore:function(e,t){return s.call(this,e,t,function(e,t){e[w].insertBefore(t,e)})},insertAfter:function(e,t){return s.call(this,e,t,function(e,t){var n=e.nextSibling;n?e[w].insertBefore(t,n):e[w].appendChild(t)})},css:function(e,t,r){function i(e,t,r){for(var i in s)s.hasOwnProperty(i)&&(r=s[i],(t=n(i))&&O.test(r)&&!(t in H)&&(r+=M),t=t=="transform"?B:t,t=t=="transformOrigin"?B+"Origin":t,e.style[t]=r)}if(t===undefined&&typeof e=="string")return t=this[0],t?t==y||t==g?(r=t==y?v.doc():v.viewport(),e=="width"?r.width:e=="height"?r.height:""):I(t,e):null;var s=e;typeof e=="string"&&(s={},s[e]=t),k&&s.opacity&&(s.filter="alpha(opacity="+s.opacity*100+")",s.zoom=e.zoom||1,delete s.opacity);if(t=s["float"])k?s.styleFloat=t:s.cssFloat=t,delete s["float"];return this.each(i)},offset:function(e,t){if(typeof e=="number"||typeof t=="number")return this.each(function(n){o(n,e,t)});var n=this[0],r=n.offsetWidth,i=n.offsetHeight,s=n.offsetTop,u=n.offsetLeft;while(n=n.offsetParent)s+=n.offsetTop,u+=n.offsetLeft;return{top:s,left:u,height:i,width:r}},attr:function(e,t){var n=this[0];if(typeof e=="string"||e instanceof String)return typeof t=="undefined"?S.test(e)?C.test(e)&&typeof n[e]=="string"?!0:n[e]:n[D](e):this.each(function(n){S.test(e)?n[e]=t:n[_](e,t)});for(var r in e)e.hasOwnProperty(r)&&this.attr(r,e[r]);return this},val:function(e){return typeof e=="string"?this.attr("value",e):this[0].value},removeAttr:function(e){return this.each(function(t){C.test(e)?t[e]=!1:t.removeAttribute(e)})},data:function(e,t){var n=this[0];if(typeof t=="undefined"){n[D]("data-node-uid")||n[_]("data-node-uid",++A);var r=n[D]("data-node-uid");return L[r]||(L[r]={}),L[r][e]}return this.each(function(n){n[D]("data-node-uid")||n[_]("data-node-uid",++A);var r=n[D]("data-node-uid"),i=L[r]||(L[r]={});i[e]=t})},remove:function(){return this.each(function(e){e[w]&&e[w].removeChild(e)})},empty:function(){return this.each(function(e){while(e.firstChild)e.removeChild(e.firstChild)})},detach:function(){return this.map(function(e){return e[w].removeChild(e)})},scrollTop:function(e){return h.call(this,null,e,"y")},scrollLeft:function(e){return h.call(this,e,null,"x")},toggle:function(e){return this.each(function(e){e.style.display=e.offsetWidth||e.offsetHeight?"none":"block"}),e&&e(),this}},v.setQueryEngine=function(e){E=e,delete v.setQueryEngine},v.aug=function(e,t){for(var n in e)e.hasOwnProperty(n)&&((t||l.prototype)[n]=e[n])},v.create=function(e){return typeof e=="string"?function(){var t=/^<([^\s>]+)/.exec(e),n=y.createElement(t&&N[t[1].toLowerCase()]||"div"),r=[];n.innerHTML=e;var i=n.childNodes;n=n.firstChild,r.push(n);while(n=n.nextSibling)n.nodeType==1&&r.push(n);return r}():r(e)?[e.cloneNode(!0)]:[]},v.doc=function(){var e=this.viewport();return{width:Math.max(y.body.scrollWidth,b.scrollWidth,e.width),height:Math.max(y.body.scrollHeight,b.scrollHeight,e.height)}},v.firstChild=function(e){for(var t=e.childNodes,n=0,r=t&&t.length||0,i;n<r;n++)t[n].nodeType===1&&(i=t[r=n]);return i},v.viewport=function(){return{width:k?b.clientWidth:self.innerWidth,height:k?b.clientHeight:self.innerHeight}},v.isAncestor="compareDocumentPosition"in b?function(e,t){return(e.compareDocumentPosition(t)&16)==16}:"contains"in b?function(e,t){return e!==t&&e.contains(t)}:function(e,t){while(t=t[w])if(t===e)return!0;return!1};var q=m.bonzo;return v.noConflict=function(){return m.bonzo=q,this},v});(function(){var e=this,t=e._,n={},r=Array.prototype,i=Object.prototype,s=r.slice,o=r.unshift,u=i.toString,a=i.hasOwnProperty,f=r.forEach,l=r.map,c=r.reduce,h=r.reduceRight,p=r.filter,d=r.every,v=r.some,m=r.indexOf,g=r.lastIndexOf;i=Array.isArray;var y=Object.keys,b=Function.prototype.bind,w=function(e){return new N(e)};typeof module!="undefined"&&module.exports?(module.exports=w,w._=w):e._=w,w.VERSION="1.1.7";var E=w.each=w.forEach=function(e,t,r){if(e!=null)if(f&&e.forEach===f)e.forEach(t,r);else if(e.length===+e.length){for(var i=0,s=e.length;i<s;i++)if(i in e&&t.call(r,e[i],i,e)===n)break}else for(i in e)if(a.call(e,i)&&t.call(r,e[i],i,e)===n)break};w.map=function(e,t,n){var r=[];return e==null?r:l&&e.map===l?e.map(t,n):(E(e,function(e,i,s){r[r.length]=t.call(n,e,i,s)}),r)},w.reduce=w.foldl=w.inject=function(e,t,n,r){var i=n!==void 0;e==null&&(e=[]);if(c&&e.reduce===c)return r&&(t=w.bind(t,r)),i?e.reduce(t,n):e.reduce(t);E(e,function(e,s,o){i?n=t.call(r,n,e,s,o):(n=e,i=!0)});if(!i)throw new TypeError("Reduce of empty array with no initial value");return n},w.reduceRight=w.foldr=function(e,t,n,r){return e==null&&(e=[]),h&&e.reduceRight===h?(r&&(t=w.bind(t,r)),n!==void 0?e.reduceRight(t,n):e.reduceRight(t)):(e=(w.isArray(e)?e.slice():w.toArray(e)).reverse(),w.reduce(e,t,n,r))},w.find=w.detect=function(e,t,n){var r;return S(e,function(e,i,s){if(t.call(n,e,i,s))return r=e,!0}),r},w.filter=w.select=function(e,t,n){var r=[];return e==null?r:p&&e.filter===p?e.filter(t,n):(E(e,function(e,i,s){t.call(n,e,i,s)&&(r[r.length]=e)}),r)},w.reject=function(e,t,n){var r=[];return e==null?r:(E(e,function(e,i,s){t.call(n,e,i,s)||(r[r.length]=e)}),r)},w.every=w.all=function(e,t,r){var i=!0;return e==null?i:d&&e.every===d?e.every(t,r):(E(e,function(e,s,o){if(!(i=i&&t.call(r,e,s,o)))return n}),i)};var S=w.some=w.any=function(e,t,r){t=t||w.identity;var i=!1;return e==null?i:v&&e.some===v?e.some(t,r):(E(e,function(e,s,o){if(i|=t.call(r,e,s,o))return n}),!!i)};w.include=w.contains=function(e,t){var n=!1;return e==null?n:m&&e.indexOf===m?e.indexOf(t)!=-1:(S(e,function(e){if(n=e===t)return!0}),n)},w.invoke=function(e,t){var n=s.call(arguments,2);return w.map(e,function(e){return(t.call?t||e:e[t]).apply(e,n)})},w.pluck=function(e,t){return w.map(e,function(e){return e[t]})},w.max=function(e,t,n){if(!t&&w.isArray(e))return Math.max.apply(Math,e);var r={computed:-Infinity};return E(e,function(e,i,s){i=t?t.call(n,e,i,s):e,i>=r.computed&&(r={value:e,computed:i})}),r.value},w.min=function(e,t,n){if(!t&&w.isArray(e))return Math.min.apply(Math,e);var r={computed:Infinity};return E(e,function(e,i,s){i=t?t.call(n,e,i,s):e,i<r.computed&&(r={value:e,computed:i})}),r.value},w.sortBy=function(e,t,n){return w.pluck(w.map(e,function(e,r,i){return{value:e,criteria:t.call(n,e,r,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;return n<r?-1:n>r?1:0}),"value")},w.groupBy=function(e,t){var n={};return E(e,function(e,r){var i=t(e,r);(n[i]||(n[i]=[])).push(e)}),n},w.sortedIndex=function(e,t,n){n||(n=w.identity);for(var r=0,i=e.length;r<i;){var s=r+i>>1;n(e[s])<n(t)?r=s+1:i=s}return r},w.toArray=function(e){return e?e.toArray?e.toArray():w.isArray(e)?s.call(e):w.isArguments(e)?s.call(e):w.values(e):[]},w.size=function(e){return w.toArray(e).length},w.first=w.head=function(e,t,n){return t!=null&&!n?s.call(e,0,t):e[0]},w.rest=w.tail=function(e,t,n){return s.call(e,t==null||n?1:t)},w.last=function(e){return e[e.length-1]},w.compact=function(e){return w.filter(e,function(e){return!!e})},w.flatten=function(e){return w.reduce(e,function(e,t){return w.isArray(t)?e.concat(w.flatten(t)):(e[e.length]=t,e)},[])},w.without=function(e){return w.difference(e,s.call(arguments,1))},w.uniq=w.unique=function(e,t){return w.reduce(e,function(e,n,r){if(0==r||(t===!0?w.last(e)!=n:!w.include(e,n)))e[e.length]=n;return e},[])},w.union=function(){return w.uniq(w.flatten(arguments))},w.intersection=w.intersect=function(e){var t=s.call(arguments,1);return w.filter(w.uniq(e),function(e){return w.every(t,function(t){return w.indexOf(t,e)>=0})})},w.difference=function(e,t){return w.filter(e,function(e){return!w.include(t,e)})},w.zip=function(){for(var e=s.call(arguments),t=w.max(w.pluck(e,"length")),n=Array(t),r=0;r<t;r++)n[r]=w.pluck(e,""+r);return n},w.indexOf=function(e,t,n){if(e==null)return-1;var r;if(n)return n=w.sortedIndex(e,t),e[n]===t?n:-1;if(m&&e.indexOf===m)return e.indexOf(t);n=0;for(r=e.length;n<r;n++)if(e[n]===t)return n;return-1},w.lastIndexOf=function(e,t){if(e==null)return-1;if(g&&e.lastIndexOf===g)return e.lastIndexOf(t);for(var n=e.length;n--;)if(e[n]===t)return n;return-1},w.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;for(var r=Math.max(Math.ceil((t-e)/n),0),i=0,s=Array(r);i<r;)s[i++]=e,e+=n;return s},w.bind=function(e,t){if(e.bind===b&&b)return b.apply(e,s.call(arguments,1));var n=s.call(arguments,2);return function(){return e.apply(t,n.concat(s.call(arguments)))}},w.bindAll=function(e){var t=s.call(arguments,1);return t.length==0&&(t=w.functions(e)),E(t,function(t){e[t]=w.bind(e[t],e)}),e},w.memoize=function(e,t){var n={};return t||(t=w.identity),function(){var r=t.apply(this,arguments);return a.call(n,r)?n[r]:n[r]=e.apply(this,arguments)}},w.delay=function(e,t){var n=s.call(arguments,2);return setTimeout(function(){return e.apply(e,n)},t)},w.defer=function(e){return w.delay.apply(w,[e,1].concat(s.call(arguments,1)))};var x=function(e,t,n){var r;return function(){var i=this,s=arguments,o=function(){r=null,e.apply(i,s)};n&&clearTimeout(r);if(n||!r)r=setTimeout(o,t)}};w.throttle=function(e,t){return x(e,t,!1)},w.debounce=function(e,t){return x(e,t,!0)},w.once=function(e){var t=!1,n;return function(){return t?n:(t=!0,n=e.apply(this,arguments))}},w.wrap=function(e,t){return function(){var n=[e].concat(s.call(arguments));return t.apply(this,n)}},w.compose=function(){var e=s.call(arguments);return function(){for(var t=s.call(arguments),n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},w.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},w.keys=y||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[],n;for(n in e)a.call(e,n)&&(t[t.length]=n);return t},w.values=function(e){return w.map(e,w.identity)},w.functions=w.methods=function(e){var t=[],n;for(n in e)w.isFunction(e[n])&&t.push(n);return t.sort()},w.extend=function(e){return E(s.call(arguments,1),function(t){for(var n in t)t[n]!==void 0&&(e[n]=t[n])}),e},w.defaults=function(e){return E(s.call(arguments,1),function(t){for(var n in t)e[n]==null&&(e[n]=t[n])}),e},w.clone=function(e){return w.isArray(e)?e.slice():w.extend({},e)},w.tap=function(e,t){return t(e),e},w.isEqual=function(e,t){if(e===t)return!0;var n=typeof e;if(n!=typeof t)return!1;if(e==t)return!0;if(!e&&t||e&&!t)return!1;e._chain&&(e=e._wrapped),t._chain&&(t=t._wrapped);if(e.isEqual)return e.isEqual(t);if(t.isEqual)return t.isEqual(e);if(w.isDate(e)&&w.isDate(t))return e.getTime()===t.getTime();if(w.isNaN(e)&&w.isNaN(t))return!1;if(w.isRegExp(e)&&w.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.ignoreCase===t.ignoreCase&&e.multiline===t.multiline;if(n!=="object")return!1;if(e.length&&e.length!==t.length)return!1;n=w.keys(e);var r=w.keys(t);if(n.length!=r.length)return!1;for(var i in e)if(!(i in t)||!w.isEqual(e[i],t[i]))return!1;return!0},w.isEmpty=function(e){if(w.isArray(e)||w.isString(e))return e.length===0;for(var t in e)if(a.call(e,t))return!1;return!0},w.isElement=function(e){return!!e&&e.nodeType==1},w.isArray=i||function(e){return u.call(e)==="[object Array]"},w.isObject=function(e){return e===Object(e)},w.isArguments=function(e){return!!e&&!!a.call(e,"callee")},w.isFunction=function(e){return!(!e||!e.constructor||!e.call||!e.apply)},w.isString=function(e){return!!(e===""||e&&e.charCodeAt&&e.substr)},w.isNumber=function(e){return!!(e===0||e&&e.toExponential&&e.toFixed)},w.isNaN=function(e){return e!==e},w.isBoolean=function(e){return e===!0||e===!1},w.isDate=function(e){return!(!e||!e.getTimezoneOffset||!e.setUTCFullYear)},w.isRegExp=function(e){return!(!e||!e.test||!e.exec||!e.ignoreCase&&e.ignoreCase!==!1)},w.isNull=function(e){return e===null},w.isUndefined=function(e){return e===void 0},w.noConflict=function(){return e._=t,this},w.identity=function(e){return e},w.times=function(e,t,n){for(var r=0;r<e;r++)t.call(n,r)},w.mixin=function(e){E(w.functions(e),function(t){k(t,w[t]=e[t])})};var T=0;w.uniqueId=function(e){var t=T++;return e?e+t:t},w.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g},w.template=function(e,t){var n=w.templateSettings;return n="var __p=[],print=function(){__p.push.apply(__p,arguments);};with(obj||{}){__p.push('"+e.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(n.interpolate,function(e,t){return"',"+t.replace(/\\'/g,"'")+",'"}).replace(n.evaluate||null,function(e,t){return"');"+t.replace(/\\'/g,"'").replace(/[\r\n\t]/g," ")+"__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');}return __p.join('');",n=new Function("obj",n),t?n(t):n};var N=function(e){this._wrapped=e};w.prototype=N.prototype;var C=function(e,t){return t?w(e).chain():e},k=function(e,t){N.prototype[e]=function(){var e=s.call(arguments);return o.call(e,this._wrapped),C(t.apply(w,e),this._chain)}};w.mixin(w),E(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=r[e];N.prototype[e]=function(){return t.apply(this._wrapped,arguments),C(this._wrapped,this._chain)}}),E(["concat","join","slice"],function(e){var t=r[e];N.prototype[e]=function(){return C(t.apply(this._wrapped,arguments),this._chain)}}),N.prototype.chain=function(){return this._chain=!0,this},N.prototype.value=function(){return this._wrapped}})(),!function(e,t,n){typeof module!="undefined"?module.exports=n(e,t):typeof define=="function"&&typeof define.amd=="object"?define(n):t[e]=n(e,t)}("bean",this,function(e,t){var n=window,r=t[e],i=/over|out/,s=/[^\.]*(?=\..*)\.|.*/,o=/\..*/,u="addEventListener",a="attachEvent",f="removeEventListener",l="detachEvent",c=document||{},h=c.documentElement||{},p=h[u],d=p?u:a,v=Array.prototype.slice,m=/click|mouse|menu|drag|drop/i,g=/^touch|^gesture/i,y={one:1},b=function(e,t,n){for(n=0;n<t.length;n++)e[t[n]]=1;return e}({},("click dblclick mouseup mousedown contextmenu mousewheel DOMMouseScroll mouseover mouseout mousemove selectstart selectend keydown keypress keyup orientationchange focus blur change reset select submit load unload beforeunload resize move DOMContentLoaded readystatechange error abort scroll "+(p?"show input invalid touchstart touchmove touchend touchcancel gesturestart gesturechange gestureend message readystatechange pageshow pagehide popstate hashchange offline online afterprint beforeprint dragstart dragenter dragover dragleave drag drop dragend loadstart progress suspend emptied stalled loadmetadata loadeddata canplay canplaythrough playing waiting seeking seeked ended durationchange timeupdate play pause ratechange volumechange cuechange checking noupdate downloading cached updateready obsolete ":"")).split(" ")),w=function(){function e(e,t){while((t=t.parentNode)!==null)if(t===e)return!0;return!1}function t(t){var n=t.relatedTarget;return n?n!==this&&n.prefix!=="xul"&&!/document/.test(this.toString())&&!e(this,n):n===null}return{mouseenter:{base:"mouseover",condition:t},mouseleave:{base:"mouseout",condition:t},mousewheel:{base:/Firefox/.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel"}}}(),E=function(){var e="altKey attrChange attrName bubbles cancelable ctrlKey currentTarget detail eventPhase getModifierState isTrusted metaKey relatedNode relatedTarget shiftKey srcElement target timeStamp type view which".split(" "),t=e.concat("button buttons clientX clientY dataTransfer fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" ")),n=e.concat("char charCode key keyCode".split(" ")),r=e.concat("touches targetTouches changedTouches scale rotation".split(" ")),s="preventDefault",o=function(e){return function(){e[s]?e[s]():e.returnValue=!1}},u="stopPropagation",a=function(e){return function(){e[u]?e[u]():e.cancelBubble=!0}},f=function(e){return function(){e[s](),e[u](),e.stopped=!0}},l=function(e,t,n){var r,i;for(r=n.length;r--;)i=n[r],!(i in t)&&i in e&&(t[i]=e[i])};return function(p,d){var v={originalEvent:p,isNative:d};if(!p)return v;var y,b=p.type,w=p.target||p.srcElement;v[s]=o(p),v[u]=a(p),v.stop=f(v),v.target=w&&w.nodeType===3?w.parentNode:w;if(d){if(b.indexOf("key")!==-1)y=n,v.keyCode=p.which||p.keyCode;else if(m.test(b)){y=t,v.rightClick=p.which===3||p.button===2,v.pos={x:0,y:0};if(p.pageX||p.pageY)v.clientX=p.pageX,v.clientY=p.pageY;else if(p.clientX||p.clientY)v.clientX=p.clientX+c.body.scrollLeft+h.scrollLeft,v.clientY=p.clientY+c.body.scrollTop+h.scrollTop;i.test(b)&&(v.relatedTarget=p.relatedTarget||p[(b==="mouseover"?"from":"to")+"Element"])}else g.test(b)&&(y=r);l(p,v,y||e)}return v}}(),S=function(e,t){return!p&&!t&&(e===c||e===n)?h:e},x=function(){function e(e,t,n,r,i){this.element=e,this.type=t,this.handler=n,this.original=r,this.namespaces=i,this.custom=w[t],this.isNative=b[t]&&e[d],this.eventType=p||this.isNative?t:"propertychange",this.customType=!p&&!this.isNative&&t,this.target=S(e,this.isNative),this.eventSupport=this.target[d]}return e.prototype={inNamespaces:function(e){var t,n;if(!e)return!0;if(!this.namespaces)return!1;for(t=e.length;t--;)for(n=this.namespaces.length;n--;)if(e[t]===this.namespaces[n])return!0;return!1},matches:function(e,t,n){return this.element===e&&(!t||this.original===t)&&(!n||this.handler===n)}},e}(),T=function(){var e={},t=function(n,r,i,s,o){if(!r||r==="*")for(var u in e)u.charAt(0)==="$"&&t(n,u.substr(1),i,s,o);else{var a=0,f,l=e["$"+r],c=n==="*";if(!l)return;for(f=l.length;a<f;a++)if(c||l[a].matches(n,i,s))if(!o(l[a],l,a,r))return}},n=function(t,n,r){var i,s=e["$"+n];if(s)for(i=s.length;i--;)if(s[i].matches(t,r,null))return!0;return!1},r=function(e,n,r){var i=[];return t(e,n,r,null,function(e){return i.push(e)}),i},i=function(t){return(e["$"+t.type]||(e["$"+t.type]=[])).push(t),t},s=function(n){t(n.element,n.type,null,n.handler,function(t,n,r){return n.splice(r,1),n.length===0&&delete e["$"+t.type],!1})},o=function(){var t,n=[];for(t in e)t.charAt(0)==="$"&&(n=n.concat(e[t]));return n};return{has:n,get:r,put:i,del:s,entries:o}}(),N=p?function(e,t,n,r){e[r?u:f](t,n,!1)}:function(e,t,n,r,i){i&&r&&e["_on"+i]===null&&(e["_on"+i]=0),e[r?a:l]("on"+t,n)},C=function(e,t,r){return function(i){return i=E(i||((this.ownerDocument||this.document||this).parentWindow||n).event,!0),t.apply(e,[i].concat(r))}},k=function(e,t,r,i,s,o){return function(u){if(i?i.apply(this,arguments):p?!0:u&&u.propertyName==="_on"+r||!u)u&&(u=E(u||((this.ownerDocument||this.document||this).parentWindow||n).event,o)),t.apply(e,u&&(!s||s.length===0)?arguments:v.call(arguments,u?0:1).concat(s))}},L=function(e,t,n,r,i){return function(){e(t,n,i),r.apply(this,arguments)}},A=function(e,t,n,r){var i,s,u,a=t&&t.replace(o,""),f=T.get(e,a,n);for(i=0,s=f.length;i<s;i++)f[i].inNamespaces(r)&&((u=f[i]).eventSupport&&N(u.target,u.eventType,u.handler,!1,u.type),T.del(u))},O=function(e,t,n,r,i){var u,a=t.replace(o,""),f=t.replace(s,"").split(".");if(T.has(e,a,n))return e;a==="unload"&&(n=L(A,e,a,n,r)),w[a]&&(w[a].condition&&(n=k(e,n,a,w[a].condition,!0)),a=w[a].base||a),u=T.put(new x(e,a,n,r,f[0]&&f)),u.handler=u.isNative?C(e,u.handler,i):k(e,u.handler,a,!1,i,!1),u.eventSupport&&N(u.target,u.eventType,u.handler,!0,u.customType)},M=function(e,t,n){return function(r){var i,s,o=typeof e=="string"?n(e,this):e;for(i=r.target;i&&i!==this;i=i.parentNode)for(s=o.length;s--;)if(o[s]===i)return t.apply(i,arguments)}},_=function(e,t,n){var r,i,u,a,f,l=A,c=t&&typeof t=="string";if(c&&t.indexOf(" ")>0){t=t.split(" ");for(f=t.length;f--;)_(e,t[f],n);return e}u=c&&t.replace(o,""),u&&w[u]&&(u=w[u].type);if(!t||c){if(a=c&&t.replace(s,""))a=a.split(".");l(e,u,n,a)}else if(typeof t=="function")l(e,null,t);else for(r in t)t.hasOwnProperty(r)&&_(e,r,t[r]);return e},D=function(e,t,n,r,i){var s,o,u,a,f=n,l=n&&typeof n=="string";if(t&&!n&&typeof t=="object")for(s in t)t.hasOwnProperty(s)&&D.apply(this,[e,s,t[s]]);else{a=arguments.length>3?v.call(arguments,3):[],o=(l?n:t).split(" "),l&&(n=M(t,f=r,i))&&(a=v.call(a,1)),this===y&&(n=L(_,e,t,n,f));for(u=o.length;u--;)O(e,o[u],n,f,a)}return e},P=function(){return D.apply(y,arguments)},H=p?function(e,t,r){var i=c.createEvent(e?"HTMLEvents":"UIEvents");i[e?"initEvent":"initUIEvent"](t,!0,!0,n,1),r.dispatchEvent(i)}:function(e,t,n){n=S(n,e),e?n.fireEvent("on"+t,c.createEventObject()):n["_on"+t]++},B=function(e,t,n){var r,i,u,a,f,l=t.split(" ");for(r=l.length;r--;){t=l[r].replace(o,"");if(a=l[r].replace(s,""))a=a.split(".");if(!a&&!n&&e[d])H(b[t],t,e);else{f=T.get(e,t),n=[!1].concat(n);for(i=0,u=f.length;i<u;i++)f[i].inNamespaces(a)&&f[i].handler.apply(e,n)}}return e},j=function(e,t,n){var r=0,i=T.get(t,n),s=i.length;for(;r<s;r++)i[r].original&&D(e,i[r].type,i[r].original);return e},F={add:D,one:P,remove:_,clone:j,fire:B,noConflict:function(){return t[e]=r,this}};if(n[a]){var I=function(){var e,t=T.entries();for(e in t)t[e].type&&t[e].type!=="unload"&&_(t[e].element,t[e].type);n[l]("onunload",I),n.CollectGarbage&&n.CollectGarbage()};n[a]("onunload",I)}return F}),function(){var e=this,t=this.Flotr,n;n={_:_,bean:bean,isIphone:/iphone/i.test(navigator.userAgent),isIE:navigator.appVersion.indexOf("MSIE")!=-1?parseFloat(navigator.appVersion.split("MSIE")[1]):!1,graphTypes:{},plugins:{},addType:function(e,t){n.graphTypes[e]=t,n.defaultOptions[e]=t.options||{},n.defaultOptions.defaultType=n.defaultOptions.defaultType||e},addPlugin:function(e,t){n.plugins[e]=t,n.defaultOptions[e]=t.options||{}},draw:function(e,t,r,i){return i=i||n.Graph,new i(e,t,r)},merge:function(e,t){var r,i,s=t||{};for(r in e)i=e[r],i&&typeof i=="object"?i.constructor===Array?s[r]=this._.clone(i):i.constructor!==RegExp&&!this._.isElement(i)?s[r]=n.merge(i,t?t[r]:undefined):s[r]=i:s[r]=i;return s},clone:function(e){return n.merge(e,{})},getTickSize:function(e,t,r,i){var s=(r-t)/e,o=n.getMagnitude(s),u=10,a=s/o;return a<1.5?u=1:a<2.25?u=2:a<3?u=i===0?2:2.5:a<7.5&&(u=5),u*o},defaultTickFormatter:function(e,t){return e+""},defaultTrackFormatter:function(e){return"("+e.x+", "+e.y+")"},engineeringNotation:function(e,t,n){var r=["Y","Z","E","P","T","G","M","k",""],i=["y","z","a","f","p","n","Âµ","m",""],s=r.length;n=n||1e3,t=Math.pow(10,t||2);if(e===0)return 0;if(e>1)while(s--&&e>=n)e/=n;else{r=i,s=r.length;while(s--&&e<1)e*=n}return Math.round(e*t)/t+r[s]},getMagnitude:function(e){return Math.pow(10,Math.floor(Math.log(e)/Math.LN10))},toPixel:function(e){return Math.floor(e)+.5},toRad:function(e){return-e*(Math.PI/180)},floorInBase:function(e,t){return t*Math.floor(e/t)},drawText:function(e,t,r,i,s){if(!e.fillText){e.drawText(t,r,i,s);return}s=this._.extend({size:n.defaultOptions.fontSize,color:"#000000",textAlign:"left",textBaseline:"bottom",weight:1,angle:0},s),e.save(),e.translate(r,i),e.rotate(s.angle),e.fillStyle=s.color,e.font=(s.weight>1?"bold ":"")+s.size*1.3+"px sans-serif",e.textAlign=s.textAlign,e.textBaseline=s.textBaseline,e.fillText(t,0,0),e.restore()},getBestTextAlign:function(e,t){return t=t||{textAlign:"center",textBaseline:"middle"},e+=n.getTextAngleFromAlign(t),Math.abs(Math.cos(e))>.01&&(t.textAlign=Math.cos(e)>0?"right":"left"),Math.abs(Math.sin(e))>.01&&(t.textBaseline=Math.sin(e)>0?"top":"bottom"),t},alignTable:{"right middle":0,"right top":Math.PI/4,"center top":Math.PI/2,"left top":3*(Math.PI/4),"left middle":Math.PI,"left bottom":-3*(Math.PI/4),"center bottom":-Math.PI/2,"right bottom":-Math.PI/4,"center middle":0},getTextAngleFromAlign:function(e){return n.alignTable[e.textAlign+" "+e.textBaseline]||0},noConflict:function(){return e.Flotr=t,this}},e.Flotr=n}(),Flotr.defaultOptions={colors:["#00A8F0","#C0D800","#CB4B4B","#4DA74D","#9440ED"],ieBackgroundColor:"#FFFFFF",title:null,subtitle:null,shadowSize:4,defaultType:null,HtmlText:!0,fontColor:"#545454",fontSize:7.5,resolution:1,parseFloat:!0,preventDefault:!0,xaxis:{ticks:null,minorTicks:null,showLabels:!0,showMinorLabels:!1,labelsAngle:0,title:null,titleAngle:0,noTicks:5,minorTickFreq:null,tickFormatter:Flotr.defaultTickFormatter,tickDecimals:null,min:null,max:null,autoscale:!1,autoscaleMargin:0,color:null,mode:"normal",timeFormat:null,timeMode:"UTC",timeUnit:"millisecond",scaling:"linear",base:Math.E,titleAlign:"center",margin:!0},x2axis:{},yaxis:{ticks:null,minorTicks:null,showLabels:!0,showMinorLabels:!1,labelsAngle:0,title:null,titleAngle:90,noTicks:5,minorTickFreq:null,tickFormatter:Flotr.defaultTickFormatter,tickDecimals:null,min:null,max:null,autoscale:!1,autoscaleMargin:0,color:null,scaling:"linear",base:Math.E,titleAlign:"center",margin:!0},y2axis:{titleAngle:270},grid:{color:"#545454",backgroundColor:null,backgroundImage:null,watermarkAlpha:.4,tickColor:"#DDDDDD",labelMargin:3,verticalLines:!0,minorVerticalLines:null,horizontalLines:!0,minorHorizontalLines:null,outlineWidth:1,outline:"nsew",circular:!1},mouse:{track:!1,trackAll:!1,position:"se",relative:!1,trackFormatter:Flotr.defaultTrackFormatter,margin:5,lineColor:"#FF3F19",trackDecimals:1,sensibility:2,trackY:!0,radius:3,fillColor:null,fillOpacity:.4}},function(){function e(e,t,n,r){this.rgba=["r","g","b","a"];var i=4;while(-1<--i)this[this.rgba[i]]=arguments[i]||(i==3?1:0);this.normalize()}var t=Flotr._,n={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]};e.prototype={scale:function(e,n,r,i){var s=4;while(-1<--s)t.isUndefined(arguments[s])||(this[this.rgba[s]]*=arguments[s]);return this.normalize()},alpha:function(e){return!t.isUndefined(e)&&!t.isNull(e)&&(this.a=e),this.normalize()},clone:function(){return new e(this.r,this.b,this.g,this.a)},limit:function(e,t,n){return Math.max(Math.min(e,n),t)},normalize:function(){var e=this.limit;return this.r=e(parseInt(this.r,10),0,255),this.g=e(parseInt(this.g,10),0,255),this.b=e(parseInt(this.b,10),0,255),this.a=e(this.a,0,1),this},distance:function(t){if(!t)return;t=new e.parse(t);var n=0,r=3;while(-1<--r)n+=Math.abs(this[this.rgba[r]]-t[this.rgba[r]]);return n},toString:function(){return this.a>=1?"rgb("+[this.r,this.g,this.b].join(",")+")":"rgba("+[this.r,this.g,this.b,this.a].join(",")+")"},contrast:function(){var e=1-(.299*this.r+.587*this.g+.114*this.b)/255;return e<.5?"#000000":"#ffffff"}},t.extend(e,{parse:function(t){if(t instanceof e)return t;var r;if(r=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(t))return new e(parseInt(r[1],16),parseInt(r[2],16),parseInt(r[3],16));if(r=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(t))return new e(parseInt(r[1],10),parseInt(r[2],10),parseInt(r[3],10));if(r=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(t))return new e(parseInt(r[1]+r[1],16),parseInt(r[2]+r[2],16),parseInt(r[3]+r[3],16));if(r=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(t))return new e(parseInt(r[1],10),parseInt(r[2],10),parseInt(r[3],10),parseFloat(r[4]));if(r=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(t))return new e(parseFloat(r[1])*2.55,parseFloat(r[2])*2.55,parseFloat(r[3])*2.55);if(r=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(t))return new e(parseFloat(r[1])*2.55,parseFloat(r[2])*2.55,parseFloat(r[3])*2.55,parseFloat(r[4]));var i=(t+"").replace(/^\s*([\S\s]*?)\s*$/,"$1").toLowerCase();return i=="transparent"?new e(255,255,255,0):(r=n[i])?new e(r[0],r[1],r[2]):new e(0,0,0,0)},processColor:function(n,r){var i=r.opacity;if(!n)return"rgba(0, 0, 0, 0)";if(n instanceof e)return n.alpha(i).toString();if(t.isString(n))return e.parse(n).alpha(i).toString();var s=n.colors?n:{colors:n};if(!r.ctx)return t.isArray(s.colors)?e.parse(t.isArray(s.colors[0])?s.colors[0][1]:s.colors[0]).alpha(i).toString():"rgba(0, 0, 0, 0)";s=t.extend({start:"top",end:"bottom"},s),/top/i.test(s.start)&&(r.x1=0),/left/i.test(s.start)&&(r.y1=0),/bottom/i.test(s.end)&&(r.x2=0),/right/i.test(s.end)&&(r.y2=0);var o,u,f,l=r.ctx.createLinearGradient(r.x1,r.y1,r.x2,r.y2);for(o=0;o<s.colors.length;o++)u=s.colors[o],t.isArray(u)?(f=u[0],u=u[1]):f=o/(s.colors.length-1),l.addColorStop(f,e.parse(u).alpha(i));return l}}),Flotr.Color=e}(),Flotr.Date={set:function(e,t,n,r){n=n||"UTC",t="set"+(n==="UTC"?"UTC":"")+t,e[t](r)},get:function(e,t,n){return n=n||"UTC",t="get"+(n==="UTC"?"UTC":"")+t,e[t]()},format:function(e,t,n){function r(e){return e+="",e.length==1?"0"+e:e}if(!e)return;var i=this.get,s={h:i(e,"Hours",n).toString(),H:r(i(e,"Hours",n)),M:r(i(e,"Minutes",n)),S:r(i(e,"Seconds",n)),s:i(e,"Milliseconds",n),d:i(e,"Date",n).toString(),m:(i(e,"Month",n)+1).toString(),y:i(e,"FullYear",n).toString(),b:Flotr.Date.monthNames[i(e,"Month",n)]},o=[],u,a=!1;for(var f=0;f<t.length;++f)u=t.charAt(f),a?(o.push(s[u]||u),a=!1):u=="%"?a=!0:o.push(u);return o.join("")},getFormat:function(e,t){var n=Flotr.Date.timeUnits;return e<n.second?"%h:%M:%S.%s":e<n.minute?"%h:%M:%S":e<n.day?t<2*n.day?"%h:%M":"%b %d %h:%M":e<n.month?"%b %d":e<n.year?t<n.year?"%b":"%b %y":"%y"},formatter:function(e,t){var n=t.options,r=Flotr.Date.timeUnits[n.timeUnit],i=new Date(e*r);if(t.options.timeFormat)return Flotr.Date.format(i,n.timeFormat,n.timeMode);var s=(t.max-t.min)*r,o=t.tickSize*Flotr.Date.timeUnits[t.tickUnit];return Flotr.Date.format(i,Flotr.Date.getFormat(o,s),n.timeMode)},generator:function(e){function t(e){n(g,e,u,Flotr.floorInBase(r(g,e,u),p))}var n=this.set,r=this.get,i=this.timeUnits,s=this.spec,o=e.options,u=o.timeMode,a=i[o.timeUnit],f=e.min*a,l=e.max*a,c=(l-f)/o.noTicks,h=[],p=e.tickSize,d,v,m;v=o.tickFormatter===Flotr.defaultTickFormatter?this.formatter:o.tickFormatter;for(m=0;m<s.length-1;++m){var g=s[m][0]*i[s[m][1]];if(c<(g+s[m+1][0]*i[s[m+1][1]])/2&&g>=p)break}p=s[m][0],d=s[m][1],d=="year"&&(p=Flotr.getTickSize(o.noTicks*i.year,f,l,0),p==.5&&(d="month",p=6)),e.tickUnit=d,e.tickSize=p;var y=p*i[d];g=new Date(f);switch(d){case"millisecond":t("Milliseconds");break;case"second":t("Seconds");break;case"minute":t("Minutes");break;case"hour":t("Hours");break;case"month":t("Month");break;case"year":t("FullYear")}y>=i.second&&n(g,"Milliseconds",u,0),y>=i.minute&&n(g,"Seconds",u,0),y>=i.hour&&n(g,"Minutes",u,0),y>=i.day&&n(g,"Hours",u,0),y>=i.day*4&&n(g,"Date",u,1),y>=i.year&&n(g,"Month",u,0);var b=0,w=NaN,E;do{E=w,w=g.getTime(),h.push({v:w/a,label:v(w/a,e)});if(d=="month")if(p<1){n(g,"Date",u,1);var S=g.getTime();n(g,"Month",u,r(g,"Month",u)+1);var x=g.getTime();g.setTime(w+b*i.hour+(x-S)*p),b=r(g,"Hours",u),n(g,"Hours",u,0)}else n(g,"Month",u,r(g,"Month",u)+p);else d=="year"?n(g,"FullYear",u,r(g,"FullYear",u)+p):g.setTime(w+y)}while(w<l&&w!=E);return h},timeUnits:{millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,month:2592e6,year:31556952e3},spec:[[1,"millisecond"],[20,"millisecond"],[50,"millisecond"],[100,"millisecond"],[200,"millisecond"],[500,"millisecond"],[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[.25,"month"],[.5,"month"],[1,"month"],[2,"month"],[3,"month"],[6,"month"],[1,"year"]],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},function(){var e=Flotr._;Flotr.DOM={addClass:function(t,n){var r=t.className?t.className:"";if(e.include(r.split(/\s+/g),n))return;t.className=(r?r+" ":"")+n},create:function(e){return document.createElement(e)},node:function(e){var t=Flotr.DOM.create("div"),n;return t.innerHTML=e,n=t.children[0],t.innerHTML="",n},empty:function(e){e.innerHTML=""},hide:function(e){Flotr.DOM.setStyles(e,{display:"none"})},insert:function(t,n){e.isString(n)?t.innerHTML+=n:e.isElement(n)&&t.appendChild(n)},opacity:function(e,t){e.style.opacity=t},position:function(e,t){return e.offsetParent?(t=this.position(e.offsetParent),t.left+=e.offsetLeft,t.top+=e.offsetTop,t):{left:e.offsetLeft||0,top:e.offsetTop||0}},removeClass:function(t,n){var r=t.className?t.className:"";t.className=e.filter(r.split(/\s+/g),function(e){if(e!=n)return!0}).join(" ")},setStyles:function(t,n){e.each(n,function(e,n){t.style[n]=e})},show:function(e){Flotr.DOM.setStyles(e,{display:""})},size:function(e){return{height:e.offsetHeight,width:e.offsetWidth}}}}(),function(){var e=Flotr,t=e.bean;e.EventAdapter={observe:function(e,n,r){return t.add(e,n,r),this},fire:function(e,n,r){return t.fire(e,n,r),typeof Prototype!="undefined"&&Event.fire(e,n,r),this},stopObserving:function(e,n,r){return t.remove(e,n,r),this},eventPointer:function(t){if(!e._.isUndefined(t.touches)&&t.touches.length>0)return{x:t.touches[0].pageX,y:t.touches[0].pageY};if(!e._.isUndefined(t.changedTouches)&&t.changedTouches.length>0)return{x:t.changedTouches[0].pageX,y:t.changedTouches[0].pageY};if(t.pageX||t.pageY)return{x:t.pageX,y:t.pageY};if(t.clientX||t.clientY){var n=document,r=n.body,i=n.documentElement;return{x:t.clientX+r.scrollLeft+i.scrollLeft,y:t.clientY+r.scrollTop+i.scrollTop}}}}}(),function(){function e(e,t,r){return n.observe.apply(this,arguments),this._handles.push(arguments),this}var t=Flotr.DOM,n=Flotr.EventAdapter,r=Flotr._,i=Flotr;Graph=function(e,t,s){this._setEl(e),this._initMembers(),this._initPlugins(),n.fire(this.el,"flotr:beforeinit",[this]),this.data=t,this.series=i.Series.getSeries(t),this._initOptions(s),this._initGraphTypes(),this._initCanvas(),this._text=new i.Text({element:this.el,ctx:this.ctx,html:this.options.HtmlText,textEnabled:this.textEnabled}),n.fire(this.el,"flotr:afterconstruct",[this]),this._initEvents(),this.findDataRanges(),this.calculateSpacing(),this.draw(r.bind(function(){n.fire(this.el,"flotr:afterinit",[this])},this))},Graph.prototype={destroy:function(){n.fire(this.el,"flotr:destroy"),r.each(this._handles,function(e){n.stopObserving.apply(this,e)}),this._handles=[],this.el.graph=null},observe:e,_observe:e,processColor:function(e,t){var n={x1:0,y1:0,x2:this.plotWidth,y2:this.plotHeight,opacity:1,ctx:this.ctx};return r.extend(n,t),i.Color.processColor(e,n)},findDataRanges:function(){var e=this.axes,t,n,s;r.each(this.series,function(e){s=e.getRange(),s&&(t=e.xaxis,n=e.yaxis,t.datamin=Math.min(s.xmin,t.datamin),t.datamax=Math.max(s.xmax,t.datamax),n.datamin=Math.min(s.ymin,n.datamin),n.datamax=Math.max(s.ymax,n.datamax),t.used=t.used||s.xused,n.used=n.used||s.yused)},this),!e.x.used&&!e.x2.used&&(e.x.used=!0),!e.y.used&&!e.y2.used&&(e.y.used=!0),r.each(e,function(e){e.calculateRange()});var o=r.keys(i.graphTypes),u=!1;r.each(this.series,function(e){if(e.hide)return;r.each(o,function(t){e[t]&&e[t].show&&(this.extendRange(t,e),u=!0)},this),u||this.extendRange(this.options.defaultType,e)},this)},extendRange:function(e,t){this[e].extendRange&&this[e].extendRange(t,t.data,t[e],this[e]),this[e].extendYRange&&this[e].extendYRange(t.yaxis,t.data,t[e],this[e]),this[e].extendXRange&&this[e].extendXRange(t.xaxis,t.data,t[e],this[e])},calculateSpacing:function(){var e=this.axes,t=this.options,n=this.series,i=t.grid.labelMargin,s=this._text,o=e.x,u=e.x2,a=e.y,f=e.y2,l=t.grid.outlineWidth,h,p,d,v;r.each(e,function(e){e.calculateTicks(),e.calculateTextDimensions(s,t)}),v=s.dimensions(t.title,{size:t.fontSize*1.5},"font-size:1em;font-weight:bold;","flotr-title"),this.titleHeight=v.height,v=s.dimensions(t.subtitle,{size:t.fontSize},"font-size:smaller;","flotr-subtitle"),this.subtitleHeight=v.height;for(p=0;p<t.length;++p)n[p].points.show&&(l=Math.max(l,n[p].points.radius+n[p].points.lineWidth/2));var m=this.plotOffset;o.options.margin===!1?(m.bottom=0,m.top=0):(m.bottom+=(t.grid.circular?0:o.used&&o.options.showLabels?o.maxLabel.height+i:0)+(o.used&&o.options.title?o.titleSize.height+i:0)+l,m.top+=(t.grid.circular?0:u.used&&u.options.showLabels?u.maxLabel.height+i:0)+(u.used&&u.options.title?u.titleSize.height+i:0)+this.subtitleHeight+
this.titleHeight+l),a.options.margin===!1?(m.left=0,m.right=0):(m.left+=(t.grid.circular?0:a.used&&a.options.showLabels?a.maxLabel.width+i:0)+(a.used&&a.options.title?a.titleSize.width+i:0)+l,m.right+=(t.grid.circular?0:f.used&&f.options.showLabels?f.maxLabel.width+i:0)+(f.used&&f.options.title?f.titleSize.width+i:0)+l),m.top=Math.floor(m.top),this.plotWidth=this.canvasWidth-m.left-m.right,this.plotHeight=this.canvasHeight-m.bottom-m.top,o.length=u.length=this.plotWidth,a.length=f.length=this.plotHeight,a.offset=f.offset=this.plotHeight,o.setScale(),u.setScale(),a.setScale(),f.setScale()},draw:function(e){var t=this.ctx,r;n.fire(this.el,"flotr:beforedraw",[this.series,this]);if(this.series.length){t.save(),t.translate(this.plotOffset.left,this.plotOffset.top);for(r=0;r<this.series.length;r++)this.series[r].hide||this.drawSeries(this.series[r]);t.restore(),this.clip()}n.fire(this.el,"flotr:afterdraw",[this.series,this]),e&&e()},drawSeries:function(e){function t(e,t){var n=this.getOptions(e,t);this[t].draw(n)}var n=!1;e=e||this.series,r.each(i.graphTypes,function(r,i){e[i]&&e[i].show&&this[i]&&(n=!0,t.call(this,e,i))},this),n||t.call(this,e,this.options.defaultType)},getOptions:function(e,t){var n=e[t],r=this[t],s=e.xaxis,o=e.yaxis,u={context:this.ctx,width:this.plotWidth,height:this.plotHeight,fontSize:this.options.fontSize,fontColor:this.options.fontColor,textEnabled:this.textEnabled,htmlText:this.options.HtmlText,text:this._text,element:this.el,data:e.data,color:e.color,shadowSize:e.shadowSize,xScale:s.d2p,yScale:o.d2p,xInverse:s.p2d,yInverse:o.p2d};return u=i.merge(n,u),u.fillStyle=this.processColor(n.fillColor||e.color,{opacity:n.fillOpacity}),u},getEventPosition:function(e){var r=document,i=r.body,s=r.documentElement,o=this.axes,u=this.plotOffset,f=this.lastMousePos,l=n.eventPointer(e),c=l.x-f.pageX,h=l.y-f.pageY,p,d,v;return"ontouchstart"in this.el?(p=t.position(this.overlay),d=l.x-p.left-u.left,v=l.y-p.top-u.top):(p=this.overlay.getBoundingClientRect(),d=e.clientX-p.left-u.left-i.scrollLeft-s.scrollLeft,v=e.clientY-p.top-u.top-i.scrollTop-s.scrollTop),{x:o.x.p2d(d),x2:o.x2.p2d(d),y:o.y.p2d(v),y2:o.y2.p2d(v),relX:d,relY:v,dX:c,dY:h,absX:l.x,absY:l.y,pageX:l.x,pageY:l.y}},clickHandler:function(e){if(this.ignoreClick)return this.ignoreClick=!1,this.ignoreClick;n.fire(this.el,"flotr:click",[this.getEventPosition(e),this])},mouseMoveHandler:function(e){if(this.mouseDownMoveHandler)return;var t=this.getEventPosition(e);n.fire(this.el,"flotr:mousemove",[e,t,this]),this.lastMousePos=t},mouseDownHandler:function(e){if(this.mouseUpHandler)return;this.mouseUpHandler=r.bind(function(e){n.stopObserving(document,"mouseup",this.mouseUpHandler),n.stopObserving(document,"mousemove",this.mouseDownMoveHandler),this.mouseDownMoveHandler=null,this.mouseUpHandler=null,n.fire(this.el,"flotr:mouseup",[e,this])},this),this.mouseDownMoveHandler=r.bind(function(t){var r=this.getEventPosition(t);n.fire(this.el,"flotr:mousemove",[e,r,this]),this.lastMousePos=r},this),n.observe(document,"mouseup",this.mouseUpHandler),n.observe(document,"mousemove",this.mouseDownMoveHandler),n.fire(this.el,"flotr:mousedown",[e,this]),this.ignoreClick=!1},drawTooltip:function(e,n,r,i){var s=this.getMouseTrack(),o="opacity:0.7;background-color:#000;color:#fff;display:none;position:absolute;padding:2px 8px;-moz-border-radius:4px;border-radius:4px;white-space:nowrap;",u=i.position,f=i.margin,l=this.plotOffset;n!==null&&r!==null?(i.relative?(u.charAt(0)=="n"?o+="bottom:"+(f-l.top-r+this.canvasHeight)+"px;top:auto;":u.charAt(0)=="s"&&(o+="top:"+(f+l.top+r)+"px;bottom:auto;"),u.charAt(1)=="e"?o+="left:"+(f+l.left+n)+"px;right:auto;":u.charAt(1)=="w"&&(o+="right:"+(f-l.left-n+this.canvasWidth)+"px;left:auto;")):(u.charAt(0)=="n"?o+="top:"+(f+l.top)+"px;bottom:auto;":u.charAt(0)=="s"&&(o+="bottom:"+(f+l.bottom)+"px;top:auto;"),u.charAt(1)=="e"?o+="right:"+(f+l.right)+"px;left:auto;":u.charAt(1)=="w"&&(o+="left:"+(f+l.left)+"px;right:auto;")),s.style.cssText=o,t.empty(s),t.insert(s,e),t.show(s)):t.hide(s)},clip:function(e){var t=this.plotOffset,n=this.canvasWidth,r=this.canvasHeight;e=e||this.ctx,i.isIE&&i.isIE<9?(e.save(),e.fillStyle=this.processColor(this.options.ieBackgroundColor),e.fillRect(0,0,n,t.top),e.fillRect(0,0,t.left,r),e.fillRect(0,r-t.bottom,n,t.bottom),e.fillRect(n-t.right,0,t.right,r),e.restore()):(e.clearRect(0,0,n,t.top),e.clearRect(0,0,t.left,r),e.clearRect(0,r-t.bottom,n,t.bottom),e.clearRect(n-t.right,0,t.right,r))},_initMembers:function(){this._handles=[],this.lastMousePos={pageX:null,pageY:null},this.plotOffset={left:0,right:0,top:0,bottom:0},this.ignoreClick=!0,this.prevHit=null},_initGraphTypes:function(){r.each(i.graphTypes,function(e,t){this[t]=i.clone(e)},this)},_initEvents:function(){var e=this.el,t,i,s;"ontouchstart"in e?(t=r.bind(function(r){s=!0,n.stopObserving(document,"touchend",t),n.fire(e,"flotr:mouseup",[event,this]),this.multitouches=null,i||this.clickHandler(r)},this),this.observe(this.overlay,"touchstart",r.bind(function(r){i=!1,s=!1,this.ignoreClick=!1,r.touches&&r.touches.length>1&&(this.multitouches=r.touches),n.fire(e,"flotr:mousedown",[event,this]),this.observe(document,"touchend",t)},this)),this.observe(this.overlay,"touchmove",r.bind(function(t){var r=this.getEventPosition(t);this.options.preventDefault&&t.preventDefault(),i=!0,this.multitouches||t.touches&&t.touches.length>1?this.multitouches=t.touches:s||n.fire(e,"flotr:mousemove",[event,r,this]),this.lastMousePos=r},this))):this.observe(this.overlay,"mousedown",r.bind(this.mouseDownHandler,this)).observe(e,"mousemove",r.bind(this.mouseMoveHandler,this)).observe(this.overlay,"click",r.bind(this.clickHandler,this)).observe(e,"mouseout",function(){n.fire(e,"flotr:mouseout")})},_initCanvas:function(){function e(e,n){return e||(e=t.create("canvas"),typeof FlashCanvas!="undefined"&&typeof e.getContext=="function"&&FlashCanvas.initElement(e),e.className="flotr-"+n,e.style.cssText="position:absolute;left:0px;top:0px;",t.insert(i,e)),r.each(h,function(r,i){t.show(e);if(n=="canvas"&&e.getAttribute(i)===r)return;e.setAttribute(i,r*s.resolution),e.style[i]=r+"px"}),e.context_=null,e}function n(e){window.G_vmlCanvasManager&&window.G_vmlCanvasManager.initElement(e);var t=e.getContext("2d");return window.G_vmlCanvasManager||t.scale(s.resolution,s.resolution),t}var i=this.el,s=this.options,o=i.children,u=[],f,l,h,p;for(l=o.length;l--;)f=o[l],!this.canvas&&f.className==="flotr-canvas"?this.canvas=f:!this.overlay&&f.className==="flotr-overlay"?this.overlay=f:u.push(f);for(l=u.length;l--;)i.removeChild(u[l]);t.setStyles(i,{position:"relative"}),h={},h.width=i.clientWidth,h.height=i.clientHeight;if(h.width<=0||h.height<=0||s.resolution<=0)throw"Invalid dimensions for plot, width = "+h.width+", height = "+h.height+", resolution = "+s.resolution;this.canvas=e(this.canvas,"canvas"),this.overlay=e(this.overlay,"overlay"),this.ctx=n(this.canvas),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.octx=n(this.overlay),this.octx.clearRect(0,0,this.overlay.width,this.overlay.height),this.canvasHeight=h.height,this.canvasWidth=h.width,this.textEnabled=!!this.ctx.drawText||!!this.ctx.fillText},_initPlugins:function(){r.each(i.plugins,function(e,t){r.each(e.callbacks,function(e,t){this.observe(this.el,t,r.bind(e,this))},this),this[t]=i.clone(e),r.each(this[t],function(e,n){r.isFunction(e)&&(this[t][n]=r.bind(e,this))},this)},this)},_initOptions:function(e){var t=i.clone(i.defaultOptions);t.x2axis=r.extend(r.clone(t.xaxis),t.x2axis),t.y2axis=r.extend(r.clone(t.yaxis),t.y2axis),this.options=i.merge(e||{},t),this.options.grid.minorVerticalLines===null&&this.options.xaxis.scaling==="logarithmic"&&(this.options.grid.minorVerticalLines=!0),this.options.grid.minorHorizontalLines===null&&this.options.yaxis.scaling==="logarithmic"&&(this.options.grid.minorHorizontalLines=!0),n.fire(this.el,"flotr:afterinitoptions",[this]),this.axes=i.Axis.getAxes(this.options);var s=[],o=[],u=this.series.length,a=this.series.length,f=this.options.colors,l=[],h=0,p,v,m,g;for(v=a-1;v>-1;--v)p=this.series[v].color,p&&(--a,r.isNumber(p)?s.push(p):l.push(i.Color.parse(p)));for(v=s.length-1;v>-1;--v)a=Math.max(a,s[v]+1);for(v=0;o.length<a;){p=f.length==v?new i.Color(100,100,100):i.Color.parse(f[v]);var y=h%2==1?-1:1,w=1+y*Math.ceil(h/2)*.2;p.scale(w,w,w),o.push(p),++v>=f.length&&(v=0,++h)}for(v=0,m=0;v<u;++v){g=this.series[v],g.color?r.isNumber(g.color)&&(g.color=o[g.color].toString()):g.color=o[m++].toString(),g.xaxis||(g.xaxis=this.axes.x),g.xaxis==1?g.xaxis=this.axes.x:g.xaxis==2&&(g.xaxis=this.axes.x2),g.yaxis||(g.yaxis=this.axes.y),g.yaxis==1?g.yaxis=this.axes.y:g.yaxis==2&&(g.yaxis=this.axes.y2);for(var E in i.graphTypes)g[E]=r.extend(r.clone(this.options[E]),g[E]);g.mouse=r.extend(r.clone(this.options.mouse),g.mouse),r.isUndefined(g.shadowSize)&&(g.shadowSize=this.options.shadowSize)}},_setEl:function(e){if(!e)throw"The target container doesn't exist";if(e.graph instanceof Graph)e.graph.destroy();else if(!e.clientWidth)throw"The target container must be visible";e.graph=this,this.el=e}},Flotr.Graph=Graph}(),function(){function e(e){this.orientation=1,this.offset=0,this.datamin=Number.MAX_VALUE,this.datamax=-Number.MAX_VALUE,r.extend(this,e)}function t(e,t){return e=Math.log(Math.max(e,Number.MIN_VALUE)),t!==Math.E&&(e/=Math.log(t)),e}function n(e,t){return t===Math.E?Math.exp(e):Math.pow(t,e)}var r=Flotr._,s="logarithmic";e.prototype={setScale:function(){var e=this.length,r=this.max,i=this.min,o=this.offset,u=this.orientation,a=this.options,f=a.scaling===s,l;f?l=e/(t(r,a.base)-t(i,a.base)):l=e/(r-i),this.scale=l,f?(this.d2p=function(e){return o+u*(t(e,a.base)-t(i,a.base))*l},this.p2d=function(e){return n((o+u*e)/l+t(i,a.base),a.base)}):(this.d2p=function(e){return o+u*(e-i)*l},this.p2d=function(e){return(o+u*e)/l+i})},calculateTicks:function(){var e=this.options;this.ticks=[],this.minorTicks=[],e.ticks?(this._cleanUserTicks(e.ticks,this.ticks),this._cleanUserTicks(e.minorTicks||[],this.minorTicks)):e.mode=="time"?this._calculateTimeTicks():e.scaling==="logarithmic"?this._calculateLogTicks():this._calculateTicks(),r.each(this.ticks,function(e){e.label+=""}),r.each(this.minorTicks,function(e){e.label+=""})},calculateRange:function(){if(!this.used)return;var e=this,t=e.options,n=t.min!==null?t.min:e.datamin,r=t.max!==null?t.max:e.datamax,i=t.autoscaleMargin;t.scaling=="logarithmic"&&(n<=0&&(n=e.datamin),r<=0&&(r=n));if(r==n){var s=r?.01:1;t.min===null&&(n-=s),t.max===null&&(r+=s)}if(t.scaling==="logarithmic"){n<0&&(n=r/t.base);var o=Math.log(r);t.base!=Math.E&&(o/=Math.log(t.base)),o=Math.ceil(o);var u=Math.log(n);t.base!=Math.E&&(u/=Math.log(t.base)),u=Math.ceil(u),e.tickSize=Flotr.getTickSize(t.noTicks,u,o,t.tickDecimals===null?0:t.tickDecimals),t.minorTickFreq===null&&(o-u>10?t.minorTickFreq=0:o-u>5?t.minorTickFreq=2:t.minorTickFreq=5)}else e.tickSize=Flotr.getTickSize(t.noTicks,n,r,t.tickDecimals);e.min=n,e.max=r,t.min===null&&t.autoscale&&(e.min-=e.tickSize*i,e.min<0&&e.datamin>=0&&(e.min=0),e.min=e.tickSize*Math.floor(e.min/e.tickSize)),t.max===null&&t.autoscale&&(e.max+=e.tickSize*i,e.max>0&&e.datamax<=0&&e.datamax!=e.datamin&&(e.max=0),e.max=e.tickSize*Math.ceil(e.max/e.tickSize)),e.min==e.max&&(e.max=e.min+1)},calculateTextDimensions:function(e,t){var n="",r,i;if(this.options.showLabels)for(i=0;i<this.ticks.length;++i)r=this.ticks[i].label.length,r>n.length&&(n=this.ticks[i].label);this.maxLabel=e.dimensions(n,{size:t.fontSize,angle:Flotr.toRad(this.options.labelsAngle)},"font-size:smaller;","flotr-grid-label"),this.titleSize=e.dimensions(this.options.title,{size:t.fontSize*1.2,angle:Flotr.toRad(this.options.titleAngle)},"font-weight:bold;","flotr-axis-title")},_cleanUserTicks:function(e,t){var n=this,i=this.options,s,o,u,f;r.isFunction(e)&&(e=e({min:n.min,max:n.max}));for(o=0;o<e.length;++o)f=e[o],typeof f=="object"?(s=f[0],u=f.length>1?f[1]:i.tickFormatter(s,{min:n.min,max:n.max})):(s=f,u=i.tickFormatter(s,{min:this.min,max:this.max})),t[o]={v:s,label:u}},_calculateTimeTicks:function(){this.ticks=Flotr.Date.generator(this)},_calculateLogTicks:function(){var e=this,t=e.options,n,r,s=Math.log(e.max);t.base!=Math.E&&(s/=Math.log(t.base)),s=Math.ceil(s);var o=Math.log(e.min);t.base!=Math.E&&(o/=Math.log(t.base)),o=Math.ceil(o);for(i=o;i<s;i+=e.tickSize){r=t.base==Math.E?Math.exp(i):Math.pow(t.base,i);var u=r*(t.base==Math.E?Math.exp(e.tickSize):Math.pow(t.base,e.tickSize)),a=(u-r)/t.minorTickFreq;e.ticks.push({v:r,label:t.tickFormatter(r,{min:e.min,max:e.max})});for(n=r+a;n<u;n+=a)e.minorTicks.push({v:n,label:t.tickFormatter(n,{min:e.min,max:e.max})})}r=t.base==Math.E?Math.exp(i):Math.pow(t.base,i),e.ticks.push({v:r,label:t.tickFormatter(r,{min:e.min,max:e.max})})},_calculateTicks:function(){var e=this,t=e.options,n=e.tickSize,r=e.min,i=e.max,s=n*Math.ceil(r/n),o,u,a,f,l,c;t.minorTickFreq&&(u=n/t.minorTickFreq);for(l=0;(a=f=s+l*n)<=i;++l){o=t.tickDecimals,o===null&&(o=1-Math.floor(Math.log(n)/Math.LN10)),o<0&&(o=0),a=a.toFixed(o),e.ticks.push({v:a,label:t.tickFormatter(a,{min:e.min,max:e.max})});if(t.minorTickFreq)for(c=0;c<t.minorTickFreq&&l*n+c*u<i;++c)a=f+c*u,e.minorTicks.push({v:a,label:t.tickFormatter(a,{min:e.min,max:e.max})})}}},r.extend(e,{getAxes:function(t){return{x:new e({options:t.xaxis,n:1,length:this.plotWidth}),x2:new e({options:t.x2axis,n:2,length:this.plotWidth}),y:new e({options:t.yaxis,n:1,length:this.plotHeight,offset:this.plotHeight,orientation:-1}),y2:new e({options:t.y2axis,n:2,length:this.plotHeight,offset:this.plotHeight,orientation:-1})}}}),Flotr.Axis=e}(),function(){function e(e){t.extend(this,e)}var t=Flotr._;e.prototype={getRange:function(){var e=this.data,t=e.length,n=Number.MAX_VALUE,r=Number.MAX_VALUE,i=-Number.MAX_VALUE,s=-Number.MAX_VALUE,o=!1,u=!1,a,f,l;if(t<0||this.hide)return!1;for(l=0;l<t;l++)a=e[l][0],f=e[l][1],a!==null&&(a<n&&(n=a,o=!0),a>i&&(i=a,o=!0)),f!==null&&(f<r&&(r=f,u=!0),f>s&&(s=f,u=!0));return{xmin:n,xmax:i,ymin:r,ymax:s,xused:o,yused:u}}},t.extend(e,{getSeries:function(n){return t.map(n,function(n){var r;return n.data?(r=new e,t.extend(r,n)):r=new e({data:n}),r})}}),Flotr.Series=e}(),function(){var e=Flotr,t=e.DOM,n=e._,r=function(e){this.o=e};r.prototype={dimensions:function(e,t,n,r){return e?this.o.html?this.html(e,this.o.element,n,r):this.canvas(e,t):{width:0,height:0}},canvas:function(t,n){if(!this.o.textEnabled)return;n=n||{};var r=this.measureText(t,n),i=r.width,s=n.size||e.defaultOptions.fontSize,o=n.angle||0,u=Math.cos(o),f=Math.sin(o),l=2,c=6,h;return h={width:Math.abs(u*i)+Math.abs(f*s)+l,height:Math.abs(f*i)+Math.abs(u*s)+c},h},html:function(e,n,r,i){var s=t.create("div");return t.setStyles(s,{position:"absolute",top:"-10000px"}),t.insert(s,'<div style="'+r+'" class="'+i+' flotr-dummy-div">'+e+"</div>"),t.insert(this.o.element,s),t.size(s)},measureText:function(t,r){var i=this.o.ctx,s;return!i.fillText||e.isIphone&&i.measure?{width:i.measure(t,r)}:(r=n.extend({size:e.defaultOptions.fontSize,weight:1,angle:0},r),i.save(),i.font=(r.weight>1?"bold ":"")+r.size*1.3+"px sans-serif",s=i.measureText(t),i.restore(),s)}},Flotr.Text=r}(),Flotr.addType("lines",{options:{show:!1,lineWidth:2,fill:!1,fillBorder:!1,fillColor:null,fillOpacity:.4,steps:!1,stacked:!1},stack:{values:[]},draw:function(e){var t=e.context,n=e.lineWidth,r=e.shadowSize,i;t.save(),t.lineJoin="round",r&&(t.lineWidth=r/2,i=n/2+t.lineWidth/2,t.strokeStyle="rgba(0,0,0,0.1)",this.plot(e,i+r/2,!1),t.strokeStyle="rgba(0,0,0,0.2)",this.plot(e,i,!1)),t.lineWidth=n,t.strokeStyle=e.color,this.plot(e,0,!0),t.restore()},plot:function(e,t,n){function r(){!t&&e.fill&&v&&(m=u(v[0]),i.fillStyle=e.fillStyle,i.lineTo(g,d),i.lineTo(m,d),i.lineTo(m,a(v[1])),i.fill(),e.fillBorder&&i.stroke())}var i=e.context,s=e.width,o=e.height,u=e.xScale,a=e.yScale,f=e.data,l=e.stacked?this.stack:!1,c=f.length-1,h=null,p=null,d=a(0),v=null,m,g,y,b,w,E,S;if(c<1)return;i.beginPath();for(S=0;S<c;++S){if(f[S][1]===null||f[S+1][1]===null){e.fill&&S>0&&f[S][1]&&(i.stroke(),r(),v=null,i.closePath(),i.beginPath());continue}m=u(f[S][0]),g=u(f[S+1][0]),v===null&&(v=f[S]),l?(w=l.values[f[S][0]]||0,E=l.values[f[S+1][0]]||l.values[f[S][0]]||0,y=a(f[S][1]+w),b=a(f[S+1][1]+E),n&&(l.values[f[S][0]]=f[S][1]+w,S==c-1&&(l.values[f[S+1][0]]=f[S+1][1]+E))):(y=a(f[S][1]),b=a(f[S+1][1]));if(y>o&&b>o||y<0&&b<0||m<0&&g<0||m>s&&g>s)continue;(h!=m||p!=y+t)&&i.moveTo(m,y+t),h=g,p=b+t,e.steps?(i.lineTo(h+t/2,y+t),i.lineTo(h+t/2,p)):i.lineTo(h,p)}(!e.fill||e.fill&&!e.fillBorder)&&i.stroke(),r(),i.closePath()},extendYRange:function(e,t,n,r){var i=e.options;if(n.stacked&&(!i.max&&i.max!==0||!i.min&&i.min!==0)){var s=e.max,o=e.min,u=r.positiveSums||{},a=r.negativeSums||{},f,l;for(l=0;l<t.length;l++)f=t[l][0]+"",t[l][1]>0?(u[f]=(u[f]||0)+t[l][1],s=Math.max(s,u[f])):(a[f]=(a[f]||0)+t[l][1],o=Math.min(o,a[f]));r.negativeSums=a,r.positiveSums=u,e.max=s,e.min=o}n.steps&&(this.hit=function(e){var t=e.data,n=e.args,r=e.yScale,i=n[0],s=t.length,o=n[1],u=e.xInverse(i.relX),a=i.relY,f;for(f=0;f<s-1;f++)if(u>=t[f][0]&&u<=t[f+1][0]){Math.abs(r(t[f][1])-a)<8&&(o.x=t[f][0],o.y=t[f][1],o.index=f,o.seriesIndex=e.index);break}},this.drawHit=function(e){var t=e.context,n=e.args,r=e.data,i=e.xScale,s=n.index,o=i(n.x),u=e.yScale(n.y),a;r.length-1>s&&(a=e.xScale(r[s+1][0]),t.save(),t.strokeStyle=e.color,t.lineWidth=e.lineWidth,t.beginPath(),t.moveTo(o,u),t.lineTo(a,u),t.stroke(),t.closePath(),t.restore())},this.clearHit=function(e){var t=e.context,n=e.args,r=e.data,i=e.xScale,s=e.lineWidth,o=n.index,u=i(n.x),a=e.yScale(n.y),f;r.length-1>o&&(f=e.xScale(r[o+1][0]),t.clearRect(u-s,a-s,f-u+2*s,2*s))})}}),Flotr.addType("bars",{options:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,fillOpacity:.4,horizontal:!1,stacked:!1,centered:!0,topPadding:.1,grouped:!1},stack:{positive:[],negative:[],_positive:[],_negative:[]},draw:function(e){var t=e.context;this.current+=1,t.save(),t.lineJoin="miter",t.lineWidth=e.lineWidth,t.strokeStyle=e.color,e.fill&&(t.fillStyle=e.fillStyle),this.plot(e),t.restore()},plot:function(e){var t=e.data,n=e.context,r=e.shadowSize,i,s,o,u,a,f;if(t.length<1)return;this.translate(n,e.horizontal);for(i=0;i<t.length;i++){s=this.getBarGeometry(t[i][0],t[i][1],e);if(s===null)continue;o=s.left,u=s.top,a=s.width,f=s.height,e.fill&&n.fillRect(o,u,a,f),r&&(n.save(),n.fillStyle="rgba(0,0,0,0.05)",n.fillRect(o+r,u+r,a,f),n.restore()),e.lineWidth&&n.strokeRect(o,u,a,f)}},translate:function(e,t){t&&(e.rotate(-Math.PI/2),e.scale(-1,1))},getBarGeometry:function(e,t,n){var r=n.horizontal,i=n.barWidth,s=n.centered,o=n.stacked?this.stack:!1,u=n.lineWidth,a=s?i/2:0,f=r?n.yScale:n.xScale,l=r?n.xScale:n.yScale,c=r?t:e,h=r?e:t,p=0,d,v,m,g,y;return n.grouped&&(this.current/this.groups,c-=a,i/=this.groups,a=i/2,c=c+i*this.current-a),o&&(d=h>0?o.positive:o.negative,p=d[c]||p,d[c]=p+h),v=f(c-a),m=f(c+i-a),g=l(h+p),y=l(p),y<0&&(y=0),e===null||t===null?null:{x:c,y:h,xScale:f,yScale:l,top:g,left:Math.min(v,m)-u/2,width:Math.abs(m-v)-u,height:y-g}},hit:function(e){var t=e.data,n=e.args,r=n[0],i=n[1],s=e.xInverse(r.relX),o=e.yInverse(r.relY),u=this.getBarGeometry(s,o,e),a=u.width/2,f=u.left,l=u.y,c,h;for(h=t.length;h--;)c=this.getBarGeometry(t[h][0],t[h][1],e),(l>0&&l<c.y||l<0&&l>c.y)&&Math.abs(f-c.left)<a&&(i.x=t[h][0],i.y=t[h][1],i.index=h,i.seriesIndex=e.index)},drawHit:function(e){var t=e.context,n=e.args,r=this.getBarGeometry(n.x,n.y,e),i=r.left,s=r.top,o=r.width,u=r.height;t.save(),t.strokeStyle=e.color,t.lineWidth=e.lineWidth,this.translate(t,e.horizontal),t.beginPath(),t.moveTo(i,s+u),t.lineTo(i,s),t.lineTo(i+o,s),t.lineTo(i+o,s+u),e.fill&&(t.fillStyle=e.fillStyle,t.fill()),t.stroke(),t.closePath(),t.restore()},clearHit:function(e){var t=e.context,n=e.args,r=this.getBarGeometry(n.x,n.y,e),i=r.left,s=r.width,o=r.top,u=r.height,a=2*e.lineWidth;t.save(),this.translate(t,e.horizontal),t.clearRect(i-a,Math.min(o,o+u)-a,s+2*a,Math.abs(u)+2*a),t.restore()},extendXRange:function(e,t,n,r){this._extendRange(e,t,n,r),this.groups=this.groups+1||1,this.current=0},extendYRange:function(e,t,n,r){this._extendRange(e,t,n,r)},_extendRange:function(e,t,n,r){var i=e.options.max;if(_.isNumber(i)||_.isString(i))return;var s=e.min,o=e.max,u=n.horizontal,a=e.orientation,f=this.positiveSums||{},l=this.negativeSums||{},c,h,p,d;(a==1&&!u||a==-1&&u)&&n.centered&&(o=Math.max(e.datamax+n.barWidth,o),s=Math.min(e.datamin-n.barWidth,s));if(n.stacked&&(a==1&&u||a==-1&&!u))for(d=t.length;d--;)c=t[d][a==1?1:0]+"",h=t[d][a==1?0:1],h>0?(f[c]=(f[c]||0)+h,o=Math.max(o,f[c])):(l[c]=(l[c]||0)+h,s=Math.min(s,l[c]));(a==1&&u||a==-1&&!u)&&n.topPadding&&(e.max===e.datamax||n.stacked&&this.stackMax!==o)&&(o+=n.topPadding*(o-s)),this.stackMin=s,this.stackMax=o,this.negativeSums=l,this.positiveSums=f,e.max=o,e.min=s}}),Flotr.addType("points",{options:{show:!1,radius:3,lineWidth:2,fill:!0,fillColor:"#FFFFFF",fillOpacity:1,hitRadius:null},draw:function(e){var t=e.context,n=e.lineWidth,r=e.shadowSize;t.save(),r>0&&(t.lineWidth=r/2,t.strokeStyle="rgba(0,0,0,0.1)",this.plot(e,r/2+t.lineWidth/2),t.strokeStyle="rgba(0,0,0,0.2)",this.plot(e,t.lineWidth/2)),t.lineWidth=e.lineWidth,t.strokeStyle=e.color,e.fill&&(t.fillStyle=e.fillStyle),this.plot(e),t.restore()},plot:function(e,t){var n=e.data,r=e.context,i=e.xScale,s=e.yScale,o,u,a;for(o=n.length-1;o>-1;--o){a=n[o][1];if(a===null)continue;u=i(n[o][0]),a=s(a);if(u<0||u>e.width||a<0||a>e.height)continue;r.beginPath(),t?r.arc(u,a+t,e.radius,0,Math.PI,!1):(r.arc(u,a,e.radius,0,2*Math.PI,!0),e.fill&&r.fill()),r.stroke(),r.closePath()}}}),function(){function e(e,t){return e.which?e.which===1:e.button===0||e.button===1}function t(e,t){return Math.min(Math.max(0,e),t.plotWidth-1)}function n(e,t){return Math.min(Math.max(0,e),t.plotHeight)}var r=Flotr.DOM,i=Flotr.EventAdapter,s=Flotr._;Flotr.addPlugin("selection",{options:{pinchOnly:null,mode:null,color:"#B6D9FF",fps:20},callbacks:{"flotr:mouseup":function(e){var t=this.options.selection,n=this.selection,r=this.getEventPosition(e);if(!t||!t.mode)return;n.interval&&clearInterval(n.interval),this.multitouches?n.updateSelection():t.pinchOnly||n.setSelectionPos(n.selection.second,r),n.clearSelection(),n.selecting&&n.selectionIsSane()&&(n.drawSelection(),n.fireSelectEvent(),this.ignoreClick=!0)},"flotr:mousedown":function(t){var n=this.options.selection,r=this.selection,i=this.getEventPosition(t);if(!n||!n.mode)return;if(!n.mode||!e(t)&&s.isUndefined(t.touches))return;n.pinchOnly||r.setSelectionPos(r.selection.first,i),r.interval&&clearInterval(r.interval),this.lastMousePos.pageX=null,r.selecting=!1,r.interval=setInterval(s.bind(r.updateSelection,this),1e3/n.fps)},"flotr:destroy":function(e){clearInterval(this.selection.interval)}},getArea:function(){var e=this.selection.selection,t=this.axes,n=e.first,r=e.second,i,s,o,u;return i=t.x.p2d(e.first.x),s=t.x.p2d(e.second.x),o=t.y.p2d(e.first.y),u=t.y.p2d(e.second.y),{x1:Math.min(i,s),y1:Math.min(o,u),x2:Math.max(i,s),y2:Math.max(o,u),xfirst:i,xsecond:s,yfirst:o,ysecond:u}},selection:{first:{x:-1,y:-1},second:{x:-1,y:-1}},prevSelection:null,interval:null,fireSelectEvent:function(e){var t=this.selection.getArea();e=e||"select",t.selection=this.selection.selection,i.fire(this.el,"flotr:"+e,[t,this])},setSelection:function(e,r){var i=this.options,s=this.axes.x,o=this.axes.y,u=o.scale,a=s.scale,f=i.selection.mode.indexOf("x")!=-1,l=i.selection.mode.indexOf("y")!=-1,h=this.selection.selection;this.selection.clearSelection(),h.first.y=n(f&&!l?0:(o.max-e.y1)*u,this),h.second.y=n(f&&!l?this.plotHeight-1:(o.max-e.y2)*u,this),h.first.x=t(l&&!f?0:(e.x1-s.min)*a,this),h.second.x=t(l&&!f?this.plotWidth:(e.x2-s.min)*a,this),this.selection.drawSelection(),r||this.selection.fireSelectEvent()},setSelectionPos:function(e,r){var i=this.options.selection.mode,s=this.selection.selection;i.indexOf("x")==-1?e.x=e==s.first?0:this.plotWidth:e.x=t(r.relX,this),i.indexOf("y")==-1?e.y=e==s.first?0:this.plotHeight-1:e.y=n(r.relY,this)},drawSelection:function(){this.selection.fireSelectEvent("selecting");var e=this.selection.selection,t=this.octx,n=this.options,r=this.plotOffset,i=this.selection.prevSelection;if(i&&e.first.x==i.first.x&&e.first.y==i.first.y&&e.second.x==i.second.x&&e.second.y==i.second.y)return;t.save(),t.strokeStyle=this.processColor(n.selection.color,{opacity:.8}),t.lineWidth=1,t.lineJoin="miter",t.fillStyle=this.processColor(n.selection.color,{opacity:.4}),this.selection.prevSelection={first:{x:e.first.x,y:e.first.y},second:{x:e.second.x,y:e.second.y}};var s=Math.min(e.first.x,e.second.x),o=Math.min(e.first.y,e.second.y),u=Math.abs(e.second.x-e.first.x),a=Math.abs(e.second.y-e.first.y);t.fillRect(s+r.left+.5,o+r.top+.5,u,a),t.strokeRect(s+r.left+.5,o+r.top+.5,u,a),t.restore()},updateSelection:function(){if(!this.lastMousePos.pageX)return;this.selection.selecting=!0;if(this.multitouches)this.selection.setSelectionPos(this.selection.selection.first,this.getEventPosition(this.multitouches[0])),this.selection.setSelectionPos(this.selection.selection.second,this.getEventPosition(this.multitouches[1]));else{if(this.options.selection.pinchOnly)return;this.selection.setSelectionPos(this.selection.selection.second,this.lastMousePos)}this.selection.clearSelection(),this.selection.selectionIsSane()&&this.selection.drawSelection()},clearSelection:function(){if(!this.selection.prevSelection)return;var e=this.selection.prevSelection,t=1,n=this.plotOffset,r=Math.min(e.first.x,e.second.x),i=Math.min(e.first.y,e.second.y),s=Math.abs(e.second.x-e.first.x),o=Math.abs(e.second.y-e.first.y);this.octx.clearRect(r+n.left-t+.5,i+n.top-t,s+2*t+.5,o+2*t+.5),this.selection.prevSelection=null},selectionIsSane:function(){var e=this.selection.selection;return Math.abs(e.second.x-e.first.x)>=5||Math.abs(e.second.y-e.first.y)>=5}})}(),function(){var e=Flotr.DOM,t=Flotr._;Flotr.addPlugin("legend",{options:{show:!0,noColumns:1,labelFormatter:function(e){return e},labelBoxBorderColor:"#CCCCCC",labelBoxWidth:14,labelBoxHeight:10,labelBoxMargin:5,container:null,position:"nw",margin:5,backgroundColor:"#F0F0F0",backgroundOpacity:.85},callbacks:{"flotr:afterinit":function(){this.legend.insertLegend()}},insertLegend:function(){if(!this.options.legend.show)return;var n=this.series,r=this.plotOffset,i=this.options,s=i.legend,o=[],u=!1,f=this.ctx,l=t.filter(n,function(e){return e.label&&!e.hide}).length,c=s.position,h=s.margin,p=s.backgroundOpacity,d,v,m;if(l){var g=s.labelBoxWidth,y=s.labelBoxHeight,w=s.labelBoxMargin,E=r.left+h,S=r.top+h,x=0,T={size:i.fontSize*1.1,color:i.grid.color};for(d=n.length-1;d>-1;--d){if(!n[d].label||n[d].hide)continue;v=s.labelFormatter(n[d].label),x=Math.max(x,this._text.measureText(v,T).width)}var N=Math.round(g+w*3+x),C=Math.round(l*(w+y)+w);!p&&p!==0&&(p=.1);if(!i.HtmlText&&this.textEnabled&&!s.container){c.charAt(0)=="s"&&(S=r.top+this.plotHeight-(h+C)),c.charAt(0)=="c"&&(S=r.top+this.plotHeight/2-(h+C/2)),c.charAt(1)=="e"&&(E=r.left+this.plotWidth-(h+N)),m=this.processColor(s.backgroundColor,{opacity:p}),f.fillStyle=m,f.fillRect(E,S,N,C),f.strokeStyle=s.labelBoxBorderColor,f.strokeRect(Flotr.toPixel(E),Flotr.toPixel(S),N,C);var k=E+w,L=S+w;for(d=0;d<n.length;d++){if(!n[d].label||n[d].hide)continue;v=s.labelFormatter(n[d].label),f.fillStyle=n[d].color,f.fillRect(k,L,g-1,y-1),f.strokeStyle=s.labelBoxBorderColor,f.lineWidth=1,f.strokeRect(Math.ceil(k)-1.5,Math.ceil(L)-1.5,g+2,y+2),Flotr.drawText(f,v,k+g+w,L+y,T),L+=y+w}}else{for(d=0;d<n.length;++d){if(!n[d].label||n[d].hide)continue;d%s.noColumns===0&&(o.push(u?"</tr><tr>":"<tr>"),u=!0);var A=n[d],O=s.labelBoxWidth,M=s.labelBoxHeight;v=s.labelFormatter(A.label),m="background-color:"+(A.bars&&A.bars.show&&A.bars.fillColor&&A.bars.fill?A.bars.fillColor:A.color)+";",o.push('<td class="flotr-legend-color-box">','<div style="border:1px solid ',s.labelBoxBorderColor,';padding:1px">','<div style="width:',O-1,"px;height:",M-1,"px;border:1px solid ",n[d].color,'">','<div style="width:',O,"px;height:",M,"px;",m,'"></div>',"</div>","</div>","</td>",'<td class="flotr-legend-label">',v,"</td>")}u&&o.push("</tr>");if(o.length>0){var _='<table style="font-size:smaller;color:'+i.grid.color+'">'+o.join("")+"</table>";if(s.container)e.empty(s.container),e.insert(s.container,_);else{var D={position:"absolute",zIndex:"2",border:"1px solid "+s.labelBoxBorderColor};c.charAt(0)=="n"?(D.top=h+r.top+"px",D.bottom="auto"):c.charAt(0)=="c"?(D.top=h+(this.plotHeight-C)/2+"px",D.bottom="auto"):c.charAt(0)=="s"&&(D.bottom=h+r.bottom+"px",D.top="auto"),c.charAt(1)=="e"?(D.right=h+r.right+"px",D.left="auto"):c.charAt(1)=="w"&&(D.left=h+r.left+"px",D.right="auto");var P=e.create("div"),H;P.className="flotr-legend",e.setStyles(P,D),e.insert(P,_),e.insert(this.el,P);if(!p)return;var B=s.backgroundColor||i.grid.backgroundColor||"#ffffff";t.extend(D,e.size(P),{backgroundColor:B,zIndex:"",border:""}),D.width+="px",D.height+="px",P=e.create("div"),P.className="flotr-legend-bg",e.setStyles(P,D),e.opacity(P,p),e.insert(P," "),e.insert(this.el,P)}}}}}})}(),function(){var e=Flotr.DOM,t=Flotr._,n=Flotr,r="opacity:0.7;background-color:#000;color:#fff;display:none;position:absolute;padding:2px 8px;-moz-border-radius:4px;border-radius:4px;white-space:nowrap;";Flotr.addPlugin("hit",{callbacks:{"flotr:mousemove":function(e,t){this.hit.track(t)},"flotr:click":function(e){var n=this.hit.track(e);t.defaults(e,n)},"flotr:mouseout":function(){this.hit.clearHit()},"flotr:destroy":function(){this.mouseTrack=null}},track:function(e){if(this.options.mouse.track||t.any(this.series,function(e){return e.mouse&&e.mouse.track}))return this.hit.hit(e)},executeOnType:function(e,r,i){function s(e,s){t.each(t.keys(n.graphTypes),function(t){e[t]&&e[t].show&&this[t][r]&&(u=this.getOptions(e,t),u.fill=!!e.mouse.fillColor,u.fillStyle=this.processColor(e.mouse.fillColor||"#ffffff",{opacity:e.mouse.fillOpacity}),u.color=e.mouse.lineColor,u.context=this.octx,u.index=s,i&&(u.args=i),this[t][r].call(this[t],u),o=!0)},this)}var o=!1,u;return t.isArray(e)||(e=[e]),t.each(e,s,this),o},drawHit:function(e){var t=this.octx,n=e.series;if(n.mouse.lineColor){t.save(),t.lineWidth=n.points?n.points.lineWidth:1,t.strokeStyle=n.mouse.lineColor,t.fillStyle=this.processColor(n.mouse.fillColor||"#ffffff",{opacity:n.mouse.fillOpacity}),t.translate(this.plotOffset.left,this.plotOffset.top);if(!this.hit.executeOnType(n,"drawHit",e)){var r=e.xaxis,i=e.yaxis;t.beginPath(),t.arc(r.d2p(e.x),i.d2p(e.y),n.points.hitRadius||n.points.radius||n.mouse.radius,0,2*Math.PI,!0),t.fill(),t.stroke(),t.closePath()}t.restore(),this.clip(t)}this.prevHit=e},clearHit:function(){var t=this.prevHit,n=this.octx,r=this.plotOffset;n.save(),n.translate(r.left,r.top);if(t){if(!this.hit.executeOnType(t.series,"clearHit",this.prevHit)){var i=t.series,s=i.points?i.points.lineWidth:1;offset=(i.points.hitRadius||i.points.radius||i.mouse.radius)+s,n.clearRect(t.xaxis.d2p(t.x)-offset,t.yaxis.d2p(t.y)-offset,offset*2,offset*2)}e.hide(this.mouseTrack),this.prevHit=null}n.restore()},hit:function(e){var n=this.options,r=this.prevHit,i,s,o,u,a,f,l,c,h;if(this.series.length===0)return;h={relX:e.relX,relY:e.relY,absX:e.absX,absY:e.absY};if(n.mouse.trackY&&!n.mouse.trackAll&&this.hit.executeOnType(this.series,"hit",[e,h])&&!t.isUndefined(h.seriesIndex))a=this.series[h.seriesIndex],h.series=a,h.mouse=a.mouse,h.xaxis=a.xaxis,h.yaxis=a.yaxis;else{i=this.hit.closest(e);if(i){i=n.mouse.trackY?i.point:i.x,u=i.seriesIndex,a=this.series[u],l=a.xaxis,c=a.yaxis,s=2*a.mouse.sensibility;if(n.mouse.trackAll||i.distanceX<s/l.scale&&(!n.mouse.trackY||i.distanceY<s/c.scale))h.series=a,h.xaxis=a.xaxis,h.yaxis=a.yaxis,h.mouse=a.mouse,h.x=i.x,h.y=i.y,h.dist=i.distance,h.index=i.dataIndex,h.seriesIndex=u}}if(!r||r.index!==h.index||r.seriesIndex!==h.seriesIndex)this.hit.clearHit(),h.series&&h.mouse&&h.mouse.track&&(this.hit.drawMouseTrack(h),this.hit.drawHit(h),Flotr.EventAdapter.fire(this.el,"flotr:hit",[h,this]));return h},closest:function(e){function t(e){e.distance=p,e.distanceX=d,e.distanceY=v,e.seriesIndex=w,e.dataIndex=E,e.x=y,e.y=b,l=!0}var n=this.series,r=this.options,i=e.relX,s=e.relY,o=Number.MAX_VALUE,u=Number.MAX_VALUE,a={},f={},l=!1,c,h,p,d,v,m,g,y,b,w,E;for(w=0;w<n.length;w++){c=n[w],h=c.data,m=c.xaxis.p2d(i),g=c.yaxis.p2d(s);for(E=h.length;E--;){y=h[E][0],b=h[E][1];if(y===null||b===null)continue;if(y<c.xaxis.min||y>c.xaxis.max)continue;d=Math.abs(y-m),v=Math.abs(b-g),p=d*d+v*v,p<o&&(o=p,t(a)),d<u&&(u=d,t(f))}}return l?{point:a,x:f}:!1},drawMouseTrack:function(t){var n="",i=t.series,s=t.mouse.position,o=t.mouse.margin,u=t.x,f=t.y,l=r,c=this.mouseTrack,h=this.plotOffset,p=h.left,v=h.right,m=h.bottom,g=h.top,y=t.mouse.trackDecimals,b=this.options;c||(c=e.node('<div class="flotr-mouse-value"></div>'),this.mouseTrack=c,e.insert(this.el,c));if(!t.mouse.relative)s.charAt(0)=="n"?n+="top:"+(o+g)+"px;bottom:auto;":s.charAt(0)=="s"&&(n+="bottom:"+
(o+m)+"px;top:auto;"),s.charAt(1)=="e"?n+="right:"+(o+v)+"px;left:auto;":s.charAt(1)=="w"&&(n+="left:"+(o+p)+"px;right:auto;");else if(i.pie&&i.pie.show){var w={x:this.plotWidth/2,y:this.plotHeight/2},E=Math.min(this.canvasWidth,this.canvasHeight)*i.pie.sizeRatio/2,S=t.sAngle<t.eAngle?(t.sAngle+t.eAngle)/2:(t.sAngle+t.eAngle+2*Math.PI)/2;n+="bottom:"+(o-g-w.y-Math.sin(S)*E/2+this.canvasHeight)+"px;top:auto;",n+="left:"+(o+p+w.x+Math.cos(S)*E/2)+"px;right:auto;"}else/n/.test(s)?n+="bottom:"+(o-g-t.yaxis.d2p(t.y)+this.canvasHeight)+"px;top:auto;":n+="top:"+(o+g+t.yaxis.d2p(t.y))+"px;bottom:auto;",/w/.test(s)?n+="right:"+(o-p-t.xaxis.d2p(t.x)+this.canvasWidth)+"px;left:auto;":n+="left:"+(o+p+t.xaxis.d2p(t.x))+"px;right:auto;";l+=n,c.style.cssText=l;if(!y||y<0)y=0;u&&u.toFixed&&(u=u.toFixed(y)),f&&f.toFixed&&(f=f.toFixed(y)),c.innerHTML=t.mouse.trackFormatter({x:u,y:f,series:t.series,index:t.index,nearest:t,fraction:t.fraction}),e.show(c),t.mouse.relative&&(/[ew]/.test(s)?/[ns]/.test(s)||(c.style.top=g+t.yaxis.d2p(t.y)-e.size(c).height/2+"px"):c.style.left=p+t.xaxis.d2p(t.x)-e.size(c).width/2+"px")}})}(),function(){var e=Flotr.DOM;Flotr.addPlugin("labels",{callbacks:{"flotr:afterdraw":function(){this.labels.draw()}},draw:function(){function t(e,t,n){var r=n?t.minorTicks:t.ticks,i=t.orientation===1,o=t.n===1,u,a;u={color:t.options.color||b.grid.color,angle:Flotr.toRad(t.options.labelsAngle),textBaseline:"middle"};for(v=0;v<r.length&&(n?t.options.showMinorLabels:t.options.showLabels);++v){s=r[v],s.label+="";if(!s.label||!s.label.length)continue;x=Math.cos(v*h+p)*l,y=Math.sin(v*h+p)*l,u.textAlign=i?Math.abs(x)<.1?"center":x<0?"right":"left":"left",Flotr.drawText(w,s.label,i?x:3,i?y:-(t.ticks[v].v/t.max)*(l-b.fontSize),u)}}function n(e,t,n,r){function i(e){return e.options.showLabels&&e.used}function o(e,t,n,r){return e.plotOffset.left+(t?r:n?-b.grid.labelMargin:b.grid.labelMargin+e.plotWidth)}function u(e,t,n,r){return e.plotOffset.top+(t?b.grid.labelMargin:r)+(t&&n?e.plotHeight:0)}var a=t.orientation===1,f=t.n===1,l,c;l={color:t.options.color||b.grid.color,textAlign:n,textBaseline:r,angle:Flotr.toRad(t.options.labelsAngle)},l=Flotr.getBestTextAlign(l.angle,l);for(v=0;v<t.ticks.length&&i(t);++v){s=t.ticks[v];if(!s.label||!s.label.length)continue;c=t.d2p(s.v);if(c<0||c>(a?e.plotWidth:e.plotHeight))continue;Flotr.drawText(w,s.label,o(e,a,f,c),u(e,a,f,c),l),!a&&!f&&(w.save(),w.strokeStyle=l.color,w.beginPath(),w.moveTo(e.plotOffset.left+e.plotWidth-8,e.plotOffset.top+t.d2p(s.v)),w.lineTo(e.plotOffset.left+e.plotWidth,e.plotOffset.top+t.d2p(s.v)),w.stroke(),w.restore())}}function r(e,t){var n=t.orientation===1,r=t.n===1,i="",o,u,a,l=e.plotOffset;!n&&!r&&(w.save(),w.strokeStyle=t.options.color||b.grid.color,w.beginPath());if(t.options.showLabels&&(r?!0:t.used))for(v=0;v<t.ticks.length;++v){s=t.ticks[v];if(!s.label||!s.label.length||(n?l.left:l.top)+t.d2p(s.v)<0||(n?l.left:l.top)+t.d2p(s.v)>(n?e.canvasWidth:e.canvasHeight))continue;a=l.top+(n?(r?1:-1)*(e.plotHeight+b.grid.labelMargin):t.d2p(s.v)-t.maxLabel.height/2),o=n?l.left+t.d2p(s.v)-f/2:0,i="",v===0?i=" first":v===t.ticks.length-1&&(i=" last"),i+=n?" flotr-grid-label-x":" flotr-grid-label-y",m+=['<div style="position:absolute; text-align:'+(n?"center":"right")+"; ","top:"+a+"px; ",(!n&&!r?"right:":"left:")+o+"px; ","width:"+(n?f:(r?l.left:l.right)-b.grid.labelMargin)+"px; ",t.options.color?"color:"+t.options.color+"; ":" ",'" class="flotr-grid-label'+i+'">'+s.label+"</div>"].join(" "),!n&&!r&&(w.moveTo(l.left+e.plotWidth-8,l.top+t.d2p(s.v)),w.lineTo(l.left+e.plotWidth,l.top+t.d2p(s.v)))}}var i,s,o,u,f,l,c,h,p,d,v,m="",g=0,b=this.options,w=this.ctx,E=this.axes,S={size:b.fontSize};for(v=0;v<E.x.ticks.length;++v)E.x.ticks[v].label&&++g;f=this.plotWidth/g,b.grid.circular&&(w.save(),w.translate(this.plotOffset.left+this.plotWidth/2,this.plotOffset.top+this.plotHeight/2),l=this.plotHeight*b.radar.radiusRatio/2+b.fontSize,c=this.axes.x.ticks.length,h=2*(Math.PI/c),p=-Math.PI/2,t(this,E.x,!1),t(this,E.x,!0),t(this,E.y,!1),t(this,E.y,!0),w.restore()),!b.HtmlText&&this.textEnabled?(n(this,E.x,"center","top"),n(this,E.x2,"center","bottom"),n(this,E.y,"right","middle"),n(this,E.y2,"left","middle")):(E.x.options.showLabels||E.x2.options.showLabels||E.y.options.showLabels||E.y2.options.showLabels)&&!b.grid.circular&&(m="",r(this,E.x),r(this,E.x2),r(this,E.y),r(this,E.y2),w.stroke(),w.restore(),d=e.create("div"),e.setStyles(d,{fontSize:"smaller",color:b.grid.color}),d.className="flotr-labels",e.insert(this.el,d),e.insert(d,m))}})}(),function(){var e=Flotr.DOM,t=Flotr._;Flotr.addPlugin("legend",{options:{show:!0,noColumns:1,labelFormatter:function(e){return e},labelBoxBorderColor:"#CCCCCC",labelBoxWidth:14,labelBoxHeight:10,labelBoxMargin:5,container:null,position:"nw",margin:5,backgroundColor:"#F0F0F0",backgroundOpacity:.85},callbacks:{"flotr:afterinit":function(){this.legend.insertLegend()}},insertLegend:function(){if(!this.options.legend.show)return;var n=this.series,r=this.plotOffset,i=this.options,s=i.legend,o=[],u=!1,f=this.ctx,l=t.filter(n,function(e){return e.label&&!e.hide}).length,c=s.position,h=s.margin,p=s.backgroundOpacity,d,v,m;if(l){var g=s.labelBoxWidth,y=s.labelBoxHeight,w=s.labelBoxMargin,E=r.left+h,S=r.top+h,x=0,T={size:i.fontSize*1.1,color:i.grid.color};for(d=n.length-1;d>-1;--d){if(!n[d].label||n[d].hide)continue;v=s.labelFormatter(n[d].label),x=Math.max(x,this._text.measureText(v,T).width)}var N=Math.round(g+w*3+x),C=Math.round(l*(w+y)+w);!p&&p!==0&&(p=.1);if(!i.HtmlText&&this.textEnabled&&!s.container){c.charAt(0)=="s"&&(S=r.top+this.plotHeight-(h+C)),c.charAt(0)=="c"&&(S=r.top+this.plotHeight/2-(h+C/2)),c.charAt(1)=="e"&&(E=r.left+this.plotWidth-(h+N)),m=this.processColor(s.backgroundColor,{opacity:p}),f.fillStyle=m,f.fillRect(E,S,N,C),f.strokeStyle=s.labelBoxBorderColor,f.strokeRect(Flotr.toPixel(E),Flotr.toPixel(S),N,C);var k=E+w,L=S+w;for(d=0;d<n.length;d++){if(!n[d].label||n[d].hide)continue;v=s.labelFormatter(n[d].label),f.fillStyle=n[d].color,f.fillRect(k,L,g-1,y-1),f.strokeStyle=s.labelBoxBorderColor,f.lineWidth=1,f.strokeRect(Math.ceil(k)-1.5,Math.ceil(L)-1.5,g+2,y+2),Flotr.drawText(f,v,k+g+w,L+y,T),L+=y+w}}else{for(d=0;d<n.length;++d){if(!n[d].label||n[d].hide)continue;d%s.noColumns===0&&(o.push(u?"</tr><tr>":"<tr>"),u=!0);var A=n[d],O=s.labelBoxWidth,M=s.labelBoxHeight;v=s.labelFormatter(A.label),m="background-color:"+(A.bars&&A.bars.show&&A.bars.fillColor&&A.bars.fill?A.bars.fillColor:A.color)+";",o.push('<td class="flotr-legend-color-box">','<div style="border:1px solid ',s.labelBoxBorderColor,';padding:1px">','<div style="width:',O-1,"px;height:",M-1,"px;border:1px solid ",n[d].color,'">','<div style="width:',O,"px;height:",M,"px;",m,'"></div>',"</div>","</div>","</td>",'<td class="flotr-legend-label">',v,"</td>")}u&&o.push("</tr>");if(o.length>0){var _='<table style="font-size:smaller;color:'+i.grid.color+'">'+o.join("")+"</table>";if(s.container)e.empty(s.container),e.insert(s.container,_);else{var D={position:"absolute",zIndex:"2",border:"1px solid "+s.labelBoxBorderColor};c.charAt(0)=="n"?(D.top=h+r.top+"px",D.bottom="auto"):c.charAt(0)=="c"?(D.top=h+(this.plotHeight-C)/2+"px",D.bottom="auto"):c.charAt(0)=="s"&&(D.bottom=h+r.bottom+"px",D.top="auto"),c.charAt(1)=="e"?(D.right=h+r.right+"px",D.left="auto"):c.charAt(1)=="w"&&(D.left=h+r.left+"px",D.right="auto");var P=e.create("div"),H;P.className="flotr-legend",e.setStyles(P,D),e.insert(P,_),e.insert(this.el,P);if(!p)return;var B=s.backgroundColor||i.grid.backgroundColor||"#ffffff";t.extend(D,e.size(P),{backgroundColor:B,zIndex:"",border:""}),D.width+="px",D.height+="px",P=e.create("div"),P.className="flotr-legend-bg",e.setStyles(P,D),e.opacity(P,p),e.insert(P," "),e.insert(this.el,P)}}}}}})}(),function(){var e=Flotr.DOM;Flotr.addPlugin("titles",{callbacks:{"flotr:afterdraw":function(){this.titles.drawTitles()}},drawTitles:function(){var t,n=this.options,r=n.grid.labelMargin,i=this.ctx,s=this.axes;if(!n.HtmlText&&this.textEnabled){var o={size:n.fontSize,color:n.grid.color,textAlign:"center"};n.subtitle&&Flotr.drawText(i,n.subtitle,this.plotOffset.left+this.plotWidth/2,this.titleHeight+this.subtitleHeight-2,o),o.weight=1.5,o.size*=1.5,n.title&&Flotr.drawText(i,n.title,this.plotOffset.left+this.plotWidth/2,this.titleHeight-2,o),o.weight=1.8,o.size*=.8,s.x.options.title&&s.x.used&&(o.textAlign=s.x.options.titleAlign||"center",o.textBaseline="top",o.angle=Flotr.toRad(s.x.options.titleAngle),o=Flotr.getBestTextAlign(o.angle,o),Flotr.drawText(i,s.x.options.title,this.plotOffset.left+this.plotWidth/2,this.plotOffset.top+s.x.maxLabel.height+this.plotHeight+2*r,o)),s.x2.options.title&&s.x2.used&&(o.textAlign=s.x2.options.titleAlign||"center",o.textBaseline="bottom",o.angle=Flotr.toRad(s.x2.options.titleAngle),o=Flotr.getBestTextAlign(o.angle,o),Flotr.drawText(i,s.x2.options.title,this.plotOffset.left+this.plotWidth/2,this.plotOffset.top-s.x2.maxLabel.height-2*r,o)),s.y.options.title&&s.y.used&&(o.textAlign=s.y.options.titleAlign||"right",o.textBaseline="middle",o.angle=Flotr.toRad(s.y.options.titleAngle),o=Flotr.getBestTextAlign(o.angle,o),Flotr.drawText(i,s.y.options.title,this.plotOffset.left-s.y.maxLabel.width-2*r,this.plotOffset.top+this.plotHeight/2,o)),s.y2.options.title&&s.y2.used&&(o.textAlign=s.y2.options.titleAlign||"left",o.textBaseline="middle",o.angle=Flotr.toRad(s.y2.options.titleAngle),o=Flotr.getBestTextAlign(o.angle,o),Flotr.drawText(i,s.y2.options.title,this.plotOffset.left+this.plotWidth+s.y2.maxLabel.width+2*r,this.plotOffset.top+this.plotHeight/2,o))}else{t=[],n.title&&t.push('<div style="position:absolute;top:0;left:',this.plotOffset.left,"px;font-size:1em;font-weight:bold;text-align:center;width:",this.plotWidth,'px;" class="flotr-title">',n.title,"</div>"),n.subtitle&&t.push('<div style="position:absolute;top:',this.titleHeight,"px;left:",this.plotOffset.left,"px;font-size:smaller;text-align:center;width:",this.plotWidth,'px;" class="flotr-subtitle">',n.subtitle,"</div>"),t.push("</div>"),t.push('<div class="flotr-axis-title" style="font-weight:bold;">'),s.x.options.title&&s.x.used&&t.push('<div style="position:absolute;top:',this.plotOffset.top+this.plotHeight+n.grid.labelMargin+s.x.titleSize.height,"px;left:",this.plotOffset.left,"px;width:",this.plotWidth,"px;text-align:",s.x.options.titleAlign,';" class="flotr-axis-title flotr-axis-title-x1">',s.x.options.title,"</div>"),s.x2.options.title&&s.x2.used&&t.push('<div style="position:absolute;top:0;left:',this.plotOffset.left,"px;width:",this.plotWidth,"px;text-align:",s.x2.options.titleAlign,';" class="flotr-axis-title flotr-axis-title-x2">',s.x2.options.title,"</div>"),s.y.options.title&&s.y.used&&t.push('<div style="position:absolute;top:',this.plotOffset.top+this.plotHeight/2-s.y.titleSize.height/2,"px;left:0;text-align:",s.y.options.titleAlign,';" class="flotr-axis-title flotr-axis-title-y1">',s.y.options.title,"</div>"),s.y2.options.title&&s.y2.used&&t.push('<div style="position:absolute;top:',this.plotOffset.top+this.plotHeight/2-s.y.titleSize.height/2,"px;right:0;text-align:",s.y2.options.titleAlign,';" class="flotr-axis-title flotr-axis-title-y2">',s.y2.options.title,"</div>"),t=t.join("");var u=e.create("div");e.setStyles({color:n.grid.color}),u.className="flotr-titles",e.insert(this.el,u),e.insert(u,t)}}})}(),function(){function e(){var e=this.options,t=this.handles,n=this.el,r,i,s,o;if(!e.selection.mode||!e.handles.show||"ontouchstart"in n)return;t.initialized=!0,o=l.node('<div class="flotr-handles"></div>'),e=e.handles,e.drag&&(s=l.node('<div class="flotr-handles-handle flotr-handles-drag flotr-handles-right"></div>'),i=l.node('<div class="flotr-handles-handle flotr-handles-drag flotr-handles-left"></div>'),l.insert(o,s),l.insert(o,i),l.hide(i),l.hide(s),t.left=i,t.right=s,this.observe(i,"mousedown",function(){t.moveHandler=u}),this.observe(s,"mousedown",function(){t.moveHandler=a})),e.scroll&&(r=l.node('<div class="flotr-handles-handle flotr-handles-scroll"></div>'),l.insert(o,r),l.hide(r),t.scroll=r,this.observe(r,"mousedown",function(){t.moveHandler=f})),this.observe(document,"mouseup",function(){t.moveHandler=null}),l.insert(n,o)}function t(e){if(!this.handles.initialized)return;var t=this.handles,i=this.options.handles,s=t.left,o=t.right,u=t.scroll;i&&(i.drag&&(n(this,s,e.x1),n(this,o,e.x2)),i.scroll&&r(this,u,e.x1,e.x2))}function n(e,t,n){l.show(t);var r=l.size(t),i=Math.round(e.axes.x.d2p(n)-r.width/2),s=(e.plotHeight-r.height)/2;l.setStyles(t,{left:i+"px",top:s+"px"})}function r(e,t,n,r){l.show(t);var i=l.size(t),s=Math.round(e.axes.x.d2p(n)),o=e.plotHeight-i.height/2,u=e.axes.x.d2p(r)-e.axes.x.d2p(n);l.setStyles(t,{left:s+"px",top:o+"px",width:u+"px"})}function i(){if(!this.handles.initialized)return;var e=this.handles;e&&(l.hide(e.left),l.hide(e.right),l.hide(e.scroll))}function s(e,t){if(!this.handles.initialized)return;if(!this.handles.moveHandler)return;var n=t.x-this.lastMousePos.x,r=this.selection.selection,i=this.selection.getArea(),s=this.handles;s.moveHandler(i,n),o(i,s),this.selection.setSelection(i)}function o(e,t){var n=t.moveHandler;e.x1>e.x2&&(n==u?n=a:n==a&&(n=u),t.moveHandler=n)}function u(e,t){e.x1+=t}function a(e,t){e.x2+=t}function f(e,t){e.x1+=t,e.x2+=t}var l=Flotr.DOM;Flotr.addPlugin("handles",{options:{show:!1,drag:!0,scroll:!0},callbacks:{"flotr:afterinit":e,"flotr:select":t,"flotr:mousedown":i,"flotr:mousemove":s}})}(),!function(e,t){typeof define=="function"?define(t):typeof module!="undefined"?module.exports=t():this[e]=t()}("bonzo",function(){function e(e){return new RegExp("(^|\\s+)"+e+"(\\s+|$)")}function t(e,t,n){for(var r=0,i=e.length;r<i;r++)t.call(n||e[r],e[r],r,e);return e}function n(e){return e.replace(/-(.)/g,function(e,t){return t.toUpperCase()})}function r(e){return e&&e.nodeName&&e.nodeType==1}function i(e,t,n,r){for(r=0,j=e.length;r<j;++r)if(t.call(n,e[r],r,e))return!0;return!1}function s(e,n,r){var i=0,s=n||this,o=[],u=E&&typeof e=="string"&&e.charAt(0)!="<"?function(t){return(t=E(e))&&(t.selected=1)&&t}():e;return t(c(u),function(e){t(s,function(t){var n=!t[w]||t[w]&&!t[w][w]?function(){var e=t.cloneNode(!0);return s.$&&s.cloneEvents&&s.$(e).cloneEvents(t),e}():t;r(e,n),o[i]=n,i++})},this),t(o,function(e,t){s[t]=e}),s.length=i,s}function o(e,t,n){var r=v(e),i=r.css("position"),s=r.offset(),o="relative",u=i==o,a=[parseInt(r.css("left"),10),parseInt(r.css("top"),10)];i=="static"&&(r.css("position",o),i=o),isNaN(a[0])&&(a[0]=u?0:e.offsetLeft),isNaN(a[1])&&(a[1]=u?0:e.offsetTop),t!=null&&(e.style.left=t-s.left+a[0]+M),n!=null&&(e.style.top=n-s.top+a[1]+M)}function u(t,n){return e(n).test(t.className)}function a(e,t){e.className=F(e.className+" "+t)}function f(t,n){t.className=F(t.className.replace(e(n)," "))}function l(e){this.length=0;if(e){e=typeof e!="string"&&!e.nodeType&&typeof e.length!="undefined"?e:[e],this.length=e.length;for(var t=0;t<e.length;t++)this[t]=e[t]}}function c(e){return typeof e=="string"?v.create(e):r(e)?[e]:e}function h(e,t,n){var r=this[0];return e==null&&t==null?(p(r)?d():{x:r.scrollLeft,y:r.scrollTop})[n]:(p(r)?g.scrollTo(e,t):(e!=null&&(r.scrollLeft=e),t!=null&&(r.scrollTop=t)),this)}function p(e){return e===g||/^(?:body|html)$/i.test(e.tagName)}function d(){return{x:g.pageXOffset||b.scrollLeft,y:g.pageYOffset||b.scrollTop}}function v(e,t){return new l(e,t)}var m=this,g=window,y=g.document,b=y.documentElement,w="parentNode",E=null,S=/^checked|value|selected$/,x=/select|fieldset|table|tbody|tfoot|td|tr|colgroup/i,T="table",N={thead:T,tbody:T,tfoot:T,tr:"tbody",th:"tr",td:"tr",fieldset:"form",option:"select"},C=/^checked|selected$/,k=/msie/i.test(navigator.userAgent),L=[],A=0,O=/^-?[\d\.]+$/,M="px",_="setAttribute",D="getAttribute",P=/(^\s*|\s*$)/g,H={lineHeight:1,zoom:1,zIndex:1,opacity:1},B=function(){var e=["webkitTransform","MozTransform","OTransform","msTransform","Transform"],t;for(t=0;t<e.length;t++)if(e[t]in y.createElement("a").style)return e[t]}(),F=String.prototype.trim?function(e){return e.trim()}:function(e){return e.replace(P,"")},I=y.defaultView&&y.defaultView.getComputedStyle?function(e,t){t=t=="transform"?B:t,t=t=="transform-origin"?B+"Origin":t;var r=null;t=="float"&&(t="cssFloat");var i=y.defaultView.getComputedStyle(e,"");return i&&(r=i[n(t)]),e.style[t]||r}:k&&b.currentStyle?function(e,t){t=n(t),t=t=="float"?"styleFloat":t;if(t=="opacity"){var r=100;try{r=e.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch(i){try{r=e.filters("alpha").opacity}catch(s){}}return r/100}var o=e.currentStyle?e.currentStyle[t]:null;return e.style[t]||o}:function(e,t){return e.style[n(t)]};l.prototype={get:function(e){return this[e]},each:function(e,n){return t(this,e,n)},map:function(e,t){var n=[],r,i;for(i=0;i<this.length;i++)r=e.call(this,this[i],i),t?t(r)&&n.push(r):n.push(r);return n},first:function(){return v(this[0])},last:function(){return v(this[this.length-1])},html:function(e,n){function r(n){while(n.firstChild)n.removeChild(n.firstChild);t(c(e),function(e){n.appendChild(e)})}var i=n?b.textContent===null?"innerText":"textContent":"innerHTML",s;return typeof e!="undefined"?this.each(function(t){(s=t.tagName.match(x))?r(t,s[0]):t[i]=e}):this[0]?this[0][i]:""},text:function(e){return this.html(e,1)},addClass:function(e){return this.each(function(t){u(t,e)||a(t,e)})},removeClass:function(e){return this.each(function(t){u(t,e)&&f(t,e)})},hasClass:function(e){return i(this,function(t){return u(t,e)})},toggleClass:function(e,t){return this.each(function(n){typeof t!="undefined"?t?a(n,e):f(n,e):u(n,e)?f(n,e):a(n,e)})},show:function(e){return this.each(function(t){t.style.display=e||""})},hide:function(e){return this.each(function(e){e.style.display="none"})},append:function(e){return this.each(function(n){t(c(e),function(e){n.appendChild(e)})})},prepend:function(e){return this.each(function(n){var r=n.firstChild;t(c(e),function(e){n.insertBefore(e,r)})})},appendTo:function(e,t){return s.call(this,e,t,function(e,t){e.appendChild(t)})},prependTo:function(e,t){return s.call(this,e,t,function(e,t){e.insertBefore(t,e.firstChild)})},next:function(){return this.related("nextSibling")},previous:function(){return this.related("previousSibling")},related:function(e){return this.map(function(t){t=t[e];while(t&&t.nodeType!==1)t=t[e];return t||0},function(e){return e})},before:function(e){return this.each(function(n){t(v.create(e),function(e){n[w].insertBefore(e,n)})})},after:function(e){return this.each(function(n){t(v.create(e),function(e){n[w].insertBefore(e,n.nextSibling)})})},insertBefore:function(e,t){return s.call(this,e,t,function(e,t){e[w].insertBefore(t,e)})},insertAfter:function(e,t){return s.call(this,e,t,function(e,t){var n=e.nextSibling;n?e[w].insertBefore(t,n):e[w].appendChild(t)})},css:function(e,t,r){function i(e,t,r){for(var i in s)s.hasOwnProperty(i)&&(r=s[i],(t=n(i))&&O.test(r)&&!(t in H)&&(r+=M),t=t=="transform"?B:t,t=t=="transformOrigin"?B+"Origin":t,e.style[t]=r)}if(t===undefined&&typeof e=="string")return t=this[0],t?t==y||t==g?(r=t==y?v.doc():v.viewport(),e=="width"?r.width:e=="height"?r.height:""):I(t,e):null;var s=e;typeof e=="string"&&(s={},s[e]=t),k&&s.opacity&&(s.filter="alpha(opacity="+s.opacity*100+")",s.zoom=e.zoom||1,delete s.opacity);if(t=s["float"])k?s.styleFloat=t:s.cssFloat=t,delete s["float"];return this.each(i)},offset:function(e,t){if(typeof e=="number"||typeof t=="number")return this.each(function(n){o(n,e,t)});var n=this[0],r=n.offsetWidth,i=n.offsetHeight,s=n.offsetTop,u=n.offsetLeft;while(n=n.offsetParent)s+=n.offsetTop,u+=n.offsetLeft;return{top:s,left:u,height:i,width:r}},attr:function(e,t){var n=this[0];if(typeof e=="string"||e instanceof String)return typeof t=="undefined"?S.test(e)?C.test(e)&&typeof n[e]=="string"?!0:n[e]:n[D](e):this.each(function(n){S.test(e)?n[e]=t:n[_](e,t)});for(var r in e)e.hasOwnProperty(r)&&this.attr(r,e[r]);return this},val:function(e){return typeof e=="string"?this.attr("value",e):this[0].value},removeAttr:function(e){return this.each(function(t){C.test(e)?t[e]=!1:t.removeAttribute(e)})},data:function(e,t){var n=this[0];if(typeof t=="undefined"){n[D]("data-node-uid")||n[_]("data-node-uid",++A);var r=n[D]("data-node-uid");return L[r]||(L[r]={}),L[r][e]}return this.each(function(n){n[D]("data-node-uid")||n[_]("data-node-uid",++A);var r=n[D]("data-node-uid"),i=L[r]||(L[r]={});i[e]=t})},remove:function(){return this.each(function(e){e[w]&&e[w].removeChild(e)})},empty:function(){return this.each(function(e){while(e.firstChild)e.removeChild(e.firstChild)})},detach:function(){return this.map(function(e){return e[w].removeChild(e)})},scrollTop:function(e){return h.call(this,null,e,"y")},scrollLeft:function(e){return h.call(this,e,null,"x")},toggle:function(e){return this.each(function(e){e.style.display=e.offsetWidth||e.offsetHeight?"none":"block"}),e&&e(),this}},v.setQueryEngine=function(e){E=e,delete v.setQueryEngine},v.aug=function(e,t){for(var n in e)e.hasOwnProperty(n)&&((t||l.prototype)[n]=e[n])},v.create=function(e){return typeof e=="string"?function(){var t=/^<([^\s>]+)/.exec(e),n=y.createElement(t&&N[t[1].toLowerCase()]||"div"),r=[];n.innerHTML=e;var i=n.childNodes;n=n.firstChild,r.push(n);while(n=n.nextSibling)n.nodeType==1&&r.push(n);return r}():r(e)?[e.cloneNode(!0)]:[]},v.doc=function(){var e=this.viewport();return{width:Math.max(y.body.scrollWidth,b.scrollWidth,e.width),height:Math.max(y.body.scrollHeight,b.scrollHeight,e.height)}},v.firstChild=function(e){for(var t=e.childNodes,n=0,r=t&&t.length||0,i;n<r;n++)t[n].nodeType===1&&(i=t[r=n]);return i},v.viewport=function(){return{width:k?b.clientWidth:self.innerWidth,height:k?b.clientHeight:self.innerHeight}},v.isAncestor="compareDocumentPosition"in b?function(e,t){return(e.compareDocumentPosition(t)&16)==16}:"contains"in b?function(e,t){return e!==t&&e.contains(t)}:function(e,t){while(t=t[w])if(t===e)return!0;return!1};var q=m.bonzo;return v.noConflict=function(){return m.bonzo=q,this},v});var envision={_:Flotr._,bean:Flotr.bean,bonzo:bonzo,noConflict:function(e){var t=e.envision;return function(){return e.envision=t,this}}(this)};(function(){function e(e){this.options=e||{},this.components=[],this.node=null,this.rendered=!1}var t="envision-first",n="envision-last",r='<div class="envision-visualization"></div>';T_COMPONENT_CONTAINER='<div class="envision-component-container"></div>',e.prototype={render:function(e){var t=this.options;e=e||t.element;if(!e)throw"No element to render within.";return this.node=bonzo.create(r)[0],bonzo(this.node).addClass(t.name||""),this.container=e,bonzo(e).append(this.node),bonzo(e).data("envision",this),_.each(this.components,function(e){this._renderComponent(e)},this),this._updateClasses(),this.rendered=!0,this},add:function(e){return this.components.push(e),this.rendered&&(this._renderComponent(e),this._updateClasses()),this},remove:function(e){var t=this.components,n=this.indexOf(e);return n!==-1&&(t.splice(n,1),bonzo(e.container).remove(),this._updateClasses()),this},setPosition:function(e,t){var n=this.components;return t>=0&&t<n.length&&this.remove(e)&&(this.rendered&&(t===n.length?this.node.appendChild(e.container):this.node.insertBefore(e.container,n[t].container)),n.splice(t,0,e),this._updateClasses()),this},indexOf:function(e){return _.indexOf(this.components,e)},getComponent:function(e){var t=this.components;if(e<t.length)return t[e]},isFirst:function(e){return this.indexOf(e)===0?!0:!1},isLast:function(e){return this.indexOf(e)===this.components.length-1?!0:!1},destroy:function(){_.each(this.components,function(e){e.destroy()}),bonzo(this.container).empty()},_renderComponent:function(e){var t=bonzo.create(T_COMPONENT_CONTAINER)[0];bonzo(this.node).append(t),e.render(t)},_updateClasses:function(){var e=this.components,r=0,i=e.length-1,s;_.each(e,function(e,o){s=bonzo(e.container),o===r?s.addClass(t):s.removeClass(t),o===i?s.addClass(n):s.removeClass(n)})}},envision.Visualization=e})(),function(){function e(e){e=e||{};var n=bonzo.create(r)[0];this.options=e,this.node=n,e.adapter?this.api=e.adapter:e.adapterConstructor?this.api=new e.adapterConstructor(e.config):e.adapterCallback?this.api=e.adapterCallback.call(null,e.config):e.config&&(this.api=new t.adapters.flotr.Child(e.config||{})),this.preprocessors=[]}var t=envision,n="envision-component",r='<div class="'+n+'"></div>';e.prototype={render:function(e){var t=this.node,n=this.options;e=e||n.element;if(!e)throw"No element to render within.";bonzo(e).addClass(n.name||"").append(this.node),this._setDimension("width"),this._setDimension("height"),this.container=e,this.draw(n.data,n.config)},draw:function(e,n){var r=this.api,i=this.options,s=this.preprocessors,o;o=e=e||i.data,n=n||i.config,!i.skipPreprocess&&e&&(o=[],_.each(r.getDataArray(e),function(u,l){var h=s[l]||new t.Preprocessor,p=_.isArray(u),v=_.isFunction(u),m=p?u:v?u:u.data,y=i.processData,w=r.range(n),E=w.min,S=w.max,x=this.node.clientWidth,T=u,N,C;!v&&!p&&(T=u.data,C=_.extend({},u)),v?N=e(E,S,x):(T!==h.data?h.setData(T):h.reset(),y?(y.apply(this,[{preprocessor:h,min:E,max:S,resolution:x}]),N=h.getData()):N=h.bound(E,S).subsampleMinMax(x).getData()),r.transformData&&(N=r.transformData(N)),C?(C.data=N,o.push(C)):o.push(N)},this)),r&&r.draw(o,n,this.node)},trigger:function(){this.api.trigger.apply(this.api,Array.prototype.concat.apply([this],arguments))},attach:function(){this.api.attach.apply(this.api,Array.prototype.concat.apply([this],arguments))},detach:function(){this.api.detach.apply(this.api,Array.prototype.concat.apply([this],arguments))},destroy:function(){this.api&&this.api.destroy&&this.api.destroy(),bonzo(this.container).empty()},_setDimension:function(e){var t=this.node,n=this.options;n[e]?bonzo(t).css(e,n[e]):n[e]=t.clientWidth,this[e]=n[e]}},t.Component=e}(),function(){function e(e){this.options=e=e||{},this.actions=[],this.actionOptions=[],this.followers=[],this.leaders=[],this.prevent={},e.leader&&this.leader(e.leader)}var t=envision;e.prototype={leader:function(e){return this.leaders.push(e),_.each(this.actions,function(t,n){this._bindLeader(e,t,this.actionOptions[n])},this),this},follower:function(e){return this.followers.push(e),this},group:function(e){return _.isArray(e)||(e=[e]),_.each(e,function(e){this.leader(e),this.follower(e)},this),this},add:function(e,t){return this.actions.push(e),this.actionOptions.push(t),_.each(this.leaders,function(n){this._bindLeader(n,e,t)},this),this},_bindLeader:function(e,t,n){_.each(t.events,function(t){var r=t.handler||t,i=t.consumer||t;e.attach(r,_.bind(function(e,t){if(this.prevent[name])return;n&&n.callback&&n.callback.call(this,t),this.prevent[name]=!0;try{_.each(this.followers,function(n){if(e===n)return;n.trigger(i,t)},this)}catch(r){throw this.prevent[name]=!1,r}this.prevent[name]=!1},this))},this)}},t.Interaction=e}(),function(){function e(e){e=e||{},this.getData=function(){return this.bounded&&r(this),this.processing},this.reset=function(){return this.processing=this.data,this},this.setData=function(e){var t,n;if(!_.isArray(e))throw new Error("Array expected.");if(e.length<2)throw new Error("Data must contain at least two dimensions.");n=e[0].length;for(t=e.length;t--;){if(!_.isArray(e[t]))throw new Error("Data dimensions must be arrays.");if(e[t].length!==n)throw new Error("Data dimensions must contain the same number of points.")}return this.processing=e,this.data=e,this},e.data&&this.setData(e.data)}function t(e,t){var n=_.sortedIndex(e,t);return e[n]>t&&n>0&&n--,n}function n(e,t){return _.sortedIndex(e,t)}function r(e){delete e.bounded;var r=e.processing,i=e.length(),s=r[0],o=r[1],u=e.min||0,a=e.max||i,f=t(s,u),l=n(s,a);e.processing=[s.slice(f,l+1),o.slice(f,l+1)],e.start=f,e.end=l}function i(e,t,n,r,i,s,o,u,a){var f=(e-r)/(s-r),l=1-f,c=(1+2*f)*l*l,h=f*l*l,p=f*f*(3-2*f),d=f*f*(f-1),v=(o-i)/(2*(s-r))+(typeof n=="undefined"?0:(i-n)/(2*(r-t))),m=(typeof a=="undefined"?0:(a-o)/(2*(u-s)))+(o-i)/(2*(s-r)),g=c*i+h*(s-r)*v+p*o+d*(s-r)*m;return g}e.prototype={length:function(){return this.getData()[0].length},bound:function(e,t){return!_.isNumber(e)||!_.isNumber(t)?this:(this.min=e,this.max=t,this.bounded=!0,this)},subsampleMinMax:function(e){var r=this.bounded;delete this.bounded;var i=this.processing,s=this.length(),o=i[0],u=i[1],a=r?t(o,this.min):0,f=r?n(o,this.max):s-1,l=(e-2)/2,h=[],p=[],d=Number.MAX_VALUE,v=-Number.MAX_VALUE,m=1,g=1,y=(f-a)/l,w,E,S,x;if(f-a+1>e){h.push(o[a]),p.push(u[a]),w=a+y;for(S=a;S<f;S++)S===Math.round(w)?(w+=y,x=Math.min(g,m),h.push(o[x]),p.push(u[x]),x=Math.max(g,m),h.push(o[x]),p.push(u[x]),m=S,d=u[m],g=S,v=u[g]):(u[S]>v&&(v=u[S],g=S),u[S]<d&&(d=u[S],m=S));S<w&&(h.push(o[m]),p.push(d),h.push(o[g]),p.push(v)),h.push(o[f]),p.push(u[f]),this.processing=[h,p],this.start=a,this.end=f}else this.bounded=r;return this},subsample:function(e){var r=this.bounded;delete this.bounded;var i=this.processing,s=this.length(),o=i[0],u=i[1],a=r?t(o,this.min):0,f=r?n(o,this.max):s-1,l=(f-a+1)/e,h=[],p=[],d,v;if(f-a+1>e){h.push(o[a]),p.push(u[a]);for(d=1;d<e;d++){if(d*l>=f-l)break;v=Math.round(d*l)+a,h.push(o[v]),p.push(u[v])}h.push(o[f]),p.push(u[f]),this.processing=[h,p],this.start=a,this.end=f}else this.bounded=r;return this},interpolate:function(e){var r=this.bounded;delete this.bounded;var s=this.processing,o=this.length(),u=s[0],a=s[1],f=r?t(u,this.min):0,l=r?n(u,this.max):o-1,h=(u[l]-u[f])/e,p=[],d=[],v,m,g;p.push(u[f]),d.push(a[f]);if(l-f+1<e){for(v=f;v<l;v++){g=u[v+1]-u[v],p.push(u[v]),d.push(a[v]);for(m=u[v+0]+h;m<u[v+1];m+=h)p.push(m),d.push(i(m,u[v-1],a[v-1],u[v+0],a[v+0],u[v+1],a[v+1],u[v+2],a[v+2]))}this.processing=[p,d],this.start=f,this.end=l}return this}},envision.Preprocessor=e}(),envision.actions=envision.actions||{},envision.actions.hit={events:["hit","mouseout"]},envision.actions.selection={events:[{handler:"select",consumer:"zoom"},{handler:"click",consumer:"reset"}]},envision.actions.zoom={events:[{handler:"select",consumer:"zoom"},"zoom","reset"]},envision.adapters=envision.adapters||{},envision.adapters.flotr={},envision.adapters.defaultOptions={grid:{outlineWidth:0,labelMargin:0,horizontalLines:!1,verticalLines:!1},bars:{show:!1,barWidth:.5,fill:!0,lineWidth:1,fillOpacity:1},lines:{lineWidth:1},xaxis:{margin:!1,tickDecimals:0,showLabels:!1},yaxis:{margin:!1,showLabels:!1},shadowSize:!1},function(){function e(e){this.options=e||{},this.flotr=null,this._flotrDefaultOptions()}function t(e,t){var n=e.options.config.selection.mode,r=e.api.flotr.axes,i,s,o,u,a;return n.indexOf("x")!==-1&&(i={},i.min=t.x1,i.max=t.x2,o={},o.min=r.x.d2p(t.x1),o.max=r.x.d2p(t.x2)),n.indexOf("y")!==-1&&(s={},s.min=t.y1,s.max=t.y2,u={},u.min=r.y.d2p(t.y1),u.max=r.y.d2p(t.y2)),a={data:{x:i,y:s},x:o,y:u},a}var n=envision,r=envision.adapters,i=Flotr.EventAdapter,s=r.defaultOptions;e.prototype={destroy:function(){this.flotr.destroy()},draw:function(e,t,n){var r=this.options;e=this.getDataArray(e||r.data),t?t=Flotr.merge(t,Flotr.clone(r)):t=r,r.data=e;if(!t)throw"No graph submitted.";this.flotr=Flotr.draw(n,e,t)},range:function(e){var t=e.xaxis;return{min:t.min,max:t.max}},transformData:function(e){var t=e[0].length,n=e.length,r=[],i,s,o;for(s=0;s<t;s++){i=[];for(o=0;o<n;o++)i.push(e[o][s]);r.push(i)}return r},getDataArray:function(e){return e[0]&&(!_.isArray(e[0])||!e[0].length||e[0][0]&&_.isArray(e[0][0]))?e:[e]},_flotrDefaultOptions:function(e){var t=e||this.options,n;for(n in s)s.hasOwnProperty(n)&&(_.isUndefined(t[n])?t[n]=s[n]:_.defaults(t[n],s[n]))},attach:function(e,t,n){var r=this.events[t]||{},s=r.handler||!1;return t=r.name||!1,s?i.observe(e.node,t,function(){var t=[e].concat(Array.prototype.slice.call(arguments)),r=s.apply(this,t);return n.apply(null,[e,r])}):!1},detach:function(e,t,n){return i.stopObserve(e.node,t,handler)},trigger:function(e,t,n){var r=this.events[t],i=r.consumer||!1;return i?i.apply(this,[e,n]):!1},events:{hit:{name:"flotr:hit",handler:function(e,t){var n=t.x,r=t.y,i=e.api.flotr,s;return s={data:{index:t.index,x:n,y:r},x:i.axes.x.d2p(n),y:i.axes.y.d2p(r)},s},consumer:function(e,t){var n=e.api.flotr,r;r={x:t.data.x,y:t.data.y||1,relX:t.x,relY:t.y||1},n.hit.hit(r)}},select:{name:"flotr:selecting",handler:t,consumer:function(e,t){var n=e.api.flotr,r=n.axes,i=t.data||{},s={},o=t.x,u=t.y;!o&&i.x?(o=i.x,s.x1=o.min,s.x2=o.max):o&&(s.x1=r.x.p2d(o.min),s.x2=r.x.p2d(o.max)),!u&&i.y?(u=i.y,s.y1=u.min,s.y2=u.max):u&&(s.y1=r.y.d2p(u.min),s.y2=r.y.d2p(u.max)),n.selection.setSelection(s)}},zoom:{name:"flotr:select",handler:function(e,n){var r=t(e,n);return e.trigger("zoom",r),r},consumer:function(e,t){var n=t.data.x,r=t.data.y,i={};n&&(i.xaxis={min:n.min,max:n.max}),r&&(i.yaxis={min:r.min,max:r.max}),e.draw(null,i)}},mouseout:{name:"flotr:mouseout",handler:function(e){},consumer:function(e){e.api.flotr.hit.clearHit()}},reset:{name:"flotr:click",handler:function(e){e.draw()},consumer:function(e){e.draw()}},click:{name
:"flotr:click",handler:function(e){var t=e.api.flotr.axes.x.min,n=e.api.flotr.axes.x.max;return{data:{x:{min:t,max:n}},x:{min:e.api.flotr.axes.x.d2p(t),max:e.api.flotr.axes.x.d2p(n)}}},consumer:function(e,t){var n=t.data.x,r=t.data.y,i={};n&&(i.xaxis={min:n.min,max:n.max}),r&&(i.yaxis={min:r.min,max:r.max}),e.draw(null,i)}}}},r.flotr.Child=e}(),Flotr.addType("lite-lines",{options:{show:!1,lineWidth:2,fill:!1,fillBorder:!1,fillColor:null,fillOpacity:.4},draw:function(e){var t=e.context,n=e.lineWidth,r=e.shadowSize,i;t.save(),t.lineCap="butt",t.lineWidth=n,t.strokeStyle=e.color,this.plot(e),t.restore()},plot:function(e){var t=e.context,n=e.xScale,r=e.yScale,s=e.data,o=s.length-1,u=r(0),a,f;if(o<1)return;a=n(s[0][0]),f=r(s[0][1]),t.beginPath(),t.moveTo(a,f);for(i=0;i<o;++i)t.lineTo(n(s[i+1][0]),r(s[i+1][1]));(!e.fill||e.fill&&!e.fillBorder)&&t.stroke(),e.fill&&(a=n(s[0][0]),t.fillStyle=e.fillStyle,t.lineTo(n(s[o][0]),u),t.lineTo(a,u),t.lineTo(a,r(s[0][1])),t.fill(),e.fillBorder&&t.stroke())},extendYRange:function(e,t,n,r){var i=e.options;if(!i.max&&i.max!==0||!i.min&&i.min!==0)e.max+=n.lineWidth*.01,e.min-=n.lineWidth*.01}}),Flotr.addType("whiskers",{options:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,fillOpacity:.4,horizontal:!1,stacked:!1,centered:!0},stack:{positive:[],negative:[],_positive:[],_negative:[]},draw:function(e){var t=e.context;t.save(),t.lineJoin="miter",t.lineCap="butt",t.lineWidth=e.lineWidth,t.strokeStyle=e.color,e.fill&&(t.fillStyle=e.fillStyle),this.plot(e),t.restore()},plot:function(e){var t=e.data,n=e.context,r=e.shadowSize,i=e.xScale,s=e.yScale,o=s(0),u,a;if(t.length<1)return;n.translate(-e.lineWidth,0),n.beginPath();for(u=0;u<t.length;u++)a=i(t[u][0]),n.moveTo(a,o),n.lineTo(a,s(t[u][1]));n.closePath(),n.stroke()},drawHit:function(e){var t=e.args,n=e.context,r=e.shadowSize,i=e.xScale,s=e.yScale,o=s(0),u=i(t.x),a=s(t.y);n.save(),n.translate(-e.lineWidth,0),n.beginPath(),n.moveTo(u,o),n.lineTo(u,a),n.closePath(),n.stroke(),n.restore()},clearHit:function(e){var t=e.args,n=e.context,r=e.shadowSize,i=e.xScale,s=e.yScale,o=e.lineWidth,u=s(0),a=i(t.x),f=s(t.y);n.save(),n.clearRect(a-2*o,f-o,4*o,u-f+o),n.restore()}}),envision.components=envision.components||{},function(){function e(e){this.options=e||{}}e.prototype={height:null,width:null,rendered:!1,render:function(e){var t=document.createElement("canvas"),n=bonzo(e).offset();this.height=n.height,this.width=n.width,bonzo(t).attr("height",n.height).attr("width",n.width).css({position:"absolute",top:"0px",left:"0px"}),e.appendChild(t),bonzo(e).css({position:"relative"}),typeof FlashCanvas!="undefined"&&FlashCanvas.initElement(t),this.context=t.getContext("2d"),this.rendered=!0},draw:function(e,t,n){this.rendered||this.render(n);var r=this.context,i=this.height,s=this.width,o=Math.round(i/2)-.5,u,a;t=t||{min:s/2,max:s/2},u=t.min+.5,a=t.max+.5,r.clearRect(0,0,s,i);if(u||a)r.save(),r.strokeStyle=this.options.strokeStyle||"#B6D9FF",r.fillStyle=this.options.fillStyle||"rgba(182, 217, 255, .4)",r.beginPath(),u<=1?(r.moveTo(0,i),r.lineTo(0,-0.5)):(r.moveTo(u,i),r.quadraticCurveTo(u,o,Math.max(u-o,u/2),o),r.lineTo(Math.min(o,u/2),o),r.quadraticCurveTo(0,o,.5,-0.5)),r.lineTo(s-.5,-0.5),a>=s-1?r.lineTo(a,i):(r.quadraticCurveTo(s,o,Math.max(s-o,s-(s-a)/2),o),r.lineTo(Math.min(a+o,s-(s-a)/2),o),r.quadraticCurveTo(a,o,a,i)),r.stroke(),r.closePath(),r.fill(),r.restore()},trigger:function(e,t,n){t==="zoom"?this.zoom(e,n):t==="reset"&&this.reset(e)},zoom:function(e,t){var n=t.x||{},r=n.min,i=n.max,s=e.api;e.draw(null,{min:r,max:i})},reset:function(e){e.draw(null,{min:e.width/2,max:e.width/2})}},envision.components.QuadraticDrawing=e}(),envision.templates=envision.templates||{},function(){function e(e){var t=e.resolution;e.preprocessor.bound(e.min,e.max).subsampleMinMax(t+Math.round(t/3))}function t(){return{price:{name:"envision-finance-price",config:{"lite-lines":{lineWidth:1,show:!0,fill:!0,fillOpacity:.2},mouse:{track:!0,trackY:!1,trackAll:!0,sensibility:1,trackDecimals:4,position:"ne"},yaxis:{autoscale:!0,autoscaleMargin:.05,noTicks:4,showLabels:!0}},processData:e},volume:{name:"envision-finance-volume",config:{whiskers:{show:!0,lineWidth:2},mouse:{track:!0,trackY:!1,trackAll:!0},yaxis:{autoscale:!0,autoscaleMargin:.5}},processData:e},summary:{name:"envision-finance-summary",config:{"lite-lines":{show:!0,lineWidth:1,fill:!0,fillOpacity:.2,fillBorder:!0},xaxis:{noTicks:5,showLabels:!0},yaxis:{autoscale:!0,autoscaleMargin:.1},handles:{show:!0},selection:{mode:"x"},grid:{verticalLines:!1}}},connection:{name:"envision-finance-connection",adapterConstructor:r.components.QuadraticDrawing}}}function n(e){var n=e.data,i=t(),s=new r.Visualization({name:"envision-finance"}),o=new r.Interaction,u=new r.Interaction,f,l,h,p;e.defaults&&(i=Flotr.merge(e.defaults,i)),i.price.data=n.price,i.volume.data=n.volume,i.summary.data=n.summary,i.price.config.mouse.trackFormatter=e.trackFormatter||function(e){var t=e.index,r;return f.api.preprocessor&&(t+=f.api.preprocessor.start),r="Price: $"+n.price[1][t]+", Vol: "+n.volume[1][t],r},e.xTickFormatter&&(i.summary.config.xaxis.tickFormatter=e.xTickFormatter),i.price.config.yaxis.tickFormatter=e.yTickFormatter||function(e){return"$"+e},f=new r.Component(i.price),l=new r.Component(i.volume),h=new r.Component(i.connection),p=new r.Component(i.summary),s.add(f).add(l).add(h).add(p).render(e.container),o.follower(f).follower(l).follower(h).leader(p).add(r.actions.selection,e.selectionCallback?{callback:e.selectionCallback}:null),u.group([f,l]).add(r.actions.hit),e.selection&&p.trigger("select",e.selection),this.vis=s,this.selection=o,this.hit=u,this.price=f,this.volume=l,this.summary=p}var r=envision;r.templates.Finance=n}(),function(){function e(){return{detail:{name:"envision-timeseries-detail",config:{"lite-lines":{lineWidth:1,show:!0}}},summary:{name:"envision-timeseries-summary",config:{"lite-lines":{lineWidth:1,show:!0},handles:{show:!0},selection:{mode:"x"},yaxis:{autoscale:!0,autoscaleMargin:.1}}},connection:{name:"envision-timeseries-connection",adapterConstructor:n.components.QuadraticDrawing}}}function t(t){var r=t.data,i=e(),s=new n.Visualization({name:"envision-timeseries"}),o=new n.Interaction,u,f,l;t.defaults&&(i=Flotr.merge(t.defaults,i)),i.detail.data=r.detail,i.summary.data=r.summary,u=new n.Component(i.detail),l=new n.Component(i.connection),f=new n.Component(i.summary),s.add(u).add(l).add(f).render(t.container),o.follower(u).follower(l).leader(f).add(n.actions.selection,t.selectionCallback?{callback:t.selectionCallback}:null),t.selection&&f.trigger("select",t.selection),this.vis=s,this.selection=o,this.detail=u,this.summary=f}var n=envision;n.templates.TimeSeries=t}(),function(){function e(){return{name:"zoom"}}function t(){return{name:"summary",config:{handles:{show:!0},selection:{mode:"x"}}}}function n(e,t){var n=_.defaults(e,t);return n.flotr=_.defaults(n.flotr,t.flotr),n}var r=envision,i;i=function(i){var s=new r.Visualization,o=new r.Component(n(i.zoom||{},e())),u=new r.Component(n(i.summary||{},t())),f=new r.Interaction({leader:u});s.add(o).add(u),f.add(r.actions.selection),f.follower(o),this.vis=s,this.interaction=f,i.container&&this.render(i.container)},i.prototype={render:function(e){this.vis.render(e)}},r.templates.Zoom=i}();(function(e,t){function n(n,r){function i(e){return u.preferFlash&&Lt&&!u.ignoreFlash&&u.flash[e]!==t&&u.flash[e]}function s(e){return function(t){var n=this._s;return!n||!n._a?null:e.call(this,t)}}this.setupOptions={url:n||null,flashVersion:8,debugMode:!0,debugFlash:!1,useConsole:!0,consoleOnly:!0,waitForWindowLoad:!1,bgColor:"#ffffff",useHighPerformance:!1,flashPollingInterval:null,html5PollingInterval:null,flashLoadTimeout:1e3,wmode:null,allowScriptAccess:"always",useFlashBlock:!1,useHTML5Audio:!0,html5Test:/^(probably|maybe)$/i,preferFlash:!1,noSWFCache:!1,idPrefix:"sound"},this.defaultOptions={autoLoad:!1,autoPlay:!1,from:null,loops:1,onid3:null,onload:null,whileloading:null,onplay:null,onpause:null,onresume:null,whileplaying:null,onposition:null,onstop:null,onfailure:null,onfinish:null,multiShot:!0,multiShotEvents:!1,position:null,pan:0,stream:!0,to:null,type:null,usePolicyFile:!1,volume:100},this.flash9Options={isMovieStar:null,usePeakData:!1,useWaveformData:!1,useEQData:!1,onbufferchange:null,ondataerror:null},this.movieStarOptions={bufferTime:3,serverURL:null,onconnect:null,duration:null},this.audioFormats={mp3:{type:['audio/mpeg; codecs="mp3"',"audio/mpeg","audio/mp3","audio/MPA","audio/mpa-robust"],required:!0},mp4:{related:["aac","m4a","m4b"],type:['audio/mp4; codecs="mp4a.40.2"',"audio/aac","audio/x-m4a","audio/MP4A-LATM","audio/mpeg4-generic"],required:!1},ogg:{type:["audio/ogg; codecs=vorbis"],required:!1},opus:{type:["audio/ogg; codecs=opus","audio/opus"],required:!1},wav:{type:['audio/wav; codecs="1"',"audio/wav","audio/wave","audio/x-wav"],required:!1}},this.movieID="sm2-container",this.id=r||"sm2movie",this.debugID="soundmanager-debug",this.debugURLParam=/([#?&])debug=1/i,this.versionNumber="V2.97a.20131201",this.altURL=this.movieURL=this.version=null,this.enabled=this.swfLoaded=!1,this.oMC=null,this.sounds={},this.soundIDs=[],this.didFlashBlock=this.muted=!1,this.filePattern=null,this.filePatterns={flash8:/\.mp3(\?.*)?$/i,flash9:/\.mp3(\?.*)?$/i},this.features={buffering:!1,peakData:!1,waveformData:!1,eqData:!1,movieStar:!1},this.sandbox={},this.html5={usingFlash:null},this.flash={},this.ignoreFlash=this.html5Only=!1;var o,u=this,a=null,f=null,l,c=navigator.userAgent,h=e.location.href.toString(),p=document,d,v,m,y,b=[],w=!1,E=!1,S=!1,x=!1,T=!1,N,C,L,A,O,M,_,D,P,H,B,j,F,I,q,R,U,z,W,X,V,$,J,K,Q,G,Y=null,Z=null,et,tt,nt,rt,it,st,ot=!1,ut=!1,at,ft,lt,ct=0,ht=null,pt,dt=[],vt,mt=null,gt,yt,bt,wt,Et,St,xt,Tt,Nt=Array.prototype.slice,Ct=!1,kt,Lt,At,Ot,Mt,_t,Dt=0,Pt=c.match(/(ipad|iphone|ipod)/i),Ht=c.match(/android/i),Bt=c.match(/msie/i),jt=c.match(/webkit/i),Ft=c.match(/safari/i)&&!c.match(/chrome/i),It=c.match(/opera/i),qt=c.match(/(mobile|pre\/|xoom)/i)||Pt||Ht,Rt=!h.match(/usehtml5audio/i)&&!h.match(/sm2\-ignorebadua/i)&&Ft&&!c.match(/silk/i)&&c.match(/OS X 10_6_([3-7])/i),Ut=p.hasFocus!==t?p.hasFocus():null,zt=Ft&&(p.hasFocus===t||!p.hasFocus()),Wt=!zt,Xt=/(mp3|mp4|mpa|m4a|m4b)/i,Vt=p.location?p.location.protocol.match(/http/i):null,$t=Vt?"":"http://",Jt=/^\s*audio\/(?:x-)?(?:mpeg4|aac|flv|mov|mp4||m4v|m4a|m4b|mp4v|3gp|3g2)\s*(?:$|;)/i,Kt="mpeg4 aac flv mov mp4 m4v f4v m4a m4b mp4v 3gp 3g2".split(" "),Qt=RegExp("\\.("+Kt.join("|")+")(\\?.*)?$","i");this.mimePattern=/^\s*audio\/(?:x-)?(?:mp(?:eg|3))\s*(?:$|;)/i,this.useAltURL=!Vt;var Gt;try{Gt=Audio!==t&&(It&&opera!==t&&10>opera.version()?new Audio(null):new Audio).canPlayType!==t}catch(Yt){Gt=!1}this.hasHTML5=Gt,this.setup=function(e){var n=!u.url;return e!==t&&S&&mt&&u.ok(),L(e),e&&(n&&z&&e.url!==t&&u.beginDelayedInit(),!z&&e.url!==t&&"complete"===p.readyState&&setTimeout(R,1)),u},this.supported=this.ok=function(){return mt?S&&!x:u.useHTML5Audio&&u.hasHTML5},this.getMovie=function(t){return l(t)||p[t]||e[t]},this.createSound=function(e,n){function r(){return i=rt(i),u.sounds[i.id]=new o(i),u.soundIDs.push(i.id),u.sounds[i.id]}var i,s=null;if(!S||!u.ok())return!1;n!==t&&(e={id:e,url:n}),i=C(e),i.url=pt(i.url),void 0===i.id&&(i.id=u.setupOptions.idPrefix+Dt++);if(st(i.id,!0))return u.sounds[i.id];if(yt(i))s=r(),s._setup_html5(i);else{if(u.html5Only||u.html5.usingFlash&&i.url&&i.url.match(/data\:/i))return r();8<y&&null===i.isMovieStar&&(i.isMovieStar=!!i.serverURL||!!(i.type&&i.type.match(Jt)||i.url&&i.url.match(Qt))),i=it(i,void 0),s=r(),8===y?f._createSound(i.id,i.loops||1,i.usePolicyFile):(f._createSound(i.id,i.url,i.usePeakData,i.useWaveformData,i.useEQData,i.isMovieStar,i.isMovieStar?i.bufferTime:!1,i.loops||1,i.serverURL,i.duration||null,i.autoPlay,!0,i.autoLoad,i.usePolicyFile),i.serverURL||(s.connected=!0,i.onconnect&&i.onconnect.apply(s))),!i.serverURL&&(i.autoLoad||i.autoPlay)&&s.load(i)}return!i.serverURL&&i.autoPlay&&s.play(),s},this.destroySound=function(e,t){if(!st(e))return!1;var n=u.sounds[e],r;n._iO={},n.stop(),n.unload();for(r=0;r<u.soundIDs.length;r++)if(u.soundIDs[r]===e){u.soundIDs.splice(r,1);break}return t||n.destruct(!0),delete u.sounds[e],!0},this.load=function(e,t){return st(e)?u.sounds[e].load(t):!1},this.unload=function(e){return st(e)?u.sounds[e].unload():!1},this.onposition=this.onPosition=function(e,t,n,r){return st(e)?u.sounds[e].onposition(t,n,r):!1},this.clearOnPosition=function(e,t,n){return st(e)?u.sounds[e].clearOnPosition(t,n):!1},this.start=this.play=function(e,t){var n=null,r=t&&!(t instanceof Object);if(!S||!u.ok())return!1;if(st(e,r))r&&(t={url:t});else{if(!r)return!1;r&&(t={url:t}),t&&t.url&&(t.id=e,n=u.createSound(t).play())}return null===n&&(n=u.sounds[e].play(t)),n},this.setPosition=function(e,t){return st(e)?u.sounds[e].setPosition(t):!1},this.stop=function(e){return st(e)?u.sounds[e].stop():!1},this.stopAll=function(){for(var e in u.sounds)u.sounds.hasOwnProperty(e)&&u.sounds[e].stop()},this.pause=function(e){return st(e)?u.sounds[e].pause():!1},this.pauseAll=function(){var e;for(e=u.soundIDs.length-1;0<=e;e--)u.sounds[u.soundIDs[e]].pause()},this.resume=function(e){return st(e)?u.sounds[e].resume():!1},this.resumeAll=function(){var e;for(e=u.soundIDs.length-1;0<=e;e--)u.sounds[u.soundIDs[e]].resume()},this.togglePause=function(e){return st(e)?u.sounds[e].togglePause():!1},this.setPan=function(e,t){return st(e)?u.sounds[e].setPan(t):!1},this.setVolume=function(e,t){return st(e)?u.sounds[e].setVolume(t):!1},this.mute=function(e){var t=0;e instanceof String&&(e=null);if(e)return st(e)?u.sounds[e].mute():!1;for(t=u.soundIDs.length-1;0<=t;t--)u.sounds[u.soundIDs[t]].mute();return u.muted=!0},this.muteAll=function(){u.mute()},this.unmute=function(e){e instanceof String&&(e=null);if(e)return st(e)?u.sounds[e].unmute():!1;for(e=u.soundIDs.length-1;0<=e;e--)u.sounds[u.soundIDs[e]].unmute();return u.muted=!1,!0},this.unmuteAll=function(){u.unmute()},this.toggleMute=function(e){return st(e)?u.sounds[e].toggleMute():!1},this.getMemoryUse=function(){var e=0;return f&&8!==y&&(e=parseInt(f._getMemoryUse(),10)),e},this.disable=function(n){var r;n===t&&(n=!1);if(x)return!1;x=!0;for(r=u.soundIDs.length-1;0<=r;r--)K(u.sounds[u.soundIDs[r]]);return N(n),Tt.remove(e,"load",_),!0},this.canPlayMIME=function(e){var t;return u.hasHTML5&&(t=bt({type:e})),!t&&mt&&(t=e&&u.ok()?!!(8<y&&e.match(Jt)||e.match(u.mimePattern)):null),t},this.canPlayURL=function(e){var t;return u.hasHTML5&&(t=bt({url:e})),!t&&mt&&(t=e&&u.ok()?!!e.match(u.filePattern):null),t},this.canPlayLink=function(e){return e.type!==t&&e.type&&u.canPlayMIME(e.type)?!0:u.canPlayURL(e.href)},this.getSoundById=function(e,t){return e?u.sounds[e]:null},this.onready=function(t,n){if("function"!=typeof t)throw et("needFunction","onready");return n||(n=e),O("onready",t,n),M(),!0},this.ontimeout=function(t,n){if("function"!=typeof t)throw et("needFunction","ontimeout");return n||(n=e),O("ontimeout",t,n),M({type:"ontimeout"}),!0},this._wD=this._writeDebug=function(e,t){return!0},this._debug=function(){},this.reboot=function(t,n){var r,i,s;for(r=u.soundIDs.length-1;0<=r;r--)u.sounds[u.soundIDs[r]].destruct();if(f)try{Bt&&(Z=f.innerHTML),Y=f.parentNode.removeChild(f)}catch(o){}Z=Y=mt=f=null,u.enabled=z=S=ot=ut=w=E=x=Ct=u.swfLoaded=!1,u.soundIDs=[],u.sounds={},Dt=0;if(t)b=[];else for(r in b)if(b.hasOwnProperty(r)){i=0;for(s=b[r].length;i<s;i++)b[r][i].fired=!1}return u.html5={usingFlash:null},u.flash={},u.html5Only=!1,u.ignoreFlash=!1,e.setTimeout(function(){q(),n||u.beginDelayedInit()},20),u},this.reset=function(){return u.reboot(!0,!0)},this.getMoviePercent=function(){return f&&"PercentLoaded"in f?f.PercentLoaded():null},this.beginDelayedInit=function(){T=!0,R(),setTimeout(function(){return ut?!1:(X(),I(),ut=!0)},20),D()},this.destruct=function(){u.disable(!0)},o=function(e){var n,r,i=this,s,o,l,c,h,p,d=!1,v=[],m=0,g,b,w=null,E;r=n=null,this.sID=this.id=e.id,this.url=e.url,this._iO=this.instanceOptions=this.options=C(e),this.pan=this.options.pan,this.volume=this.options.volume,this.isHTML5=!1,this._a=null,E=this.url?!1:!0,this.id3={},this._debug=function(){},this.load=function(e){var n=null,r;e!==t?i._iO=C(e,i.options):(e=i.options,i._iO=e,w&&w!==i.url&&(i._iO.url=i.url,i.url=null)),i._iO.url||(i._iO.url=i.url),i._iO.url=pt(i._iO.url),r=i.instanceOptions=i._iO;if(!r.url&&!i.url)return i;if(r.url===i.url&&0!==i.readyState&&2!==i.readyState)return 3===i.readyState&&r.onload&&_t(i,function(){r.onload.apply(i,[!!i.duration])}),i;i.loaded=!1,i.readyState=1,i.playState=0,i.id3={};if(yt(r))n=i._setup_html5(r),n._called_load||(i._html5_canplay=!1,i.url!==r.url&&(i._a.src=r.url,i.setPosition(0)),i._a.autobuffer="auto",i._a.preload="auto",i._a._called_load=!0);else{if(u.html5Only||i._iO.url&&i._iO.url.match(/data\:/i))return i;try{i.isHTML5=!1,i._iO=it(rt(r)),r=i._iO,8===y?f._load(i.id,r.url,r.stream,r.autoPlay,r.usePolicyFile):f._load(i.id,r.url,!!r.stream,!!r.autoPlay,r.loops||1,!!r.autoLoad,r.usePolicyFile)}catch(s){V({type:"SMSOUND_LOAD_JS_EXCEPTION",fatal:!0})}}return i.url=r.url,i},this.unload=function(){return 0!==i.readyState&&(i.isHTML5?(c(),i._a&&(i._a.pause(),w=Et(i._a))):8===y?f._unload(i.id,"about:blank"):f._unload(i.id),s()),i},this.destruct=function(e){i.isHTML5?(c(),i._a&&(i._a.pause(),Et(i._a),Ct||l(),i._a._s=null,i._a=null)):(i._iO.onfailure=null,f._destroySound(i.id)),e||u.destroySound(i.id,!0)},this.start=this.play=function(e,n){var r,s,o,a,l;s=!0,s=null,n=n===t?!0:n,e||(e={}),i.url&&(i._iO.url=i.url),i._iO=C(i._iO,i.options),i._iO=C(e,i._iO),i._iO.url=pt(i._iO.url),i.instanceOptions=i._iO;if(!i.isHTML5&&i._iO.serverURL&&!i.connected)return i.getAutoPlay()||i.setAutoPlay(!0),i;yt(i._iO)&&(i._setup_html5(i._iO),h()),1===i.playState&&!i.paused&&(r=i._iO.multiShot,r||(i.isHTML5&&i.setPosition(i._iO.position),s=i));if(null!==s)return s;e.url&&e.url!==i.url&&(!i.readyState&&!i.isHTML5&&8===y&&E?E=!1:i.load(i._iO)),i.loaded||(0===i.readyState?(!i.isHTML5&&!u.html5Only?(i._iO.autoPlay=!0,i.load(i._iO)):i.isHTML5?i.load(i._iO):s=i,i.instanceOptions=i._iO):2===i.readyState&&(s=i));if(null!==s)return s;!i.isHTML5&&9===y&&0<i.position&&i.position===i.duration&&(e.position=0);if(i.paused&&0<=i.position&&(!i._iO.serverURL||0<i.position))i.resume();else{i._iO=C(e,i._iO);if(null!==i._iO.from&&null!==i._iO.to&&0===i.instanceCount&&0===i.playState&&!i._iO.serverURL){r=function(){i._iO=C(e,i._iO),i.play(i._iO)},i.isHTML5&&!i._html5_canplay?(i.load({_oncanplay:r}),s=!1):!i.isHTML5&&!i.loaded&&(!i.readyState||2!==i.readyState)&&(i.load({onload:r}),s=!1);if(null!==s)return s;i._iO=b()}(!i.instanceCount||i._iO.multiShotEvents||i.isHTML5&&i._iO.multiShot&&!Ct||!i.isHTML5&&8<y&&!i.getAutoPlay())&&i.instanceCount++,i._iO.onposition&&0===i.playState&&p(i),i.playState=1,i.paused=!1,i.position=i._iO.position!==t&&!isNaN(i._iO.position)?i._iO.position:0,i.isHTML5||(i._iO=it(rt(i._iO))),i._iO.onplay&&n&&(i._iO.onplay.apply(i),d=!0),i.setVolume(i._iO.volume,!0),i.setPan(i._iO.pan,!0),i.isHTML5?2>i.instanceCount?(h(),s=i._setup_html5(),i.setPosition(i._iO.position),s.play()):(o=new Audio(i._iO.url),a=function(){Tt.remove(o,"ended",a),i._onfinish(i),Et(o),o=null},l=function(){Tt.remove(o,"canplay",l);try{o.currentTime=i._iO.position/1e3}catch(e){}o.play()},Tt.add(o,"ended",a),void 0!==i._iO.volume&&(o.volume=Math.max(0,Math.min(1,i._iO.volume/100))),i.muted&&(o.muted=!0),i._iO.position?Tt.add(o,"canplay",l):o.play()):(s=f._start(i.id,i._iO.loops||1,9===y?i.position:i.position/1e3,i._iO.multiShot||!1),9===y&&!s&&i._iO.onplayerror&&i._iO.onplayerror.apply(i))}return i},this.stop=function(e){var t=i._iO;return 1===i.playState&&(i._onbufferchange(0),i._resetOnPosition(0),i.paused=!1,i.isHTML5||(i.playState=0),g(),t.to&&i.clearOnPosition(t.to),i.isHTML5?i._a&&(e=i.position,i.setPosition(0),i.position=e,i._a.pause(),i.playState=0,i._onTimer(),c()):(f._stop(i.id,e),t.serverURL&&i.unload()),i.instanceCount=0,i._iO={},t.onstop&&t.onstop.apply(i)),i},this.setAutoPlay=function(e){i._iO.autoPlay=e,i.isHTML5||(f._setAutoPlay(i.id,e),e&&!i.instanceCount&&1===i.readyState&&i.instanceCount++)},this.getAutoPlay=function(){return i._iO.autoPlay},this.setPosition=function(e){e===t&&(e=0);var n=i.isHTML5?Math.max(e,0):Math.min(i.duration||i._iO.duration,Math.max(e,0));i.position=n,e=i.position/1e3,i._resetOnPosition(i.position),i._iO.position=n;if(i.isHTML5){if(i._a){if(i._html5_canplay){if(i._a.currentTime!==e)try{i._a.currentTime=e,(0===i.playState||i.paused)&&i._a.pause()}catch(r){}}else if(e)return i;i.paused&&i._onTimer(!0)}}else e=9===y?i.position:e,i.readyState&&2!==i.readyState&&f._setPosition(i.id,e,i.paused||!i.playState,i._iO.multiShot);return i},this.pause=function(e){return i.paused||0===i.playState&&1!==i.readyState?i:(i.paused=!0,i.isHTML5?(i._setup_html5().pause(),c()):(e||e===t)&&f._pause(i.id,i._iO.multiShot),i._iO.onpause&&i._iO.onpause.apply(i),i)},this.resume=function(){var e=i._iO;return i.paused?(i.paused=!1,i.playState=1,i.isHTML5?(i._setup_html5().play(),h()):(e.isMovieStar&&!e.serverURL&&i.setPosition(i.position),f._pause(i.id,e.multiShot)),!d&&e.onplay?(e.onplay.apply(i),d=!0):e.onresume&&e.onresume.apply(i),i):i},this.togglePause=function(){return 0===i.playState?(i.play({position:9===y&&!i.isHTML5?i.position:i.position/1e3}),i):(i.paused?i.resume():i.pause(),i)},this.setPan=function(e,n){return e===t&&(e=0),n===t&&(n=!1),i.isHTML5||f._setPan(i.id,e),i._iO.pan=e,n||(i.pan=e,i.options.pan=e),i},this.setVolume=function(e,n){return e===t&&(e=100),n===t&&(n=!1),i.isHTML5?i._a&&(u.muted&&!i.muted&&(i.muted=!0,i._a.muted=!0),i._a.volume=Math.max(0,Math.min(1,e/100))):f._setVolume(i.id,u.muted&&!i.muted||i.muted?0:e),i._iO.volume=e,n||(i.volume=e,i.options.volume=e),i},this.mute=function(){return i.muted=!0,i.isHTML5?i._a&&(i._a.muted=!0):f._setVolume(i.id,0),i},this.unmute=function(){i.muted=!1;var e=i._iO.volume!==t;return i.isHTML5?i._a&&(i._a.muted=!1):f._setVolume(i.id,e?i._iO.volume:i.options.volume),i},this.toggleMute=function(){return i.muted?i.unmute():i.mute()},this.onposition=this.onPosition=function(e,n,r){return v.push({position:parseInt(e,10),method:n,scope:r!==t?r:i,fired:!1}),i},this.clearOnPosition=function(e,t){var n;e=parseInt(e,10);if(isNaN(e))return!1;for(n=0;n<v.length;n++)e===v[n].position&&(!t||t===v[n].method)&&(v[n].fired&&m--,v.splice(n,1))},this._processOnPosition=function(){var e,t;e=v.length;if(!e||!i.playState||m>=e)return!1;for(e-=1;0<=e;e--)t=v[e],!t.fired&&i.position>=t.position&&(t.fired=!0,m++,t.method.apply(t.scope,[t.position]));return!0},this._resetOnPosition=function(e){var t,n;t=v.length;if(!t)return!1;for(t-=1;0<=t;t--)n=v[t],n.fired&&e<=n.position&&(n.fired=!1,m--);return!0},b=function(){var e=i._iO,t=e.from,n=e.to,r,s;return s=function(){i.clearOnPosition(n,s),i.stop()},r=function(){null!==n&&!isNaN(n)&&i.onPosition(n,s)},null!==t&&!isNaN(t)&&(e.position=t,e.multiShot=!1,r()),e},p=function(){var e,t=i._iO.onposition;if(t)for(e in t)t.hasOwnProperty(e)&&i.onPosition(parseInt(e,10),t[e])},g=function(){var e,t=i._iO.onposition;if(t)for(e in t)t.hasOwnProperty(e)&&i.clearOnPosition(parseInt(e,10))},h=function(){i.isHTML5&&at(i)},c=function(){i.isHTML5&&ft(i)},s=function(e){e||(v=[],m=0),d=!1,i._hasTimer=null,i._a=null,i._html5_canplay=!1,i.bytesLoaded=null,i.bytesTotal=null,i.duration=i._iO&&i._iO.duration?i._iO.duration:null,i.durationEstimate=null,i.buffered=[],i.eqData=[],i.eqData.left=[],i.eqData.right=[],i.failures=0,i.isBuffering=!1,i.instanceOptions={},i.instanceCount=0,i.loaded=!1,i.metadata={},i.readyState=0,i.muted=!1,i.paused=!1,i.peakData={left:0,right:0},i.waveformData={left:[],right:[]},i.playState=0,i.position=null,i.id3={}},s(),this._onTimer=function(e){var t,s=!1,o={};if(i._hasTimer||e)return i._a&&(e||(0<i.playState||1===i.readyState)&&!i.paused)&&(t=i._get_html5_duration(),t!==n&&(n=t,i.duration=t,s=!0),i.durationEstimate=i.duration,t=1e3*i._a.currentTime||0,t!==r&&(r=t,s=!0),(s||e)&&i._whileplaying(t,o,o,o,o)),s},this._get_html5_duration=function(){var e=i._iO;return(e=i._a&&i._a.duration?1e3*i._a.duration:e&&e.duration?e.duration:null)&&!isNaN(e)&&Infinity!==e?e:null},this._apply_loop=function(e,t){e.loop=1<t?"loop":""},this._setup_html5=function(e){e=C(i._iO,e);var t=Ct?a:i._a,n=decodeURI(e.url),r;Ct?n===decodeURI(kt)&&(r=!0):n===decodeURI(w)&&(r=!0);if(t){if(t._s)if(Ct)t._s&&t._s.playState&&!r&&t._s.stop();else if(!Ct&&n===decodeURI(w))return i._apply_loop(t,e.loops),t;r||(w&&s(!1),t.src=e.url,kt=w=i.url=e.url,t._called_load=!1)}else e.autoLoad||e.autoPlay?(i._a=new Audio(e.url),i._a.load()):i._a=It&&10>opera.version()?new Audio(null):new Audio,t=i._a,t._called_load=!1,Ct&&(a=t);return i.isHTML5=!0,i._a=t,t._s=i,o(),i._apply_loop(t,e.loops),e.autoLoad||e.autoPlay?i.load():(t.autobuffer=!1,t.preload="auto"),t},o=function(){if(i._a._added_events)return!1;var e;i._a._added_events=!0;for(e in Mt)Mt.hasOwnProperty(e)&&i._a&&i._a.addEventListener(e,Mt[e],!1);return!0},l=function(){var e;i._a._added_events=!1;for(e in Mt)Mt.hasOwnProperty(e)&&i._a&&i._a.removeEventListener(e,Mt[e],!1)},this._onload=function(e){var t=!!e||!i.isHTML5&&8===y&&i.duration;return i.loaded=t,i.readyState=t?3:2,i._onbufferchange(0),i._iO.onload&&_t(i,function(){i._iO.onload.apply(i,[t])}),!0},this._onbufferchange=function(e){return 0===i.playState||e&&i.isBuffering||!e&&!i.isBuffering?!1:(i.isBuffering=1===e,i._iO.onbufferchange&&i._iO.onbufferchange.apply(i),!0)},this._onsuspend=function(){return i._iO.onsuspend&&i._iO.onsuspend.apply(i),!0},this._onfailure=function(e,t,n){i.failures++,i._iO.onfailure&&1===i.failures&&i._iO.onfailure(i,e,t,n)},this._onfinish=function(){var e=i._iO.onfinish;i._onbufferchange(0),i._resetOnPosition(0),i.instanceCount&&(i.instanceCount--,i.instanceCount||(g(),i.playState=0,i.paused=!1,i.instanceCount=0,i.instanceOptions={},i._iO={},c(),i.isHTML5&&(i.position=0)),(!i.instanceCount||i._iO.multiShotEvents)&&e&&_t(i,function(){e.apply(i)}))},this._whileloading=function(e,t,n,r){var s=i._iO;i.bytesLoaded=e,i.bytesTotal=t,i.duration=Math.floor(n),i.bufferLength=r,i.durationEstimate=!i.isHTML5&&!s.isMovieStar?s.duration?i.duration>s.duration?i.duration:s.duration:parseInt(i.bytesTotal/i.bytesLoaded*i.duration,10):i.duration,i.isHTML5||(i.buffered=[{start:0,end:i.duration}]),(3!==i.readyState||i.isHTML5)&&s.whileloading&&s.whileloading.apply(i)},this._whileplaying=function(e,n,r,s,o){var u=i._iO;return isNaN(e)||null===e?!1:(i.position=Math.max(0,e),i._processOnPosition(),!i.isHTML5&&8<y&&(u.usePeakData&&n!==t&&n&&(i.peakData={left:n.leftPeak,right:n.rightPeak}),u.useWaveformData&&r!==t&&r&&(i.waveformData={left:r.split(","),right:s.split(",")}),u.useEQData&&o!==t&&o&&o.leftEQ&&(e=o.leftEQ.split(","),i.eqData=e,i.eqData.left=e,o.rightEQ!==t&&o.rightEQ&&(i.eqData.right=o.rightEQ.split(",")))),1===i.playState&&(!i.isHTML5&&8===y&&!i.position&&i.isBuffering&&i._onbufferchange(0),u.whileplaying&&u.whileplaying.apply(i)),!0)},this._oncaptiondata=function(e){i.captiondata=e,i._iO.oncaptiondata&&i._iO.oncaptiondata.apply(i,[e])},this._onmetadata=function(e,t){var n={},r,s;r=0;for(s=e.length;r<s;r++)n[e[r]]=t[r];i.metadata=n,i._iO.onmetadata&&i._iO.onmetadata.apply(i)},this._onid3=function(e,t){var n=[],r,s;r=0;for(s=e.length;r<s;r++)n[e[r]]=t[r];i.id3=C(i.id3,n),i._iO.onid3&&i._iO.onid3.apply(i)},this._onconnect=function(e){e=1===e;if(i.connected=e)i.failures=0,st(i.id)&&(i.getAutoPlay()?i.play(t,i.getAutoPlay()):i._iO.autoLoad&&i.load()),i._iO.onconnect&&i._iO.onconnect.apply(i,[e])},this._ondataerror=function(e){0<i.playState&&i._iO.ondataerror&&i._iO.ondataerror.apply(i)}},W=function(){return p.body||p.getElementsByTagName("div")[0]},l=function(e){return p.getElementById(e)},C=function(e,n){var r=e||{},i,s;i=n===t?u.defaultOptions:n;for(s in i)i.hasOwnProperty(s)&&r[s]===t&&(r[s]="object"!=typeof i[s]||null===i[s]?i[s]:C(r[s],i[s]));return r},_t=function(t,n){!t.isHTML5&&8===y?e.setTimeout(n,0):n()},A={onready:1,ontimeout:1,defaultOptions:1,flash9Options:1,movieStarOptions:1},L=function(e,n){var r,i=!0,s=n!==t,o=u.setupOptions;for(r in e)if(e.hasOwnProperty(r))if("object"!=typeof e[r]||null===e[r]||e[r]instanceof Array||e[r]instanceof RegExp)s&&A[n]!==t?u[n][r]=e[r]:o[r]!==t?(u.setupOptions[r]=e[r],u[r]=e[r]):A[r]===t?i=!1:u[r]instanceof Function?u[r].apply(u,e[r]instanceof Array?e[r]:[e[r]]):u[r]=e[r];else{if(A[r]!==t)return L(e[r],r);i=!1}return i},Tt=function(){function t(e){e=Nt.call(e);var t=e.length;return r?(e[1]="on"+e[1],3<t&&e.pop()):3===t&&e.push(!1),e}function n(e,t){var n=e.shift(),s=[i[t]];r?n[s](e[0],e[1]):n[s].apply(n,e)}var r=e.attachEvent,i={add:r?"attachEvent":"addEventListener",remove:r?"detachEvent":"removeEventListener"};return{add:function(){n(t(arguments),"add")},remove:function(){n(t(arguments),"remove")}}}(),Mt={abort:s(function(){}),canplay:s(function(){var e=this._s,n;if(e._html5_canplay)return!0;e._html5_canplay=!0,e._onbufferchange(0),n=e._iO.position!==t&&!isNaN(e._iO.position)?e._iO.position/1e3:null;if(e.position&&this.currentTime!==n)try{this.currentTime=n}catch(r){}e._iO._oncanplay&&e._iO._oncanplay()}),canplaythrough:s(function(){var e=this._s;e.loaded||(e._onbufferchange(0),e._whileloading(e.bytesLoaded,e.bytesTotal,e._get_html5_duration()),e._onload(!0))}),ended:s(function(){this._s._onfinish()}),error:s(function(){this._s._onload(!1)}),loadeddata:s(function(){var e=this._s;!e._loaded&&!Ft&&(e.duration=e._get_html5_duration())}),loadedmetadata:s(function(){}),loadstart:s(function(){this._s._onbufferchange(1)}),play:s(function(){this._s._onbufferchange(0)}),playing:s(function(){this._s._onbufferchange(0)}),progress:s(function(e){var t=this._s,n,r,i=0,i=e.target.buffered;n=e.loaded||0;var s=e.total||1;t.buffered=[];if(i&&i.length){n=0;for(r=i.length;n<r;n++)t.buffered.push({start:1e3*i.start(n),end:1e3*i.end(n)});i=1e3*(i.end(0)-i.start(0)),n=Math.min(1,i/(1e3*e.target.duration))}isNaN(n)||(t._onbufferchange(0),t._whileloading(n,s,t._get_html5_duration()),n&&s&&n===s&&Mt.canplaythrough.call(this,e))}),ratechange:s(function(){}),suspend:s(function(e){var t=this._s;Mt.progress.call(this,e),t._onsuspend()}),stalled:s(function(){}),timeupdate:s(function(){this._s._onTimer()}),waiting:s(function(){this._s._onbufferchange(1)})},yt=function(e){return!e||!e.type&&!e.url&&!e.serverURL?!1:e.serverURL||e.type&&i(e.type)?!1:e.type?bt({type:e.type}):bt({url:e.url})||u.html5Only||e.url.match(/data\:/i)},Et=function(e){var t;return e&&(t=Ft?"about:blank":u.html5.canPlayType("audio/wav")?"data:audio/wave;base64,/UklGRiYAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQIAAAD//w==":"about:blank",e.src=t,void 0!==e._called_unload&&(e._called_load=!1)),Ct&&(kt=null),t},bt=function(e){if(!u.useHTML5Audio||!u.hasHTML5)return!1;var n=e.url||null;e=e.type||null;var r=u.audioFormats,s;if(e&&u.html5[e]!==t)return u.html5[e]&&!i(e);if(!wt){wt=[];for(s in r)r.hasOwnProperty(s)&&(wt.push(s),r[s].related&&(wt=wt.concat(r[s].related)));wt=RegExp("\\.("+wt.join("|")+")(\\?.*)?$","i")}return s=n?n.toLowerCase().match(wt):null,!s||!s.length?e&&(n=e.indexOf(";"),s=(-1!==n?e.substr(0,n):e).substr(6)):s=s[1],s&&u.html5[s]!==t?n=u.html5[s]&&!i(s):(e="audio/"+s,n=u.html5.canPlayType({type:e}),n=(u.html5[s]=n)&&u.html5[e]&&!i(e)),n},xt=function(){function e(e){var t,r=t=!1;if(!n||"function"!=typeof n.canPlayType)return t;if(e instanceof Array){a=0;for(t=e.length;a<t;a++)if(u.html5[e[a]]||n.canPlayType(e[a]).match(u.html5Test))r=!0,u.html5[e[a]]=!0,u.flash[e[a]]=!!e[a].match(Xt);t=r}else e=n&&"function"==typeof n.canPlayType?n.canPlayType(e):!1,t=!!e&&!!e.match(u.html5Test);return t}if(!u.useHTML5Audio||!u.hasHTML5)return mt=u.html5.usingFlash=!0,!1;var n=Audio!==t?It&&10>opera.version()?new Audio(null):new Audio:null,r,i,s={},o,a;o=u.audioFormats;for(r in o)if(o.hasOwnProperty(r)&&(i="audio/"+r,s[r]=e(o[r].type),s[i]=s[r],r.match(Xt)?(u.flash[r]=!0,u.flash[i]=!0):(u.flash[r]=!1,u.flash[i]=!1),o[r]&&o[r].related))for(a=o[r].related.length-1;0<=a;a--)s["audio/"+o[r].related[a]]=s[r],u.html5[o[r].related[a]]=s[r],u.flash[o[r].related[a]]=s[r];return s.canPlayType=n?e:null,u.html5=C(u.html5,s),u.html5.usingFlash=gt(),mt=u.html5.usingFlash,!0},F={},et=function(){},rt=function(e){return 8===y&&1<e.loops&&e.stream&&(e.stream=!1),e},it=function(e,t){return e&&!e.usePolicyFile&&(e.onid3||e.usePeakData||e.useWaveformData||e.useEQData)&&(e.usePolicyFile=!0),e},d=function(){return!1},K=function(e){for(var t in e)e.hasOwnProperty(t)&&"function"==typeof e[t]&&(e[t]=d)},Q=function(e){e===t&&(e=!1),(x||e)&&u.disable(e)},G=function(e){var t=null;if(e)if(e.match(/\.swf(\?.*)?$/i)){if(t=e.substr(e.toLowerCase().lastIndexOf(".swf?")+4))return e}else e.lastIndexOf("/")!==e.length-1&&(e+="/");return e=(e&&-1!==e.lastIndexOf("/")?e.substr(0,e.lastIndexOf("/")+1):"./")+u.movieURL,u.noSWFCache&&(e+="?ts="+(new Date).getTime()),e},B=function(){y=parseInt(u.flashVersion,10),8!==y&&9!==y&&(u.flashVersion=y=8);var e=u.debugMode||u.debugFlash?"_debug.swf":".swf";u.useHTML5Audio&&!u.html5Only&&u.audioFormats.mp4.required&&9>y&&(u.flashVersion=y=9),u.version=u.versionNumber+(u.html5Only?" (HTML5-only mode)":9===y?" (AS3/Flash 9)":" (AS2/Flash 8)"),8<y?(u.defaultOptions=C(u.defaultOptions,u.flash9Options),u.features.buffering=!0,u.defaultOptions=C(u.defaultOptions,u.movieStarOptions),u.filePatterns.flash9=RegExp("\\.(mp3|"+Kt.join("|")+")(\\?.*)?$","i"),u.features.movieStar=!0):u.features.movieStar=!1,u.filePattern=u.filePatterns[8!==y?"flash9":"flash8"],u.movieURL=(8===y?"soundmanager2.swf":"soundmanager2_flash9.swf").replace(".swf",e),u.features.peakData=u.features.waveformData=u.features.eqData=8<y},$=function(e,t){if(!f)return!1;f._setPolling(e,t)},J=function(){},st=this.getSoundById,nt=function(){var e=[];return u.debugMode&&e.push("sm2_debug"),u.debugFlash&&e.push("flash_debug"),u.useHighPerformance&&e.push("high_performance"),e.join(" ")},tt=function(){et("fbHandler");var e=u.getMoviePercent(),t={type:"FLASHBLOCK"};if(u.html5Only)return!1;u.ok()?u.oMC&&(u.oMC.className=[nt(),"movieContainer","swf_loaded"+(u.didFlashBlock?" swf_unblocked":"")].join(" ")):(mt&&(u.oMC.className=nt()+" movieContainer "+(null===e?"swf_timedout":"swf_error")),u.didFlashBlock=!0,M({type:"ontimeout",ignoreInit:!0,error:t}),V(t))},O=function(e,n,r){b[e]===t&&(b[e]=[]),b[e].push({method:n,scope:r||null,fired:!1})},M=function(e){e||(e={type:u.ok()?"onready":"ontimeout"});if(!S&&e&&!e.ignoreInit||"ontimeout"===e.type&&(u.ok()||x&&!e.ignoreInit))return!1;var t={success:e&&e.ignoreInit?u.ok():!x},n=e&&e.type?b[e.type]||[]:[],r=[],i,t=[t],s=mt&&!u.ok();e.error&&(t[0].error=e.error),e=0;for(i=n.length;e<i;e++)!0!==n[e].fired&&r.push(n[e]);if(r.length){e=0;for(i=r.length;e<i;e++)r[e].scope?r[e].method.apply(r[e].scope,t):r[e].method.apply(this,t),s||(r[e].fired=!0)}return!0},_=function(){e.setTimeout(function(){u.useFlashBlock&&tt(),M(),"function"==typeof u.onload&&u.onload.apply(e),u.waitForWindowLoad&&Tt.add(e,"load",_)},1)},At=function(){if(Lt!==t)return Lt;var n=!1,r=navigator,i=r.plugins,s,o=e.ActiveXObject;if(i&&i.length)(r=r.mimeTypes)&&r["application/x-shockwave-flash"]&&r["application/x-shockwave-flash"].enabledPlugin&&r["application/x-shockwave-flash"].enabledPlugin.description&&(n=!0);else if(o!==t&&!c.match(/MSAppHost/i)){try{s=new o("ShockwaveFlash.ShockwaveFlash")}catch(u){s=null}n=!!s}return Lt=n},gt=function(){var e,t,n=u.audioFormats;Pt&&c.match(/os (1|2|3_0|3_1)/i)?(u.hasHTML5=!1,u.html5Only=!0,u.oMC&&(u.oMC.style.display="none")):u.useHTML5Audio&&(!u.html5||!u.html5.canPlayType)&&(u.hasHTML5=!1);if(u.useHTML5Audio&&u.hasHTML5)for(t in vt=!0,n)n.hasOwnProperty(t)&&n[t].required&&(u.html5.canPlayType(n[t].type)?u.preferFlash&&(u.flash[t]||u.flash[n[t].type])&&(e=!0):(vt=!1,e=!0));return u.ignoreFlash&&(e=!1,vt=!0),u.html5Only=u.hasHTML5&&u.useHTML5Audio&&!e,!u.html5Only},pt=function(e){var t,n,r=0;if(e instanceof Array){t=0;for(n=e.length;t<n;t++)if(e[t]instanceof Object){if(u.canPlayMIME(e[t].type)){r=t;break}}else if(u.canPlayURL(e[t])){r=t;break}e[r].url&&(e[r]=e[r].url),e=e[r]}return e},at=function(e){e._hasTimer||(e._hasTimer=!0,!qt&&u.html5PollingInterval&&(null===ht&&0===ct&&(ht=setInterval(lt,u.html5PollingInterval)),ct++))},ft=function(e){e._hasTimer&&(e._hasTimer=!1,!qt&&u.html5PollingInterval&&ct--)},lt=function(){var e;if(null!==ht&&!ct)return clearInterval(ht),ht=null,!1;for(e=u.soundIDs.length-1;0<=e;e--)u.sounds[u.soundIDs[e]].isHTML5&&u.sounds[u.soundIDs[e]]._hasTimer&&u.sounds[u.soundIDs[e]]._onTimer()},V=function(n){n=n!==t?n:{},"function"==typeof u.onerror&&u.onerror.apply(e,[{type:n.type!==t?n.type:null}]),n.fatal!==t&&n.fatal&&u.disable()},Ot=function(){if(!Rt||!At())return!1;var e=u.audioFormats,t,n;for(n in e)if(e.hasOwnProperty(n)&&("mp3"===n||"mp4"===n))if(u.html5[n]=!1,e[n]&&e[n].related)for(t=e[n].related.length-1;0<=t;t--)u.html5[e[n].related[t]]=!1},this._setSandboxType=function(e){},this._externalInterfaceOK=function(e){if(u.swfLoaded)return!1;u.swfLoaded=!0,zt=!1,Rt&&Ot(),setTimeout(m,Bt?100:1)},X=function(e,n){function r(e,t){return'<param name="'+e+'" value="'+t+'" />'}if(w&&E)return!1;if(u.html5Only)return B(),u.oMC=l(u.movieID),m(),E=w=!0,!1;var i=n||u.url,s=u.altURL||i,o=W(),a=nt(),f=null,f=p.getElementsByTagName("html")[0],h,d,v,f=f&&f.dir&&f.dir.match(/rtl/i);e=e===t?u.id:e,B(),u.url=G(Vt?i:s),n=u.url,u.wmode=!u.wmode&&u.useHighPerformance?"transparent":u.wmode,null!==u.wmode&&(c.match(/msie 8/i)||!Bt&&!u.useHighPerformance)&&navigator.platform.match(/win32|win64/i)&&(dt.push(F.spcWmode),u.wmode=null),o={name:e,id:e,src:n,quality:"high",allowScriptAccess:u.allowScriptAccess,bgcolor:u.bgColor,pluginspage:$t+"www.macromedia.com/go/getflashplayer",title:"JS/Flash audio component (SoundManager 2)",type:"application/x-shockwave-flash",wmode:u.wmode,hasPriority:"true"},u.debugFlash&&(o.FlashVars="debug=1"),u.wmode||delete o.wmode;if(Bt)i=p.createElement("div"),d=['<object id="'+e+'" data="'+n+'" type="'+o.type+'" title="'+o.title+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="'+$t+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0">',r("movie",n),r("AllowScriptAccess",u.allowScriptAccess),r("quality",o.quality),u.wmode?r("wmode",u.wmode):"",r("bgcolor",u.bgColor),r("hasPriority","true"),u.debugFlash?r("FlashVars",o.FlashVars):"","</object>"].join("");else for(h in i=p.createElement("embed"),o)o.hasOwnProperty(h)&&i.setAttribute(h,o[h]);J(),a=nt();if(o=W())if(u.oMC=l(u.movieID)||p.createElement("div"),u.oMC.id)v=u.oMC.className,u.oMC.className=(v?v+" ":"movieContainer")+(a?" "+a:""),u.oMC.appendChild(i),Bt&&(h=u.oMC.appendChild(p.createElement("div")),h.className="sm2-object-box",h.innerHTML=d),E=!0;else{u.oMC.id=u.movieID,u.oMC.className="movieContainer "+a,h=a=null,u.useFlashBlock||(u.useHighPerformance?a={position:"fixed",width:"8px",height:"8px",bottom:"0px",left:"0px",overflow:"hidden"}:(a={position:"absolute",width:"6px",height:"6px",top:"-9999px",left:"-9999px"},f&&(a.left=Math.abs(parseInt(a.left,10))+"px"))),jt&&(u.oMC.style.zIndex=1e4);if(!u.debugFlash)for(v in a)a.hasOwnProperty(v)&&(u.oMC.style[v]=a[v]);try{Bt||u.oMC.appendChild(i),o.appendChild(u.oMC),Bt&&(h=u.oMC.appendChild(p.createElement("div")),h.className="sm2-object-box",h.innerHTML=d),E=!0}catch(g){throw Error(et("domError")+" \n"+g.toString())}}return w=!0},I=function(){return u.html5Only?(X(),!1):f||!u.url?!1:(f=u.getMovie(u.id),f||(Y?(Bt?u.oMC.innerHTML=Z:u.oMC.appendChild(Y),Y=null,w=!0):X(u.id,u.url),f=u.getMovie(u.id)),"function"==typeof u.oninitmovie&&setTimeout(u.oninitmovie,1),!0)},D=function(){setTimeout(P,1e3)},H=function(){e.setTimeout(function(){u.setup({preferFlash:!1}).reboot(),u.didFlashBlock=!0,u.beginDelayedInit()},1)},P=function(){var t,n=!1;if(!u.url||ot)return!1;ot=!0,Tt.remove(e,"load",D);if(Lt&&zt&&!Ut)return!1;S||(t=u.getMoviePercent(),0<t&&100>t&&(n=!0)),setTimeout(function(){t=u.getMoviePercent();if(n)return ot=!1,e.setTimeout(D,1),!1;!S&&Wt&&(null===t?u.useFlashBlock||0===u.flashLoadTimeout?u.useFlashBlock&&tt():!u.useFlashBlock&&vt?H():M({
type:"ontimeout",ignoreInit:!0,error:{type:"INIT_FLASHBLOCK"}}):0!==u.flashLoadTimeout&&(!u.useFlashBlock&&vt?H():Q(!0)))},u.flashLoadTimeout)},j=function(){return Ut||!zt?(Tt.remove(e,"focus",j),!0):(Ut=Wt=!0,ot=!1,D(),Tt.remove(e,"focus",j),!0)},N=function(t){if(S)return!1;if(u.html5Only)return S=!0,_(),!0;var n=!0,r;if(!u.useFlashBlock||!u.flashLoadTimeout||u.getMoviePercent())S=!0;r={type:!Lt&&mt?"NO_FLASH":"INIT_TIMEOUT"};if(x||t)u.useFlashBlock&&u.oMC&&(u.oMC.className=nt()+" "+(null===u.getMoviePercent()?"swf_timedout":"swf_error")),M({type:"ontimeout",error:r,ignoreInit:!0}),V(r),n=!1;return x||(u.waitForWindowLoad&&!T?Tt.add(e,"load",_):_()),n},v=function(){var e,n=u.setupOptions;for(e in n)n.hasOwnProperty(e)&&(u[e]===t?u[e]=n[e]:u[e]!==n[e]&&(u.setupOptions[e]=u[e]))},m=function(){if(S)return!1;if(u.html5Only)return S||(Tt.remove(e,"load",u.beginDelayedInit),u.enabled=!0,N()),!0;I();try{f._externalInterfaceTest(!1),$(!0,u.flashPollingInterval||(u.useHighPerformance?10:50)),u.debugMode||f._disableDebug(),u.enabled=!0,u.html5Only||Tt.add(e,"unload",d)}catch(t){return V({type:"JS_TO_FLASH_EXCEPTION",fatal:!0}),Q(!0),N(),!1}return N(),Tt.remove(e,"load",u.beginDelayedInit),!0},R=function(){return z?!1:(z=!0,v(),J(),!Lt&&u.hasHTML5&&u.setup({useHTML5Audio:!0,preferFlash:!1}),xt(),!Lt&&mt&&(dt.push(F.needFlash),u.setup({flashLoadTimeout:1})),p.removeEventListener&&p.removeEventListener("DOMContentLoaded",R,!1),I(),!0)},St=function(){return"complete"===p.readyState&&(R(),p.detachEvent("onreadystatechange",St)),!0},U=function(){T=!0,Tt.remove(e,"load",U)},q=function(){qt&&(u.setupOptions.useHTML5Audio=!0,u.setupOptions.preferFlash=!1,Pt||Ht&&!c.match(/android\s2\.3/i))&&(Pt&&(u.ignoreFlash=!0),Ct=!0)},q(),At(),Tt.add(e,"focus",j),Tt.add(e,"load",D),Tt.add(e,"load",U),p.addEventListener?p.addEventListener("DOMContentLoaded",R,!1):p.attachEvent?p.attachEvent("onreadystatechange",St):V({type:"NO_DOM2_EVENTS",fatal:!0})}var r=null;if(void 0===e.SM2_DEFER||!SM2_DEFER)r=new n;e.SoundManager=n,e.soundManager=r})(window);(function(){function t(e){var t=e.resolution;e.preprocessor.bound(e.min,e.max).subsampleMinMax(t+Math.round(t/3))}function n(){return{price:{name:"envision-finance-price",config:{"lite-lines":{lineWidth:1,show:!0,fill:!0,fillOpacity:.2},mouse:{track:!0,trackY:!1,trackAll:!0,sensibility:1,trackDecimals:4,position:"ne"},yaxis:{autoscale:!0,autoscaleMargin:.05,noTicks:4,showLabels:!0}},processData:t},volume:{name:"envision-finance-volume",config:{whiskers:{show:!0,lineWidth:2},mouse:{track:!0,trackY:!1,trackAll:!0},yaxis:{autoscale:!0,autoscaleMargin:.5}},processData:t},summary:{name:"envision-finance-summary",config:{"lite-lines":{show:!0,lineWidth:1,fill:!0,fillOpacity:.2,fillBorder:!0},xaxis:{noTicks:5,showLabels:!0},yaxis:{autoscale:!0,autoscaleMargin:.1},handles:{show:!0},selection:{mode:"x"},grid:{verticalLines:!1}}},connection:{name:"envision-finance-connection",adapterConstructor:e.components.QuadraticDrawing}}}function r(t){var r=t.data,i=n(),s=new e.Visualization({name:"envision-finance"}),o=new e.Interaction,u=new e.Interaction,a,f,l,c;t.defaults&&(i=Flotr.merge(t.defaults,i)),i.price.data=r.price,i.volume.data=r.volume,i.summary.data=r.summary,i.price.config.mouse.trackFormatter=t.trackFormatter||function(e){var t=e.index,n;return a.api.preprocessor&&(t+=a.api.preprocessor.start),n="Price: $"+r.price[1][t]+", Vol: "+r.volume[1][t],n},t.xTickFormatter&&(i.summary.config.xaxis.tickFormatter=t.xTickFormatter),i.price.config.yaxis.tickFormatter=t.yTickFormatter||function(e){return"$"+e},a=new e.Component(i.price),f=new e.Component(i.volume),l=new e.Component(i.connection),c=new e.Component(i.summary),s.add(a).add(l).render(t.container),o.follower(a).follower(l).add(e.actions.selection,t.selectionCallback?{callback:t.selectionCallback}:null),r.volume&&(s.add(f),o.follower(f),this.volume=f),r.summary&&(s.add(c),o.leader(c),t.selection&&c.trigger("select",t.selection),this.summary=c),this.vis=s,this.selection=o,this.price=a}var e=envision;e.templates.BitCoinFinance=r})();function savealarm(){var e=$("#min_price").val(),t=$("#max_price").val();e&&(coin__minprice=parseFloat(e)),t&&(coin__maxprice=parseFloat(t)),checkalarm(),$("#status").html("Save OK. "+(new Date).Format("yyyy-MM-dd hh:mm:ss"))}function clearalarm(){$("#min_price").val(""),$("#max_price").val(""),coin__minprice=null,coin__maxprice=null,checkalarm()}function initalarm(){alarming=!1}function playdownalarm(e){stopalarm(),console.log(e),alarmSound.play({loops:100}),alarming=!0}function playupalarm(e){stopalarm(),console.log(e),upSound.play({loops:100}),alarming=!0}function stopalarm(){alarming=!1,alarmSound&&alarmSound.stop(),upSound&&upSound.stop()}function checkalarm(){coin__minprice!=null&&coin__lastprice<=coin__minprice?alarming||playdownalarm("lower"):coin__maxprice!=null&&coin__lastprice>=coin__maxprice?alarming||playupalarm("upper"):stopalarm()}function hidechart(){coin__showchart?($("#charts").hide(),$("#show_chart").html("Show Chart"),coin__showchart=!1):($("#charts").show(),$("#show_chart").html("Hide Chart"),coin__showchart=!0,financedraw())}function financedraw(){finance.price.draw(null),finance.summary.draw(null)}function financechart(){function a(e){$("#status").html(e)}var e=points,t=(new Date).Format("yyyy-MM-dd hh:mm:ss"),n={summaryTicks:[{date:t,open:100.01,high:104.06,low:95.96,close:100.34,volume:22088e3}],price:[[0],[118]],volume:[[0],[110]],summary:[[0],[100]]},r=envision,i=document.getElementById("charts"),s=n.summaryTicks,o,u=!0;o={container:i,data:{price:n.price,summary:n.price},trackFormatter:function(e){var t=e.series.data,n=t[e.index][0],r;return r=s[n].close+" / \n"+s[n].date,r},xTickFormatter:function(e){if(e<0)return"";if(e>=s.length)return"";var t=new Date(n.summaryTicks[e].date);return t.Format("MM-dd hh:mm")+""},yTickFormatter:function(e){return e},selection:{data:{x:{min:100,max:200}}}},finance=new envision.templates.BitCoinFinance(o);var f=io.connect("http://www.iosplay.com:8888/ws/coins");f.on("notification",function(t,r){console.log(t+","+r),coin__lastprice=r,checkalarm();var i=n.price[0].length,s=n.price[0][i-1];$("#title").html(coin__lastprice+"  |  "+title),$("#coin_price").html(coin__lastprice),u?(n.summaryTicks.shift(),n.price[1].shift(),u=!1):n.summaryTicks.length>=e?(n.summaryTicks.shift(),n.price[1].shift()):(s+=1,n.price[0].push(s));var o=(new Date).Format("yyyy-MM-dd hh:mm:ss");n.summaryTicks.push({date:o,open:coin__lastprice,high:coin__lastprice,low:coin__lastprice,close:coin__lastprice,volume:coin__lastprice}),n.price[1].push(coin__lastprice),financedraw();var a=0,f=0;s>=e&&finance.summary.trigger("select",{data:{x:{min:e/2,max:e}}})}),f.on("connected",function(){f.emit("join",channel),a("Connected.")})}Date.prototype.Format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var n in t)(new RegExp("("+n+")")).test(e)&&(e=e.replace(RegExp.$1,RegExp.$1.length==1?t[n]:("00"+t[n]).substr((""+t[n]).length)));return e};var coin__minprice=null,coin__maxprice=null,coin__lastprice=null,coin__showchart=!0,finance;